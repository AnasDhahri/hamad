var wT=Object.defineProperty;var ET=(t,e,n)=>e in t?wT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Yl=(t,e,n)=>ET(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TT(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var wC={exports:{}},hu={},EC={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca=Symbol.for("react.element"),IT=Symbol.for("react.portal"),AT=Symbol.for("react.fragment"),_T=Symbol.for("react.strict_mode"),MT=Symbol.for("react.profiler"),kT=Symbol.for("react.provider"),bT=Symbol.for("react.context"),DT=Symbol.for("react.forward_ref"),OT=Symbol.for("react.suspense"),xT=Symbol.for("react.memo"),NT=Symbol.for("react.lazy"),Tv=Symbol.iterator;function zT(t){return t===null||typeof t!="object"?null:(t=Tv&&t[Tv]||t["@@iterator"],typeof t=="function"?t:null)}var TC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IC=Object.assign,AC={};function Ti(t,e,n){this.props=t,this.context=e,this.refs=AC,this.updater=n||TC}Ti.prototype.isReactComponent={};Ti.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ti.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _C(){}_C.prototype=Ti.prototype;function Ph(t,e,n){this.props=t,this.context=e,this.refs=AC,this.updater=n||TC}var Rh=Ph.prototype=new _C;Rh.constructor=Ph;IC(Rh,Ti.prototype);Rh.isPureReactComponent=!0;var Iv=Array.isArray,MC=Object.prototype.hasOwnProperty,wh={current:null},kC={key:!0,ref:!0,__self:!0,__source:!0};function bC(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)MC.call(e,r)&&!kC.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Ca,type:t,key:o,ref:a,props:i,_owner:wh.current}}function jT(t,e){return{$$typeof:Ca,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Eh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ca}function LT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Av=/\/+/g;function Zl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LT(""+t.key):e.toString(36)}function gc(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ca:case IT:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Zl(a,0):r,Iv(i)?(n="",t!=null&&(n=t.replace(Av,"$&/")+"/"),gc(i,e,n,"",function(u){return u})):i!=null&&(Eh(i)&&(i=jT(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Av,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Iv(t))for(var s=0;s<t.length;s++){o=t[s];var c=r+Zl(o,s);a+=gc(o,e,n,c,i)}else if(c=zT(t),typeof c=="function")for(t=c.call(t),s=0;!(o=t.next()).done;)o=o.value,c=r+Zl(o,s++),a+=gc(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ha(t,e,n){if(t==null)return t;var r=[],i=0;return gc(t,r,"","",function(o){return e.call(n,o,i++)}),r}function BT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xe={current:null},mc={transition:null},FT={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:mc,ReactCurrentOwner:wh};function DC(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Ha,forEach:function(t,e,n){Ha(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ha(t,function(){e++}),e},toArray:function(t){return Ha(t,function(e){return e})||[]},only:function(t){if(!Eh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};W.Component=Ti;W.Fragment=AT;W.Profiler=MT;W.PureComponent=Ph;W.StrictMode=_T;W.Suspense=OT;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FT;W.act=DC;W.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=IC({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=wh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(c in e)MC.call(e,c)&&!kC.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&s!==void 0?s[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){s=Array(c);for(var u=0;u<c;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Ca,type:t.type,key:i,ref:o,props:r,_owner:a}};W.createContext=function(t){return t={$$typeof:bT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kT,_context:t},t.Consumer=t};W.createElement=bC;W.createFactory=function(t){var e=bC.bind(null,t);return e.type=t,e};W.createRef=function(){return{current:null}};W.forwardRef=function(t){return{$$typeof:DT,render:t}};W.isValidElement=Eh;W.lazy=function(t){return{$$typeof:NT,_payload:{_status:-1,_result:t},_init:BT}};W.memo=function(t,e){return{$$typeof:xT,type:t,compare:e===void 0?null:e}};W.startTransition=function(t){var e=mc.transition;mc.transition={};try{t()}finally{mc.transition=e}};W.unstable_act=DC;W.useCallback=function(t,e){return Xe.current.useCallback(t,e)};W.useContext=function(t){return Xe.current.useContext(t)};W.useDebugValue=function(){};W.useDeferredValue=function(t){return Xe.current.useDeferredValue(t)};W.useEffect=function(t,e){return Xe.current.useEffect(t,e)};W.useId=function(){return Xe.current.useId()};W.useImperativeHandle=function(t,e,n){return Xe.current.useImperativeHandle(t,e,n)};W.useInsertionEffect=function(t,e){return Xe.current.useInsertionEffect(t,e)};W.useLayoutEffect=function(t,e){return Xe.current.useLayoutEffect(t,e)};W.useMemo=function(t,e){return Xe.current.useMemo(t,e)};W.useReducer=function(t,e,n){return Xe.current.useReducer(t,e,n)};W.useRef=function(t){return Xe.current.useRef(t)};W.useState=function(t){return Xe.current.useState(t)};W.useSyncExternalStore=function(t,e,n){return Xe.current.useSyncExternalStore(t,e,n)};W.useTransition=function(){return Xe.current.useTransition()};W.version="18.3.1";EC.exports=W;var E=EC.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT=E,qT=Symbol.for("react.element"),UT=Symbol.for("react.fragment"),$T=Object.prototype.hasOwnProperty,WT=VT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HT={key:!0,ref:!0,__self:!0,__source:!0};function OC(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)$T.call(e,r)&&!HT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qT,type:t,key:o,ref:a,props:i,_owner:WT.current}}hu.Fragment=UT;hu.jsx=OC;hu.jsxs=OC;wC.exports=hu;var T=wC.exports,xC={exports:{}},dt={},NC={exports:{}},zC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,x){var L=k.length;k.push(x);e:for(;0<L;){var Y=L-1>>>1,ce=k[Y];if(0<i(ce,x))k[Y]=x,k[L]=ce,L=Y;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var x=k[0],L=k.pop();if(L!==x){k[0]=L;e:for(var Y=0,ce=k.length,yn=ce>>>1;Y<yn;){var ft=2*(Y+1)-1,vt=k[ft],Oe=ft+1,At=k[Oe];if(0>i(vt,L))Oe<ce&&0>i(At,vt)?(k[Y]=At,k[Oe]=L,Y=Oe):(k[Y]=vt,k[ft]=L,Y=ft);else if(Oe<ce&&0>i(At,L))k[Y]=At,k[Oe]=L,Y=Oe;else break e}}return x}function i(k,x){var L=k.sortIndex-x.sortIndex;return L!==0?L:k.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var c=[],u=[],l=1,p=null,d=3,h=!1,f=!1,m=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(k){for(var x=n(u);x!==null;){if(x.callback===null)r(u);else if(x.startTime<=k)r(u),x.sortIndex=x.expirationTime,e(c,x);else break;x=n(u)}}function C(k){if(m=!1,y(k),!f)if(n(c)!==null)f=!0,Se(P);else{var x=n(u);x!==null&&re(C,x.startTime-k)}}function P(k,x){f=!1,m&&(m=!1,v(R),R=-1),h=!0;var L=d;try{for(y(x),p=n(c);p!==null&&(!(p.expirationTime>x)||k&&!F());){var Y=p.callback;if(typeof Y=="function"){p.callback=null,d=p.priorityLevel;var ce=Y(p.expirationTime<=x);x=t.unstable_now(),typeof ce=="function"?p.callback=ce:p===n(c)&&r(c),y(x)}else r(c);p=n(c)}if(p!==null)var yn=!0;else{var ft=n(u);ft!==null&&re(C,ft.startTime-x),yn=!1}return yn}finally{p=null,d=L,h=!1}}var w=!1,I=null,R=-1,A=5,O=-1;function F(){return!(t.unstable_now()-O<A)}function J(){if(I!==null){var k=t.unstable_now();O=k;var x=!0;try{x=I(!0,k)}finally{x?G():(w=!1,I=null)}}else w=!1}var G;if(typeof g=="function")G=function(){g(J)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,It=Ke.port2;Ke.port1.onmessage=J,G=function(){It.postMessage(null)}}else G=function(){S(J,0)};function Se(k){I=k,w||(w=!0,G())}function re(k,x){R=S(function(){k(t.unstable_now())},x)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){f||h||(f=!0,Se(P))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(k){switch(d){case 1:case 2:case 3:var x=3;break;default:x=d}var L=d;d=x;try{return k()}finally{d=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,x){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var L=d;d=k;try{return x()}finally{d=L}},t.unstable_scheduleCallback=function(k,x,L){var Y=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?Y+L:Y):L=Y,k){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=L+ce,k={id:l++,callback:x,priorityLevel:k,startTime:L,expirationTime:ce,sortIndex:-1},L>Y?(k.sortIndex=L,e(u,k),n(c)===null&&k===n(u)&&(m?(v(R),R=-1):m=!0,re(C,L-Y))):(k.sortIndex=ce,e(c,k),f||h||(f=!0,Se(P))),k},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(k){var x=d;return function(){var L=d;d=x;try{return k.apply(this,arguments)}finally{d=L}}}})(zC);NC.exports=zC;var KT=NC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT=E,lt=KT;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jC=new Set,Qo={};function xr(t,e){pi(t,e),pi(t+"Capture",e)}function pi(t,e){for(Qo[t]=e,t=0;t<e.length;t++)jC.add(e[t])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sd=Object.prototype.hasOwnProperty,JT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_v={},Mv={};function QT(t){return sd.call(Mv,t)?!0:sd.call(_v,t)?!1:JT.test(t)?Mv[t]=!0:(_v[t]=!0,!1)}function XT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YT(t,e,n,r){if(e===null||typeof e>"u"||XT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ye(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ke[t]=new Ye(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ke[e]=new Ye(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ke[t]=new Ye(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ke[t]=new Ye(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ke[t]=new Ye(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ke[t]=new Ye(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ke[t]=new Ye(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ke[t]=new Ye(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ke[t]=new Ye(t,5,!1,t.toLowerCase(),null,!1,!1)});var Th=/[\-:]([a-z])/g;function Ih(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Th,Ih);ke[e]=new Ye(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Th,Ih);ke[e]=new Ye(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Th,Ih);ke[e]=new Ye(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ke[t]=new Ye(t,1,!1,t.toLowerCase(),null,!1,!1)});ke.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ke[t]=new Ye(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ah(t,e,n,r){var i=ke.hasOwnProperty(e)?ke[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YT(e,n,i,r)&&(n=null),r||i===null?QT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gn=GT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ka=Symbol.for("react.element"),qr=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),_h=Symbol.for("react.strict_mode"),od=Symbol.for("react.profiler"),LC=Symbol.for("react.provider"),BC=Symbol.for("react.context"),Mh=Symbol.for("react.forward_ref"),ad=Symbol.for("react.suspense"),cd=Symbol.for("react.suspense_list"),kh=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),FC=Symbol.for("react.offscreen"),kv=Symbol.iterator;function zi(t){return t===null||typeof t!="object"?null:(t=kv&&t[kv]||t["@@iterator"],typeof t=="function"?t:null)}var ae=Object.assign,ep;function ko(t){if(ep===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ep=e&&e[1]||""}return`
`+ep+t}var tp=!1;function np(t,e){if(!t||tp)return"";tp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=s);break}}}finally{tp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ko(t):""}function ZT(t){switch(t.tag){case 5:return ko(t.type);case 16:return ko("Lazy");case 13:return ko("Suspense");case 19:return ko("SuspenseList");case 0:case 2:case 15:return t=np(t.type,!1),t;case 11:return t=np(t.type.render,!1),t;case 1:return t=np(t.type,!0),t;default:return""}}function ud(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ur:return"Fragment";case qr:return"Portal";case od:return"Profiler";case _h:return"StrictMode";case ad:return"Suspense";case cd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BC:return(t.displayName||"Context")+".Consumer";case LC:return(t._context.displayName||"Context")+".Provider";case Mh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kh:return e=t.displayName||null,e!==null?e:ud(t.type)||"Memo";case Rn:e=t._payload,t=t._init;try{return ud(t(e))}catch{}}return null}function e1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ud(e);case 8:return e===_h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t1(t){var e=VC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ga(t){t._valueTracker||(t._valueTracker=t1(t))}function qC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=VC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Oc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ld(t,e){var n=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UC(t,e){e=e.checked,e!=null&&Ah(t,"checked",e,!1)}function pd(t,e){UC(t,e);var n=Fn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dd(t,e.type,n):e.hasOwnProperty("defaultValue")&&dd(t,e.type,Fn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dd(t,e,n){(e!=="number"||Oc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bo=Array.isArray;function si(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function hd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ov(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(bo(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fn(n)}}function $C(t,e){var n=Fn(e.value),r=Fn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function WC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?WC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ja,HC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ja=Ja||document.createElement("div"),Ja.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ja.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n1=["Webkit","ms","Moz","O"];Object.keys(jo).forEach(function(t){n1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jo[e]=jo[t]})});function KC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jo.hasOwnProperty(t)&&jo[t]?(""+e).trim():e+"px"}function GC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=KC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var r1=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vd(t,e){if(e){if(r1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function gd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=null;function bh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yd=null,oi=null,ai=null;function Nv(t){if(t=wa(t)){if(typeof yd!="function")throw Error(M(280));var e=t.stateNode;e&&(e=yu(e),yd(t.stateNode,t.type,e))}}function JC(t){oi?ai?ai.push(t):ai=[t]:oi=t}function QC(){if(oi){var t=oi,e=ai;if(ai=oi=null,Nv(t),e)for(t=0;t<e.length;t++)Nv(e[t])}}function XC(t,e){return t(e)}function YC(){}var rp=!1;function ZC(t,e,n){if(rp)return t(e,n);rp=!0;try{return XC(t,e,n)}finally{rp=!1,(oi!==null||ai!==null)&&(YC(),QC())}}function Yo(t,e){var n=t.stateNode;if(n===null)return null;var r=yu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Sd=!1;if(pn)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){Sd=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{Sd=!1}function i1(t,e,n,r,i,o,a,s,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(l){this.onError(l)}}var Lo=!1,xc=null,Nc=!1,Cd=null,s1={onError:function(t){Lo=!0,xc=t}};function o1(t,e,n,r,i,o,a,s,c){Lo=!1,xc=null,i1.apply(s1,arguments)}function a1(t,e,n,r,i,o,a,s,c){if(o1.apply(this,arguments),Lo){if(Lo){var u=xc;Lo=!1,xc=null}else throw Error(M(198));Nc||(Nc=!0,Cd=u)}}function Nr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zv(t){if(Nr(t)!==t)throw Error(M(188))}function c1(t){var e=t.alternate;if(!e){if(e=Nr(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return zv(i),t;if(o===r)return zv(i),e;o=o.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function tP(t){return t=c1(t),t!==null?nP(t):null}function nP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nP(t);if(e!==null)return e;t=t.sibling}return null}var rP=lt.unstable_scheduleCallback,jv=lt.unstable_cancelCallback,u1=lt.unstable_shouldYield,l1=lt.unstable_requestPaint,fe=lt.unstable_now,p1=lt.unstable_getCurrentPriorityLevel,Dh=lt.unstable_ImmediatePriority,iP=lt.unstable_UserBlockingPriority,zc=lt.unstable_NormalPriority,d1=lt.unstable_LowPriority,sP=lt.unstable_IdlePriority,fu=null,Wt=null;function h1(t){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(fu,t,void 0,(t.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:g1,f1=Math.log,v1=Math.LN2;function g1(t){return t>>>=0,t===0?32:31-(f1(t)/v1|0)|0}var Qa=64,Xa=4194304;function Do(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Do(s):(o&=a,o!==0&&(r=Do(o)))}else a=n&~i,a!==0?r=Do(a):o!==0&&(r=Do(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xt(e),i=1<<n,r|=t[n],e&=~i;return r}function m1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-xt(o),s=1<<a,c=i[a];c===-1?(!(s&n)||s&r)&&(i[a]=m1(s,e)):c<=e&&(t.expiredLanes|=s),o&=~s}}function Pd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function oP(){var t=Qa;return Qa<<=1,!(Qa&4194240)&&(Qa=64),t}function ip(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xt(e),t[e]=n}function S1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Oh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Q=0;function aP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cP,xh,uP,lP,pP,Rd=!1,Ya=[],bn=null,Dn=null,On=null,Zo=new Map,ea=new Map,In=[],C1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lv(t,e){switch(t){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(e.pointerId)}}function Li(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=wa(e),e!==null&&xh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function P1(t,e,n,r,i){switch(e){case"focusin":return bn=Li(bn,t,e,n,r,i),!0;case"dragenter":return Dn=Li(Dn,t,e,n,r,i),!0;case"mouseover":return On=Li(On,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Zo.set(o,Li(Zo.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ea.set(o,Li(ea.get(o)||null,t,e,n,r,i)),!0}return!1}function dP(t){var e=Cr(t.target);if(e!==null){var n=Nr(e);if(n!==null){if(e=n.tag,e===13){if(e=eP(n),e!==null){t.blockedOn=e,pP(t.priority,function(){uP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);md=r,n.target.dispatchEvent(r),md=null}else return e=wa(n),e!==null&&xh(e),t.blockedOn=n,!1;e.shift()}return!0}function Bv(t,e,n){yc(t)&&n.delete(e)}function R1(){Rd=!1,bn!==null&&yc(bn)&&(bn=null),Dn!==null&&yc(Dn)&&(Dn=null),On!==null&&yc(On)&&(On=null),Zo.forEach(Bv),ea.forEach(Bv)}function Bi(t,e){t.blockedOn===e&&(t.blockedOn=null,Rd||(Rd=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,R1)))}function ta(t){function e(i){return Bi(i,t)}if(0<Ya.length){Bi(Ya[0],t);for(var n=1;n<Ya.length;n++){var r=Ya[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bn!==null&&Bi(bn,t),Dn!==null&&Bi(Dn,t),On!==null&&Bi(On,t),Zo.forEach(e),ea.forEach(e),n=0;n<In.length;n++)r=In[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<In.length&&(n=In[0],n.blockedOn===null);)dP(n),n.blockedOn===null&&In.shift()}var ci=gn.ReactCurrentBatchConfig,Lc=!0;function w1(t,e,n,r){var i=Q,o=ci.transition;ci.transition=null;try{Q=1,Nh(t,e,n,r)}finally{Q=i,ci.transition=o}}function E1(t,e,n,r){var i=Q,o=ci.transition;ci.transition=null;try{Q=4,Nh(t,e,n,r)}finally{Q=i,ci.transition=o}}function Nh(t,e,n,r){if(Lc){var i=wd(t,e,n,r);if(i===null)fp(t,e,r,Bc,n),Lv(t,r);else if(P1(i,t,e,n,r))r.stopPropagation();else if(Lv(t,r),e&4&&-1<C1.indexOf(t)){for(;i!==null;){var o=wa(i);if(o!==null&&cP(o),o=wd(t,e,n,r),o===null&&fp(t,e,r,Bc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else fp(t,e,r,null,n)}}var Bc=null;function wd(t,e,n,r){if(Bc=null,t=bh(r),t=Cr(t),t!==null)if(e=Nr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bc=t,null}function hP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p1()){case Dh:return 1;case iP:return 4;case zc:case d1:return 16;case sP:return 536870912;default:return 16}default:return 16}}var _n=null,zh=null,Sc=null;function fP(){if(Sc)return Sc;var t,e=zh,n=e.length,r,i="value"in _n?_n.value:_n.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return Sc=i.slice(t,1<r?1-r:void 0)}function Cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Za(){return!0}function Fv(){return!1}function ht(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Za:Fv,this.isPropagationStopped=Fv,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jh=ht(Ii),Ra=ae({},Ii,{view:0,detail:0}),T1=ht(Ra),sp,op,Fi,vu=ae({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fi&&(Fi&&t.type==="mousemove"?(sp=t.screenX-Fi.screenX,op=t.screenY-Fi.screenY):op=sp=0,Fi=t),sp)},movementY:function(t){return"movementY"in t?t.movementY:op}}),Vv=ht(vu),I1=ae({},vu,{dataTransfer:0}),A1=ht(I1),_1=ae({},Ra,{relatedTarget:0}),ap=ht(_1),M1=ae({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),k1=ht(M1),b1=ae({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),D1=ht(b1),O1=ae({},Ii,{data:0}),qv=ht(O1),x1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=z1[t])?!!e[t]:!1}function Lh(){return j1}var L1=ae({},Ra,{key:function(t){if(t.key){var e=x1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?N1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lh,charCode:function(t){return t.type==="keypress"?Cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),B1=ht(L1),F1=ae({},vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uv=ht(F1),V1=ae({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lh}),q1=ht(V1),U1=ae({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),$1=ht(U1),W1=ae({},vu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H1=ht(W1),K1=[9,13,27,32],Bh=pn&&"CompositionEvent"in window,Bo=null;pn&&"documentMode"in document&&(Bo=document.documentMode);var G1=pn&&"TextEvent"in window&&!Bo,vP=pn&&(!Bh||Bo&&8<Bo&&11>=Bo),$v=" ",Wv=!1;function gP(t,e){switch(t){case"keyup":return K1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $r=!1;function J1(t,e){switch(t){case"compositionend":return mP(e);case"keypress":return e.which!==32?null:(Wv=!0,$v);case"textInput":return t=e.data,t===$v&&Wv?null:t;default:return null}}function Q1(t,e){if($r)return t==="compositionend"||!Bh&&gP(t,e)?(t=fP(),Sc=zh=_n=null,$r=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vP&&e.locale!=="ko"?null:e.data;default:return null}}var X1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!X1[t.type]:e==="textarea"}function yP(t,e,n,r){JC(r),e=Fc(e,"onChange"),0<e.length&&(n=new jh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fo=null,na=null;function Y1(t){MP(t,0)}function gu(t){var e=Kr(t);if(qC(e))return t}function Z1(t,e){if(t==="change")return e}var SP=!1;if(pn){var cp;if(pn){var up="oninput"in document;if(!up){var Kv=document.createElement("div");Kv.setAttribute("oninput","return;"),up=typeof Kv.oninput=="function"}cp=up}else cp=!1;SP=cp&&(!document.documentMode||9<document.documentMode)}function Gv(){Fo&&(Fo.detachEvent("onpropertychange",CP),na=Fo=null)}function CP(t){if(t.propertyName==="value"&&gu(na)){var e=[];yP(e,na,t,bh(t)),ZC(Y1,e)}}function eI(t,e,n){t==="focusin"?(Gv(),Fo=e,na=n,Fo.attachEvent("onpropertychange",CP)):t==="focusout"&&Gv()}function tI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gu(na)}function nI(t,e){if(t==="click")return gu(e)}function rI(t,e){if(t==="input"||t==="change")return gu(e)}function iI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zt=typeof Object.is=="function"?Object.is:iI;function ra(t,e){if(zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!sd.call(e,i)||!zt(t[i],e[i]))return!1}return!0}function Jv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qv(t,e){var n=Jv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jv(n)}}function PP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?PP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RP(){for(var t=window,e=Oc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oc(t.document)}return e}function Fh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sI(t){var e=RP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&PP(n.ownerDocument.documentElement,n)){if(r!==null&&Fh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Qv(n,o);var a=Qv(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oI=pn&&"documentMode"in document&&11>=document.documentMode,Wr=null,Ed=null,Vo=null,Td=!1;function Xv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Td||Wr==null||Wr!==Oc(r)||(r=Wr,"selectionStart"in r&&Fh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vo&&ra(Vo,r)||(Vo=r,r=Fc(Ed,"onSelect"),0<r.length&&(e=new jh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wr)))}function ec(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hr={animationend:ec("Animation","AnimationEnd"),animationiteration:ec("Animation","AnimationIteration"),animationstart:ec("Animation","AnimationStart"),transitionend:ec("Transition","TransitionEnd")},lp={},wP={};pn&&(wP=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function mu(t){if(lp[t])return lp[t];if(!Hr[t])return t;var e=Hr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wP)return lp[t]=e[n];return t}var EP=mu("animationend"),TP=mu("animationiteration"),IP=mu("animationstart"),AP=mu("transitionend"),_P=new Map,Yv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wn(t,e){_P.set(t,e),xr(e,[t])}for(var pp=0;pp<Yv.length;pp++){var dp=Yv[pp],aI=dp.toLowerCase(),cI=dp[0].toUpperCase()+dp.slice(1);Wn(aI,"on"+cI)}Wn(EP,"onAnimationEnd");Wn(TP,"onAnimationIteration");Wn(IP,"onAnimationStart");Wn("dblclick","onDoubleClick");Wn("focusin","onFocus");Wn("focusout","onBlur");Wn(AP,"onTransitionEnd");pi("onMouseEnter",["mouseout","mouseover"]);pi("onMouseLeave",["mouseout","mouseover"]);pi("onPointerEnter",["pointerout","pointerover"]);pi("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oo));function Zv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,a1(r,e,void 0,t),t.currentTarget=null}function MP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;Zv(i,s,u),o=c}else for(a=0;a<r.length;a++){if(s=r[a],c=s.instance,u=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;Zv(i,s,u),o=c}}}if(Nc)throw t=Cd,Nc=!1,Cd=null,t}function ee(t,e){var n=e[kd];n===void 0&&(n=e[kd]=new Set);var r=t+"__bubble";n.has(r)||(kP(e,t,2,!1),n.add(r))}function hp(t,e,n){var r=0;e&&(r|=4),kP(n,t,r,e)}var tc="_reactListening"+Math.random().toString(36).slice(2);function ia(t){if(!t[tc]){t[tc]=!0,jC.forEach(function(n){n!=="selectionchange"&&(uI.has(n)||hp(n,!1,t),hp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tc]||(e[tc]=!0,hp("selectionchange",!1,e))}}function kP(t,e,n,r){switch(hP(e)){case 1:var i=w1;break;case 4:i=E1;break;default:i=Nh}n=i.bind(null,e,n,t),i=void 0,!Sd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fp(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Cr(s),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}s=s.parentNode}}r=r.return}ZC(function(){var u=o,l=bh(n),p=[];e:{var d=_P.get(t);if(d!==void 0){var h=jh,f=t;switch(t){case"keypress":if(Cc(n)===0)break e;case"keydown":case"keyup":h=B1;break;case"focusin":f="focus",h=ap;break;case"focusout":f="blur",h=ap;break;case"beforeblur":case"afterblur":h=ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Vv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=A1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=q1;break;case EP:case TP:case IP:h=k1;break;case AP:h=$1;break;case"scroll":h=T1;break;case"wheel":h=H1;break;case"copy":case"cut":case"paste":h=D1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Uv}var m=(e&4)!==0,S=!m&&t==="scroll",v=m?d!==null?d+"Capture":null:d;m=[];for(var g=u,y;g!==null;){y=g;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,v!==null&&(C=Yo(g,v),C!=null&&m.push(sa(g,C,y)))),S)break;g=g.return}0<m.length&&(d=new h(d,f,null,n,l),p.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==md&&(f=n.relatedTarget||n.fromElement)&&(Cr(f)||f[dn]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(f=n.relatedTarget||n.toElement,h=u,f=f?Cr(f):null,f!==null&&(S=Nr(f),f!==S||f.tag!==5&&f.tag!==6)&&(f=null)):(h=null,f=u),h!==f)){if(m=Vv,C="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(m=Uv,C="onPointerLeave",v="onPointerEnter",g="pointer"),S=h==null?d:Kr(h),y=f==null?d:Kr(f),d=new m(C,g+"leave",h,n,l),d.target=S,d.relatedTarget=y,C=null,Cr(l)===u&&(m=new m(v,g+"enter",f,n,l),m.target=y,m.relatedTarget=S,C=m),S=C,h&&f)t:{for(m=h,v=f,g=0,y=m;y;y=Br(y))g++;for(y=0,C=v;C;C=Br(C))y++;for(;0<g-y;)m=Br(m),g--;for(;0<y-g;)v=Br(v),y--;for(;g--;){if(m===v||v!==null&&m===v.alternate)break t;m=Br(m),v=Br(v)}m=null}else m=null;h!==null&&eg(p,d,h,m,!1),f!==null&&S!==null&&eg(p,S,f,m,!0)}}e:{if(d=u?Kr(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var P=Z1;else if(Hv(d))if(SP)P=rI;else{P=tI;var w=eI}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=nI);if(P&&(P=P(t,u))){yP(p,P,n,l);break e}w&&w(t,d,u),t==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&dd(d,"number",d.value)}switch(w=u?Kr(u):window,t){case"focusin":(Hv(w)||w.contentEditable==="true")&&(Wr=w,Ed=u,Vo=null);break;case"focusout":Vo=Ed=Wr=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Xv(p,n,l);break;case"selectionchange":if(oI)break;case"keydown":case"keyup":Xv(p,n,l)}var I;if(Bh)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else $r?gP(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(vP&&n.locale!=="ko"&&($r||R!=="onCompositionStart"?R==="onCompositionEnd"&&$r&&(I=fP()):(_n=l,zh="value"in _n?_n.value:_n.textContent,$r=!0)),w=Fc(u,R),0<w.length&&(R=new qv(R,t,null,n,l),p.push({event:R,listeners:w}),I?R.data=I:(I=mP(n),I!==null&&(R.data=I)))),(I=G1?J1(t,n):Q1(t,n))&&(u=Fc(u,"onBeforeInput"),0<u.length&&(l=new qv("onBeforeInput","beforeinput",null,n,l),p.push({event:l,listeners:u}),l.data=I))}MP(p,e)})}function sa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Yo(t,n),o!=null&&r.unshift(sa(t,o,i)),o=Yo(t,e),o!=null&&r.push(sa(t,o,i))),t=t.return}return r}function Br(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function eg(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,c=s.alternate,u=s.stateNode;if(c!==null&&c===r)break;s.tag===5&&u!==null&&(s=u,i?(c=Yo(n,o),c!=null&&a.unshift(sa(n,c,s))):i||(c=Yo(n,o),c!=null&&a.push(sa(n,c,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var lI=/\r\n?/g,pI=/\u0000|\uFFFD/g;function tg(t){return(typeof t=="string"?t:""+t).replace(lI,`
`).replace(pI,"")}function nc(t,e,n){if(e=tg(e),tg(t)!==e&&n)throw Error(M(425))}function Vc(){}var Id=null,Ad=null;function _d(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Md=typeof setTimeout=="function"?setTimeout:void 0,dI=typeof clearTimeout=="function"?clearTimeout:void 0,ng=typeof Promise=="function"?Promise:void 0,hI=typeof queueMicrotask=="function"?queueMicrotask:typeof ng<"u"?function(t){return ng.resolve(null).then(t).catch(fI)}:Md;function fI(t){setTimeout(function(){throw t})}function vp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ta(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ta(e)}function xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),qt="__reactFiber$"+Ai,oa="__reactProps$"+Ai,dn="__reactContainer$"+Ai,kd="__reactEvents$"+Ai,vI="__reactListeners$"+Ai,gI="__reactHandles$"+Ai;function Cr(t){var e=t[qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dn]||n[qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rg(t);t!==null;){if(n=t[qt])return n;t=rg(t)}return e}t=n,n=t.parentNode}return null}function wa(t){return t=t[qt]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function yu(t){return t[oa]||null}var bd=[],Gr=-1;function Hn(t){return{current:t}}function te(t){0>Gr||(t.current=bd[Gr],bd[Gr]=null,Gr--)}function Z(t,e){Gr++,bd[Gr]=t.current,t.current=e}var Vn={},He=Hn(Vn),rt=Hn(!1),Ar=Vn;function di(t,e){var n=t.type.contextTypes;if(!n)return Vn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function it(t){return t=t.childContextTypes,t!=null}function qc(){te(rt),te(He)}function ig(t,e,n){if(He.current!==Vn)throw Error(M(168));Z(He,e),Z(rt,n)}function bP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,e1(t)||"Unknown",i));return ae({},n,r)}function Uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vn,Ar=He.current,Z(He,t),Z(rt,rt.current),!0}function sg(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=bP(t,e,Ar),r.__reactInternalMemoizedMergedChildContext=t,te(rt),te(He),Z(He,t)):te(rt),Z(rt,n)}var en=null,Su=!1,gp=!1;function DP(t){en===null?en=[t]:en.push(t)}function mI(t){Su=!0,DP(t)}function Kn(){if(!gp&&en!==null){gp=!0;var t=0,e=Q;try{var n=en;for(Q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}en=null,Su=!1}catch(i){throw en!==null&&(en=en.slice(t+1)),rP(Dh,Kn),i}finally{Q=e,gp=!1}}return null}var Jr=[],Qr=0,$c=null,Wc=0,St=[],Ct=0,_r=null,tn=1,nn="";function gr(t,e){Jr[Qr++]=Wc,Jr[Qr++]=$c,$c=t,Wc=e}function OP(t,e,n){St[Ct++]=tn,St[Ct++]=nn,St[Ct++]=_r,_r=t;var r=tn;t=nn;var i=32-xt(r)-1;r&=~(1<<i),n+=1;var o=32-xt(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,tn=1<<32-xt(e)+i|n<<i|r,nn=o+t}else tn=1<<o|n<<i|r,nn=t}function Vh(t){t.return!==null&&(gr(t,1),OP(t,1,0))}function qh(t){for(;t===$c;)$c=Jr[--Qr],Jr[Qr]=null,Wc=Jr[--Qr],Jr[Qr]=null;for(;t===_r;)_r=St[--Ct],St[Ct]=null,nn=St[--Ct],St[Ct]=null,tn=St[--Ct],St[Ct]=null}var ut=null,ct=null,ne=!1,Dt=null;function xP(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function og(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ut=t,ct=xn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ut=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_r!==null?{id:tn,overflow:nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ut=t,ct=null,!0):!1;default:return!1}}function Dd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Od(t){if(ne){var e=ct;if(e){var n=e;if(!og(t,e)){if(Dd(t))throw Error(M(418));e=xn(n.nextSibling);var r=ut;e&&og(t,e)?xP(r,n):(t.flags=t.flags&-4097|2,ne=!1,ut=t)}}else{if(Dd(t))throw Error(M(418));t.flags=t.flags&-4097|2,ne=!1,ut=t}}}function ag(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ut=t}function rc(t){if(t!==ut)return!1;if(!ne)return ag(t),ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_d(t.type,t.memoizedProps)),e&&(e=ct)){if(Dd(t))throw NP(),Error(M(418));for(;e;)xP(t,e),e=xn(e.nextSibling)}if(ag(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ct=xn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=ut?xn(t.stateNode.nextSibling):null;return!0}function NP(){for(var t=ct;t;)t=xn(t.nextSibling)}function hi(){ct=ut=null,ne=!1}function Uh(t){Dt===null?Dt=[t]:Dt.push(t)}var yI=gn.ReactCurrentBatchConfig;function Vi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function ic(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cg(t){var e=t._init;return e(t._payload)}function zP(t){function e(v,g){if(t){var y=v.deletions;y===null?(v.deletions=[g],v.flags|=16):y.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function r(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=Ln(v,g),v.index=0,v.sibling=null,v}function o(v,g,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<g?(v.flags|=2,g):y):(v.flags|=2,g)):(v.flags|=1048576,g)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function s(v,g,y,C){return g===null||g.tag!==6?(g=wp(y,v.mode,C),g.return=v,g):(g=i(g,y),g.return=v,g)}function c(v,g,y,C){var P=y.type;return P===Ur?l(v,g,y.props.children,C,y.key):g!==null&&(g.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Rn&&cg(P)===g.type)?(C=i(g,y.props),C.ref=Vi(v,g,y),C.return=v,C):(C=Ac(y.type,y.key,y.props,null,v.mode,C),C.ref=Vi(v,g,y),C.return=v,C)}function u(v,g,y,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Ep(y,v.mode,C),g.return=v,g):(g=i(g,y.children||[]),g.return=v,g)}function l(v,g,y,C,P){return g===null||g.tag!==7?(g=Tr(y,v.mode,C,P),g.return=v,g):(g=i(g,y),g.return=v,g)}function p(v,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=wp(""+g,v.mode,y),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ka:return y=Ac(g.type,g.key,g.props,null,v.mode,y),y.ref=Vi(v,null,g),y.return=v,y;case qr:return g=Ep(g,v.mode,y),g.return=v,g;case Rn:var C=g._init;return p(v,C(g._payload),y)}if(bo(g)||zi(g))return g=Tr(g,v.mode,y,null),g.return=v,g;ic(v,g)}return null}function d(v,g,y,C){var P=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return P!==null?null:s(v,g,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ka:return y.key===P?c(v,g,y,C):null;case qr:return y.key===P?u(v,g,y,C):null;case Rn:return P=y._init,d(v,g,P(y._payload),C)}if(bo(y)||zi(y))return P!==null?null:l(v,g,y,C,null);ic(v,y)}return null}function h(v,g,y,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(y)||null,s(g,v,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ka:return v=v.get(C.key===null?y:C.key)||null,c(g,v,C,P);case qr:return v=v.get(C.key===null?y:C.key)||null,u(g,v,C,P);case Rn:var w=C._init;return h(v,g,y,w(C._payload),P)}if(bo(C)||zi(C))return v=v.get(y)||null,l(g,v,C,P,null);ic(g,C)}return null}function f(v,g,y,C){for(var P=null,w=null,I=g,R=g=0,A=null;I!==null&&R<y.length;R++){I.index>R?(A=I,I=null):A=I.sibling;var O=d(v,I,y[R],C);if(O===null){I===null&&(I=A);break}t&&I&&O.alternate===null&&e(v,I),g=o(O,g,R),w===null?P=O:w.sibling=O,w=O,I=A}if(R===y.length)return n(v,I),ne&&gr(v,R),P;if(I===null){for(;R<y.length;R++)I=p(v,y[R],C),I!==null&&(g=o(I,g,R),w===null?P=I:w.sibling=I,w=I);return ne&&gr(v,R),P}for(I=r(v,I);R<y.length;R++)A=h(I,v,R,y[R],C),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?R:A.key),g=o(A,g,R),w===null?P=A:w.sibling=A,w=A);return t&&I.forEach(function(F){return e(v,F)}),ne&&gr(v,R),P}function m(v,g,y,C){var P=zi(y);if(typeof P!="function")throw Error(M(150));if(y=P.call(y),y==null)throw Error(M(151));for(var w=P=null,I=g,R=g=0,A=null,O=y.next();I!==null&&!O.done;R++,O=y.next()){I.index>R?(A=I,I=null):A=I.sibling;var F=d(v,I,O.value,C);if(F===null){I===null&&(I=A);break}t&&I&&F.alternate===null&&e(v,I),g=o(F,g,R),w===null?P=F:w.sibling=F,w=F,I=A}if(O.done)return n(v,I),ne&&gr(v,R),P;if(I===null){for(;!O.done;R++,O=y.next())O=p(v,O.value,C),O!==null&&(g=o(O,g,R),w===null?P=O:w.sibling=O,w=O);return ne&&gr(v,R),P}for(I=r(v,I);!O.done;R++,O=y.next())O=h(I,v,R,O.value,C),O!==null&&(t&&O.alternate!==null&&I.delete(O.key===null?R:O.key),g=o(O,g,R),w===null?P=O:w.sibling=O,w=O);return t&&I.forEach(function(J){return e(v,J)}),ne&&gr(v,R),P}function S(v,g,y,C){if(typeof y=="object"&&y!==null&&y.type===Ur&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ka:e:{for(var P=y.key,w=g;w!==null;){if(w.key===P){if(P=y.type,P===Ur){if(w.tag===7){n(v,w.sibling),g=i(w,y.props.children),g.return=v,v=g;break e}}else if(w.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Rn&&cg(P)===w.type){n(v,w.sibling),g=i(w,y.props),g.ref=Vi(v,w,y),g.return=v,v=g;break e}n(v,w);break}else e(v,w);w=w.sibling}y.type===Ur?(g=Tr(y.props.children,v.mode,C,y.key),g.return=v,v=g):(C=Ac(y.type,y.key,y.props,null,v.mode,C),C.ref=Vi(v,g,y),C.return=v,v=C)}return a(v);case qr:e:{for(w=y.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(v,g.sibling),g=i(g,y.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=Ep(y,v.mode,C),g.return=v,v=g}return a(v);case Rn:return w=y._init,S(v,g,w(y._payload),C)}if(bo(y))return f(v,g,y,C);if(zi(y))return m(v,g,y,C);ic(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(v,g.sibling),g=i(g,y),g.return=v,v=g):(n(v,g),g=wp(y,v.mode,C),g.return=v,v=g),a(v)):n(v,g)}return S}var fi=zP(!0),jP=zP(!1),Hc=Hn(null),Kc=null,Xr=null,$h=null;function Wh(){$h=Xr=Kc=null}function Hh(t){var e=Hc.current;te(Hc),t._currentValue=e}function xd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ui(t,e){Kc=t,$h=Xr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nt=!0),t.firstContext=null)}function wt(t){var e=t._currentValue;if($h!==t)if(t={context:t,memoizedValue:e,next:null},Xr===null){if(Kc===null)throw Error(M(308));Xr=t,Kc.dependencies={lanes:0,firstContext:t}}else Xr=Xr.next=t;return e}var Pr=null;function Kh(t){Pr===null?Pr=[t]:Pr.push(t)}function LP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Kh(e)):(n.next=i.next,i.next=n),e.interleaved=n,hn(t,r)}function hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wn=!1;function Gh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function sn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,K&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,hn(t,n)}return i=r.interleaved,i===null?(e.next=e,Kh(r)):(e.next=i.next,i.next=e),r.interleaved=e,hn(t,n)}function Pc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Oh(t,n)}}function ug(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gc(t,e,n,r){var i=t.updateQueue;wn=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var l=t.alternate;l!==null&&(l=l.updateQueue,s=l.lastBaseUpdate,s!==a&&(s===null?l.firstBaseUpdate=u:s.next=u,l.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;a=0,l=u=c=null,s=o;do{var d=s.lane,h=s.eventTime;if((r&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=t,m=s;switch(d=e,h=n,m.tag){case 1:if(f=m.payload,typeof f=="function"){p=f.call(h,p,d);break e}p=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,d=typeof f=="function"?f.call(h,p,d):f,d==null)break e;p=ae({},p,d);break e;case 2:wn=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},l===null?(u=l=h,c=p):l=l.next=h,a|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(l===null&&(c=p),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);kr|=a,t.lanes=a,t.memoizedState=p}}function lg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var Ea={},Ht=Hn(Ea),aa=Hn(Ea),ca=Hn(Ea);function Rr(t){if(t===Ea)throw Error(M(174));return t}function Jh(t,e){switch(Z(ca,e),Z(aa,t),Z(Ht,Ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fd(e,t)}te(Ht),Z(Ht,e)}function vi(){te(Ht),te(aa),te(ca)}function FP(t){Rr(ca.current);var e=Rr(Ht.current),n=fd(e,t.type);e!==n&&(Z(aa,t),Z(Ht,n))}function Qh(t){aa.current===t&&(te(Ht),te(aa))}var ie=Hn(0);function Jc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mp=[];function Xh(){for(var t=0;t<mp.length;t++)mp[t]._workInProgressVersionPrimary=null;mp.length=0}var Rc=gn.ReactCurrentDispatcher,yp=gn.ReactCurrentBatchConfig,Mr=0,oe=null,me=null,Ce=null,Qc=!1,qo=!1,ua=0,SI=0;function xe(){throw Error(M(321))}function Yh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zt(t[n],e[n]))return!1;return!0}function Zh(t,e,n,r,i,o){if(Mr=o,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rc.current=t===null||t.memoizedState===null?wI:EI,t=n(r,i),qo){o=0;do{if(qo=!1,ua=0,25<=o)throw Error(M(301));o+=1,Ce=me=null,e.updateQueue=null,Rc.current=TI,t=n(r,i)}while(qo)}if(Rc.current=Xc,e=me!==null&&me.next!==null,Mr=0,Ce=me=oe=null,Qc=!1,e)throw Error(M(300));return t}function ef(){var t=ua!==0;return ua=0,t}function Vt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?oe.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function Et(){if(me===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=me.next;var e=Ce===null?oe.memoizedState:Ce.next;if(e!==null)Ce=e,me=t;else{if(t===null)throw Error(M(310));me=t,t={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},Ce===null?oe.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function la(t,e){return typeof e=="function"?e(t):e}function Sp(t){var e=Et(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=me,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,c=null,u=o;do{var l=u.lane;if((Mr&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(s=c=p,a=r):c=c.next=p,oe.lanes|=l,kr|=l}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=s,zt(r,e.memoizedState)||(nt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,oe.lanes|=o,kr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cp(t){var e=Et(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);zt(o,e.memoizedState)||(nt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function VP(){}function qP(t,e){var n=oe,r=Et(),i=e(),o=!zt(r.memoizedState,i);if(o&&(r.memoizedState=i,nt=!0),r=r.queue,tf(WP.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,pa(9,$P.bind(null,n,r,i,e),void 0,null),Pe===null)throw Error(M(349));Mr&30||UP(n,e,i)}return i}function UP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $P(t,e,n,r){e.value=n,e.getSnapshot=r,HP(e)&&KP(t)}function WP(t,e,n){return n(function(){HP(e)&&KP(t)})}function HP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zt(t,n)}catch{return!0}}function KP(t){var e=hn(t,1);e!==null&&Nt(e,t,1,-1)}function pg(t){var e=Vt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},e.queue=t,t=t.dispatch=RI.bind(null,oe,t),[e.memoizedState,t]}function pa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function GP(){return Et().memoizedState}function wc(t,e,n,r){var i=Vt();oe.flags|=t,i.memoizedState=pa(1|e,n,void 0,r===void 0?null:r)}function Cu(t,e,n,r){var i=Et();r=r===void 0?null:r;var o=void 0;if(me!==null){var a=me.memoizedState;if(o=a.destroy,r!==null&&Yh(r,a.deps)){i.memoizedState=pa(e,n,o,r);return}}oe.flags|=t,i.memoizedState=pa(1|e,n,o,r)}function dg(t,e){return wc(8390656,8,t,e)}function tf(t,e){return Cu(2048,8,t,e)}function JP(t,e){return Cu(4,2,t,e)}function QP(t,e){return Cu(4,4,t,e)}function XP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YP(t,e,n){return n=n!=null?n.concat([t]):null,Cu(4,4,XP.bind(null,e,t),n)}function nf(){}function ZP(t,e){var n=Et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function eR(t,e){var n=Et();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function tR(t,e,n){return Mr&21?(zt(n,e)||(n=oP(),oe.lanes|=n,kr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nt=!0),t.memoizedState=n)}function CI(t,e){var n=Q;Q=n!==0&&4>n?n:4,t(!0);var r=yp.transition;yp.transition={};try{t(!1),e()}finally{Q=n,yp.transition=r}}function nR(){return Et().memoizedState}function PI(t,e,n){var r=jn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rR(t))iR(e,n);else if(n=LP(t,e,n,r),n!==null){var i=Qe();Nt(n,t,r,i),sR(n,e,r)}}function RI(t,e,n){var r=jn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rR(t))iR(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,zt(s,a)){var c=e.interleaved;c===null?(i.next=i,Kh(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=LP(t,e,i,r),n!==null&&(i=Qe(),Nt(n,t,r,i),sR(n,e,r))}}function rR(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function iR(t,e){qo=Qc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Oh(t,n)}}var Xc={readContext:wt,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},wI={readContext:wt,useCallback:function(t,e){return Vt().memoizedState=[t,e===void 0?null:e],t},useContext:wt,useEffect:dg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wc(4194308,4,XP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wc(4194308,4,t,e)},useInsertionEffect:function(t,e){return wc(4,2,t,e)},useMemo:function(t,e){var n=Vt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=PI.bind(null,oe,t),[r.memoizedState,t]},useRef:function(t){var e=Vt();return t={current:t},e.memoizedState=t},useState:pg,useDebugValue:nf,useDeferredValue:function(t){return Vt().memoizedState=t},useTransition:function(){var t=pg(!1),e=t[0];return t=CI.bind(null,t[1]),Vt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=oe,i=Vt();if(ne){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),Pe===null)throw Error(M(349));Mr&30||UP(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,dg(WP.bind(null,r,o,t),[t]),r.flags|=2048,pa(9,$P.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Vt(),e=Pe.identifierPrefix;if(ne){var n=nn,r=tn;n=(r&~(1<<32-xt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ua++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EI={readContext:wt,useCallback:ZP,useContext:wt,useEffect:tf,useImperativeHandle:YP,useInsertionEffect:JP,useLayoutEffect:QP,useMemo:eR,useReducer:Sp,useRef:GP,useState:function(){return Sp(la)},useDebugValue:nf,useDeferredValue:function(t){var e=Et();return tR(e,me.memoizedState,t)},useTransition:function(){var t=Sp(la)[0],e=Et().memoizedState;return[t,e]},useMutableSource:VP,useSyncExternalStore:qP,useId:nR,unstable_isNewReconciler:!1},TI={readContext:wt,useCallback:ZP,useContext:wt,useEffect:tf,useImperativeHandle:YP,useInsertionEffect:JP,useLayoutEffect:QP,useMemo:eR,useReducer:Cp,useRef:GP,useState:function(){return Cp(la)},useDebugValue:nf,useDeferredValue:function(t){var e=Et();return me===null?e.memoizedState=t:tR(e,me.memoizedState,t)},useTransition:function(){var t=Cp(la)[0],e=Et().memoizedState;return[t,e]},useMutableSource:VP,useSyncExternalStore:qP,useId:nR,unstable_isNewReconciler:!1};function kt(t,e){if(t&&t.defaultProps){e=ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pu={isMounted:function(t){return(t=t._reactInternals)?Nr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qe(),i=jn(t),o=sn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Nn(t,o,i),e!==null&&(Nt(e,t,i,r),Pc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qe(),i=jn(t),o=sn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Nn(t,o,i),e!==null&&(Nt(e,t,i,r),Pc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qe(),r=jn(t),i=sn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Nn(t,i,r),e!==null&&(Nt(e,t,r,n),Pc(e,t,r))}};function hg(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!ra(n,r)||!ra(i,o):!0}function oR(t,e,n){var r=!1,i=Vn,o=e.contextType;return typeof o=="object"&&o!==null?o=wt(o):(i=it(e)?Ar:He.current,r=e.contextTypes,o=(r=r!=null)?di(t,i):Vn),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function fg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pu.enqueueReplaceState(e,e.state,null)}function zd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Gh(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=wt(o):(o=it(e)?Ar:He.current,i.context=di(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Nd(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Pu.enqueueReplaceState(i,i.state,null),Gc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function gi(t,e){try{var n="",r=e;do n+=ZT(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Pp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var II=typeof WeakMap=="function"?WeakMap:Map;function aR(t,e,n){n=sn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zc||(Zc=!0,Kd=r),jd(t,e)},n}function cR(t,e,n){n=sn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){jd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){jd(t,e),typeof r!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function vg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new II;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=FI.bind(null,t,e,n),e.then(t,t))}function gg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=sn(-1,1),e.tag=2,Nn(n,e,1))),n.lanes|=1),t)}var AI=gn.ReactCurrentOwner,nt=!1;function Je(t,e,n,r){e.child=t===null?jP(e,null,n,r):fi(e,t.child,n,r)}function yg(t,e,n,r,i){n=n.render;var o=e.ref;return ui(e,i),r=Zh(t,e,n,r,o,i),n=ef(),t!==null&&!nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fn(t,e,i)):(ne&&n&&Vh(e),e.flags|=1,Je(t,e,r,i),e.child)}function Sg(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!pf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,uR(t,e,o,r,i)):(t=Ac(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:ra,n(a,r)&&t.ref===e.ref)return fn(t,e,i)}return e.flags|=1,t=Ln(o,r),t.ref=e.ref,t.return=e,e.child=t}function uR(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ra(o,r)&&t.ref===e.ref)if(nt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(nt=!0);else return e.lanes=t.lanes,fn(t,e,i)}return Ld(t,e,n,r,i)}function lR(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z(Zr,at),at|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Z(Zr,at),at|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Z(Zr,at),at|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Z(Zr,at),at|=r;return Je(t,e,i,n),e.child}function pR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ld(t,e,n,r,i){var o=it(n)?Ar:He.current;return o=di(e,o),ui(e,i),n=Zh(t,e,n,r,o,i),r=ef(),t!==null&&!nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fn(t,e,i)):(ne&&r&&Vh(e),e.flags|=1,Je(t,e,n,i),e.child)}function Cg(t,e,n,r,i){if(it(n)){var o=!0;Uc(e)}else o=!1;if(ui(e,i),e.stateNode===null)Ec(t,e),oR(e,n,r),zd(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=wt(u):(u=it(n)?Ar:He.current,u=di(e,u));var l=n.getDerivedStateFromProps,p=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||c!==u)&&fg(e,a,r,u),wn=!1;var d=e.memoizedState;a.state=d,Gc(e,r,a,i),c=e.memoizedState,s!==r||d!==c||rt.current||wn?(typeof l=="function"&&(Nd(e,n,l,r),c=e.memoizedState),(s=wn||hg(e,n,s,r,d,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,BP(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:kt(e.type,s),a.props=u,p=e.pendingProps,d=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=wt(c):(c=it(n)?Ar:He.current,c=di(e,c));var h=n.getDerivedStateFromProps;(l=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==p||d!==c)&&fg(e,a,r,c),wn=!1,d=e.memoizedState,a.state=d,Gc(e,r,a,i);var f=e.memoizedState;s!==p||d!==f||rt.current||wn?(typeof h=="function"&&(Nd(e,n,h,r),f=e.memoizedState),(u=wn||hg(e,n,u,r,d,f,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,f,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,f,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Bd(t,e,n,r,o,i)}function Bd(t,e,n,r,i,o){pR(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&sg(e,n,!1),fn(t,e,o);r=e.stateNode,AI.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=fi(e,t.child,null,o),e.child=fi(e,null,s,o)):Je(t,e,s,o),e.memoizedState=r.state,i&&sg(e,n,!0),e.child}function dR(t){var e=t.stateNode;e.pendingContext?ig(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ig(t,e.context,!1),Jh(t,e.containerInfo)}function Pg(t,e,n,r,i){return hi(),Uh(i),e.flags|=256,Je(t,e,n,r),e.child}var Fd={dehydrated:null,treeContext:null,retryLane:0};function Vd(t){return{baseLanes:t,cachePool:null,transitions:null}}function hR(t,e,n){var r=e.pendingProps,i=ie.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Z(ie,i&1),t===null)return Od(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Eu(a,r,0,null),t=Tr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Vd(n),e.memoizedState=Fd,t):rf(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return _I(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ln(i,c),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Ln(s,o):(o=Tr(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?Vd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Fd,r}return o=t.child,t=o.sibling,r=Ln(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rf(t,e){return e=Eu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sc(t,e,n,r){return r!==null&&Uh(r),fi(e,t.child,null,n),t=rf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _I(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=Pp(Error(M(422))),sc(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Eu({mode:"visible",children:r.children},i,0,null),o=Tr(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&fi(e,t.child,null,a),e.child.memoizedState=Vd(a),e.memoizedState=Fd,o);if(!(e.mode&1))return sc(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(M(419)),r=Pp(o,r,void 0),sc(t,e,a,r)}if(s=(a&t.childLanes)!==0,nt||s){if(r=Pe,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,hn(t,i),Nt(r,t,i,-1))}return lf(),r=Pp(Error(M(421))),sc(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=VI.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ct=xn(i.nextSibling),ut=e,ne=!0,Dt=null,t!==null&&(St[Ct++]=tn,St[Ct++]=nn,St[Ct++]=_r,tn=t.id,nn=t.overflow,_r=e),e=rf(e,r.children),e.flags|=4096,e)}function Rg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xd(t.return,e,n)}function Rp(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function fR(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Je(t,e,r.children,n),r=ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rg(t,n,e);else if(t.tag===19)Rg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Z(ie,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Jc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Rp(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Jc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Rp(e,!0,n,null,o);break;case"together":Rp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ec(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),kr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Ln(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ln(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MI(t,e,n){switch(e.tag){case 3:dR(e),hi();break;case 5:FP(e);break;case 1:it(e.type)&&Uc(e);break;case 4:Jh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Z(Hc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Z(ie,ie.current&1),e.flags|=128,null):n&e.child.childLanes?hR(t,e,n):(Z(ie,ie.current&1),t=fn(t,e,n),t!==null?t.sibling:null);Z(ie,ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Z(ie,ie.current),r)break;return null;case 22:case 23:return e.lanes=0,lR(t,e,n)}return fn(t,e,n)}var vR,qd,gR,mR;vR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qd=function(){};gR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Rr(Ht.current);var o=null;switch(n){case"input":i=ld(t,i),r=ld(t,r),o=[];break;case"select":i=ae({},i,{value:void 0}),r=ae({},r,{value:void 0}),o=[];break;case"textarea":i=hd(t,i),r=hd(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vc)}vd(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qo.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==s&&(c!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ee("scroll",t),o||s===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};mR=function(t,e,n,r){n!==r&&(e.flags|=4)};function qi(t,e){if(!ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ne(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kI(t,e,n){var r=e.pendingProps;switch(qh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(e),null;case 1:return it(e.type)&&qc(),Ne(e),null;case 3:return r=e.stateNode,vi(),te(rt),te(He),Xh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(rc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dt!==null&&(Qd(Dt),Dt=null))),qd(t,e),Ne(e),null;case 5:Qh(e);var i=Rr(ca.current);if(n=e.type,t!==null&&e.stateNode!=null)gR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ne(e),null}if(t=Rr(Ht.current),rc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[qt]=e,r[oa]=o,t=(e.mode&1)!==0,n){case"dialog":ee("cancel",r),ee("close",r);break;case"iframe":case"object":case"embed":ee("load",r);break;case"video":case"audio":for(i=0;i<Oo.length;i++)ee(Oo[i],r);break;case"source":ee("error",r);break;case"img":case"image":case"link":ee("error",r),ee("load",r);break;case"details":ee("toggle",r);break;case"input":bv(r,o),ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ee("invalid",r);break;case"textarea":Ov(r,o),ee("invalid",r)}vd(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&nc(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&nc(r.textContent,s,t),i=["children",""+s]):Qo.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&ee("scroll",r)}switch(n){case"input":Ga(r),Dv(r,o,!0);break;case"textarea":Ga(r),xv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Vc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=WC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[qt]=e,t[oa]=r,vR(t,e,!1,!1),e.stateNode=t;e:{switch(a=gd(n,r),n){case"dialog":ee("cancel",t),ee("close",t),i=r;break;case"iframe":case"object":case"embed":ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<Oo.length;i++)ee(Oo[i],t);i=r;break;case"source":ee("error",t),i=r;break;case"img":case"image":case"link":ee("error",t),ee("load",t),i=r;break;case"details":ee("toggle",t),i=r;break;case"input":bv(t,r),i=ld(t,r),ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ae({},r,{value:void 0}),ee("invalid",t);break;case"textarea":Ov(t,r),i=hd(t,r),ee("invalid",t);break;default:i=r}vd(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?GC(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&HC(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Xo(t,c):typeof c=="number"&&Xo(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Qo.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ee("scroll",t):c!=null&&Ah(t,o,c,a))}switch(n){case"input":Ga(t),Dv(t,r,!1);break;case"textarea":Ga(t),xv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fn(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?si(t,!!r.multiple,o,!1):r.defaultValue!=null&&si(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Vc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ne(e),null;case 6:if(t&&e.stateNode!=null)mR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=Rr(ca.current),Rr(Ht.current),rc(e)){if(r=e.stateNode,n=e.memoizedProps,r[qt]=e,(o=r.nodeValue!==n)&&(t=ut,t!==null))switch(t.tag){case 3:nc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qt]=e,e.stateNode=r}return Ne(e),null;case 13:if(te(ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ne&&ct!==null&&e.mode&1&&!(e.flags&128))NP(),hi(),e.flags|=98560,o=!1;else if(o=rc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(M(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(M(317));o[qt]=e}else hi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),o=!1}else Dt!==null&&(Qd(Dt),Dt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ie.current&1?ye===0&&(ye=3):lf())),e.updateQueue!==null&&(e.flags|=4),Ne(e),null);case 4:return vi(),qd(t,e),t===null&&ia(e.stateNode.containerInfo),Ne(e),null;case 10:return Hh(e.type._context),Ne(e),null;case 17:return it(e.type)&&qc(),Ne(e),null;case 19:if(te(ie),o=e.memoizedState,o===null)return Ne(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)qi(o,!1);else{if(ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Jc(t),a!==null){for(e.flags|=128,qi(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Z(ie,ie.current&1|2),e.child}t=t.sibling}o.tail!==null&&fe()>mi&&(e.flags|=128,r=!0,qi(o,!1),e.lanes=4194304)}else{if(!r)if(t=Jc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!ne)return Ne(e),null}else 2*fe()-o.renderingStartTime>mi&&n!==1073741824&&(e.flags|=128,r=!0,qi(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=fe(),e.sibling=null,n=ie.current,Z(ie,r?n&1|2:n&1),e):(Ne(e),null);case 22:case 23:return uf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?at&1073741824&&(Ne(e),e.subtreeFlags&6&&(e.flags|=8192)):Ne(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function bI(t,e){switch(qh(e),e.tag){case 1:return it(e.type)&&qc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vi(),te(rt),te(He),Xh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qh(e),null;case 13:if(te(ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));hi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return te(ie),null;case 4:return vi(),null;case 10:return Hh(e.type._context),null;case 22:case 23:return uf(),null;case 24:return null;default:return null}}var oc=!1,Ue=!1,DI=typeof WeakSet=="function"?WeakSet:Set,b=null;function Yr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function Ud(t,e,n){try{n()}catch(r){pe(t,e,r)}}var wg=!1;function OI(t,e){if(Id=Lc,t=RP(),Fh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,c=-1,u=0,l=0,p=t,d=null;t:for(;;){for(var h;p!==n||i!==0&&p.nodeType!==3||(s=a+i),p!==o||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===t)break t;if(d===n&&++u===i&&(s=a),d===o&&++l===r&&(c=a),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}n=s===-1||c===-1?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ad={focusedElem:t,selectionRange:n},Lc=!1,b=e;b!==null;)if(e=b,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,b=t;else for(;b!==null;){e=b;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,S=f.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:kt(e.type,m),S);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(C){pe(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,b=t;break}b=e.return}return f=wg,wg=!1,f}function Uo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Ud(e,n,o)}i=i.next}while(i!==r)}}function Ru(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $d(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yR(t){var e=t.alternate;e!==null&&(t.alternate=null,yR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qt],delete e[oa],delete e[kd],delete e[vI],delete e[gI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function SR(t){return t.tag===5||t.tag===3||t.tag===4}function Eg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||SR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vc));else if(r!==4&&(t=t.child,t!==null))for(Wd(t,e,n),t=t.sibling;t!==null;)Wd(t,e,n),t=t.sibling}function Hd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hd(t,e,n),t=t.sibling;t!==null;)Hd(t,e,n),t=t.sibling}var Te=null,bt=!1;function Cn(t,e,n){for(n=n.child;n!==null;)CR(t,e,n),n=n.sibling}function CR(t,e,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(fu,n)}catch{}switch(n.tag){case 5:Ue||Yr(n,e);case 6:var r=Te,i=bt;Te=null,Cn(t,e,n),Te=r,bt=i,Te!==null&&(bt?(t=Te,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Te.removeChild(n.stateNode));break;case 18:Te!==null&&(bt?(t=Te,n=n.stateNode,t.nodeType===8?vp(t.parentNode,n):t.nodeType===1&&vp(t,n),ta(t)):vp(Te,n.stateNode));break;case 4:r=Te,i=bt,Te=n.stateNode.containerInfo,bt=!0,Cn(t,e,n),Te=r,bt=i;break;case 0:case 11:case 14:case 15:if(!Ue&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ud(n,e,a),i=i.next}while(i!==r)}Cn(t,e,n);break;case 1:if(!Ue&&(Yr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){pe(n,e,s)}Cn(t,e,n);break;case 21:Cn(t,e,n);break;case 22:n.mode&1?(Ue=(r=Ue)||n.memoizedState!==null,Cn(t,e,n),Ue=r):Cn(t,e,n);break;default:Cn(t,e,n)}}function Tg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DI),e.forEach(function(r){var i=qI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:Te=s.stateNode,bt=!1;break e;case 3:Te=s.stateNode.containerInfo,bt=!0;break e;case 4:Te=s.stateNode.containerInfo,bt=!0;break e}s=s.return}if(Te===null)throw Error(M(160));CR(o,a,i),Te=null,bt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){pe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)PR(e,t),e=e.sibling}function PR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mt(e,t),Ft(t),r&4){try{Uo(3,t,t.return),Ru(3,t)}catch(m){pe(t,t.return,m)}try{Uo(5,t,t.return)}catch(m){pe(t,t.return,m)}}break;case 1:Mt(e,t),Ft(t),r&512&&n!==null&&Yr(n,n.return);break;case 5:if(Mt(e,t),Ft(t),r&512&&n!==null&&Yr(n,n.return),t.flags&32){var i=t.stateNode;try{Xo(i,"")}catch(m){pe(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&UC(i,o),gd(s,a);var u=gd(s,o);for(a=0;a<c.length;a+=2){var l=c[a],p=c[a+1];l==="style"?GC(i,p):l==="dangerouslySetInnerHTML"?HC(i,p):l==="children"?Xo(i,p):Ah(i,l,p,u)}switch(s){case"input":pd(i,o);break;case"textarea":$C(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?si(i,!!o.multiple,h,!1):d!==!!o.multiple&&(o.defaultValue!=null?si(i,!!o.multiple,o.defaultValue,!0):si(i,!!o.multiple,o.multiple?[]:"",!1))}i[oa]=o}catch(m){pe(t,t.return,m)}}break;case 6:if(Mt(e,t),Ft(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){pe(t,t.return,m)}}break;case 3:if(Mt(e,t),Ft(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ta(e.containerInfo)}catch(m){pe(t,t.return,m)}break;case 4:Mt(e,t),Ft(t);break;case 13:Mt(e,t),Ft(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(af=fe())),r&4&&Tg(t);break;case 22:if(l=n!==null&&n.memoizedState!==null,t.mode&1?(Ue=(u=Ue)||l,Mt(e,t),Ue=u):Mt(e,t),Ft(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!l&&t.mode&1)for(b=t,l=t.child;l!==null;){for(p=b=l;b!==null;){switch(d=b,h=d.child,d.tag){case 0:case 11:case 14:case 15:Uo(4,d,d.return);break;case 1:Yr(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(m){pe(r,n,m)}}break;case 5:Yr(d,d.return);break;case 22:if(d.memoizedState!==null){Ag(p);continue}}h!==null?(h.return=d,b=h):Ag(p)}l=l.sibling}e:for(l=null,p=t;;){if(p.tag===5){if(l===null){l=p;try{i=p.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=KC("display",a))}catch(m){pe(t,t.return,m)}}}else if(p.tag===6){if(l===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(m){pe(t,t.return,m)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;l===p&&(l=null),p=p.return}l===p&&(l=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Mt(e,t),Ft(t),r&4&&Tg(t);break;case 21:break;default:Mt(e,t),Ft(t)}}function Ft(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(SR(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Xo(i,""),r.flags&=-33);var o=Eg(t);Hd(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=Eg(t);Wd(t,s,a);break;default:throw Error(M(161))}}catch(c){pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xI(t,e,n){b=t,RR(t)}function RR(t,e,n){for(var r=(t.mode&1)!==0;b!==null;){var i=b,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||oc;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||Ue;s=oc;var u=Ue;if(oc=a,(Ue=c)&&!u)for(b=i;b!==null;)a=b,c=a.child,a.tag===22&&a.memoizedState!==null?_g(i):c!==null?(c.return=a,b=c):_g(i);for(;o!==null;)b=o,RR(o),o=o.sibling;b=i,oc=s,Ue=u}Ig(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,b=o):Ig(t)}}function Ig(t){for(;b!==null;){var e=b;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ue||Ru(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ue)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:kt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&lg(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lg(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var p=l.dehydrated;p!==null&&ta(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Ue||e.flags&512&&$d(e)}catch(d){pe(e,e.return,d)}}if(e===t){b=null;break}if(n=e.sibling,n!==null){n.return=e.return,b=n;break}b=e.return}}function Ag(t){for(;b!==null;){var e=b;if(e===t){b=null;break}var n=e.sibling;if(n!==null){n.return=e.return,b=n;break}b=e.return}}function _g(t){for(;b!==null;){var e=b;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ru(4,e)}catch(c){pe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){pe(e,i,c)}}var o=e.return;try{$d(e)}catch(c){pe(e,o,c)}break;case 5:var a=e.return;try{$d(e)}catch(c){pe(e,a,c)}}}catch(c){pe(e,e.return,c)}if(e===t){b=null;break}var s=e.sibling;if(s!==null){s.return=e.return,b=s;break}b=e.return}}var NI=Math.ceil,Yc=gn.ReactCurrentDispatcher,sf=gn.ReactCurrentOwner,Rt=gn.ReactCurrentBatchConfig,K=0,Pe=null,ge=null,_e=0,at=0,Zr=Hn(0),ye=0,da=null,kr=0,wu=0,of=0,$o=null,tt=null,af=0,mi=1/0,Zt=null,Zc=!1,Kd=null,zn=null,ac=!1,Mn=null,eu=0,Wo=0,Gd=null,Tc=-1,Ic=0;function Qe(){return K&6?fe():Tc!==-1?Tc:Tc=fe()}function jn(t){return t.mode&1?K&2&&_e!==0?_e&-_e:yI.transition!==null?(Ic===0&&(Ic=oP()),Ic):(t=Q,t!==0||(t=window.event,t=t===void 0?16:hP(t.type)),t):1}function Nt(t,e,n,r){if(50<Wo)throw Wo=0,Gd=null,Error(M(185));Pa(t,n,r),(!(K&2)||t!==Pe)&&(t===Pe&&(!(K&2)&&(wu|=n),ye===4&&An(t,_e)),st(t,r),n===1&&K===0&&!(e.mode&1)&&(mi=fe()+500,Su&&Kn()))}function st(t,e){var n=t.callbackNode;y1(t,e);var r=jc(t,t===Pe?_e:0);if(r===0)n!==null&&jv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jv(n),e===1)t.tag===0?mI(Mg.bind(null,t)):DP(Mg.bind(null,t)),hI(function(){!(K&6)&&Kn()}),n=null;else{switch(aP(r)){case 1:n=Dh;break;case 4:n=iP;break;case 16:n=zc;break;case 536870912:n=sP;break;default:n=zc}n=kR(n,wR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wR(t,e){if(Tc=-1,Ic=0,K&6)throw Error(M(327));var n=t.callbackNode;if(li()&&t.callbackNode!==n)return null;var r=jc(t,t===Pe?_e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=tu(t,r);else{e=r;var i=K;K|=2;var o=TR();(Pe!==t||_e!==e)&&(Zt=null,mi=fe()+500,Er(t,e));do try{LI();break}catch(s){ER(t,s)}while(!0);Wh(),Yc.current=o,K=i,ge!==null?e=0:(Pe=null,_e=0,e=ye)}if(e!==0){if(e===2&&(i=Pd(t),i!==0&&(r=i,e=Jd(t,i))),e===1)throw n=da,Er(t,0),An(t,r),st(t,fe()),n;if(e===6)An(t,r);else{if(i=t.current.alternate,!(r&30)&&!zI(i)&&(e=tu(t,r),e===2&&(o=Pd(t),o!==0&&(r=o,e=Jd(t,o))),e===1))throw n=da,Er(t,0),An(t,r),st(t,fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:mr(t,tt,Zt);break;case 3:if(An(t,r),(r&130023424)===r&&(e=af+500-fe(),10<e)){if(jc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Qe(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Md(mr.bind(null,t,tt,Zt),e);break}mr(t,tt,Zt);break;case 4:if(An(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-xt(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*NI(r/1960))-r,10<r){t.timeoutHandle=Md(mr.bind(null,t,tt,Zt),r);break}mr(t,tt,Zt);break;case 5:mr(t,tt,Zt);break;default:throw Error(M(329))}}}return st(t,fe()),t.callbackNode===n?wR.bind(null,t):null}function Jd(t,e){var n=$o;return t.current.memoizedState.isDehydrated&&(Er(t,e).flags|=256),t=tu(t,e),t!==2&&(e=tt,tt=n,e!==null&&Qd(e)),t}function Qd(t){tt===null?tt=t:tt.push.apply(tt,t)}function zI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!zt(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function An(t,e){for(e&=~of,e&=~wu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xt(e),r=1<<n;t[n]=-1,e&=~r}}function Mg(t){if(K&6)throw Error(M(327));li();var e=jc(t,0);if(!(e&1))return st(t,fe()),null;var n=tu(t,e);if(t.tag!==0&&n===2){var r=Pd(t);r!==0&&(e=r,n=Jd(t,r))}if(n===1)throw n=da,Er(t,0),An(t,e),st(t,fe()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mr(t,tt,Zt),st(t,fe()),null}function cf(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(mi=fe()+500,Su&&Kn())}}function br(t){Mn!==null&&Mn.tag===0&&!(K&6)&&li();var e=K;K|=1;var n=Rt.transition,r=Q;try{if(Rt.transition=null,Q=1,t)return t()}finally{Q=r,Rt.transition=n,K=e,!(K&6)&&Kn()}}function uf(){at=Zr.current,te(Zr)}function Er(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dI(n)),ge!==null)for(n=ge.return;n!==null;){var r=n;switch(qh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qc();break;case 3:vi(),te(rt),te(He),Xh();break;case 5:Qh(r);break;case 4:vi();break;case 13:te(ie);break;case 19:te(ie);break;case 10:Hh(r.type._context);break;case 22:case 23:uf()}n=n.return}if(Pe=t,ge=t=Ln(t.current,null),_e=at=e,ye=0,da=null,of=wu=kr=0,tt=$o=null,Pr!==null){for(e=0;e<Pr.length;e++)if(n=Pr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Pr=null}return t}function ER(t,e){do{var n=ge;try{if(Wh(),Rc.current=Xc,Qc){for(var r=oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Qc=!1}if(Mr=0,Ce=me=oe=null,qo=!1,ua=0,sf.current=null,n===null||n.return===null){ye=1,da=e,ge=null;break}e:{var o=t,a=n.return,s=n,c=e;if(e=_e,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=s,p=l.tag;if(!(l.mode&1)&&(p===0||p===11||p===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=gg(a);if(h!==null){h.flags&=-257,mg(h,a,s,o,e),h.mode&1&&vg(o,u,e),e=h,c=u;var f=e.updateQueue;if(f===null){var m=new Set;m.add(c),e.updateQueue=m}else f.add(c);break e}else{if(!(e&1)){vg(o,u,e),lf();break e}c=Error(M(426))}}else if(ne&&s.mode&1){var S=gg(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),mg(S,a,s,o,e),Uh(gi(c,s));break e}}o=c=gi(c,s),ye!==4&&(ye=2),$o===null?$o=[o]:$o.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=aR(o,c,e);ug(o,v);break e;case 1:s=c;var g=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(zn===null||!zn.has(y)))){o.flags|=65536,e&=-e,o.lanes|=e;var C=cR(o,s,e);ug(o,C);break e}}o=o.return}while(o!==null)}AR(n)}catch(P){e=P,ge===n&&n!==null&&(ge=n=n.return);continue}break}while(!0)}function TR(){var t=Yc.current;return Yc.current=Xc,t===null?Xc:t}function lf(){(ye===0||ye===3||ye===2)&&(ye=4),Pe===null||!(kr&268435455)&&!(wu&268435455)||An(Pe,_e)}function tu(t,e){var n=K;K|=2;var r=TR();(Pe!==t||_e!==e)&&(Zt=null,Er(t,e));do try{jI();break}catch(i){ER(t,i)}while(!0);if(Wh(),K=n,Yc.current=r,ge!==null)throw Error(M(261));return Pe=null,_e=0,ye}function jI(){for(;ge!==null;)IR(ge)}function LI(){for(;ge!==null&&!u1();)IR(ge)}function IR(t){var e=MR(t.alternate,t,at);t.memoizedProps=t.pendingProps,e===null?AR(t):ge=e,sf.current=null}function AR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bI(n,e),n!==null){n.flags&=32767,ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ye=6,ge=null;return}}else if(n=kI(n,e,at),n!==null){ge=n;return}if(e=e.sibling,e!==null){ge=e;return}ge=e=t}while(e!==null);ye===0&&(ye=5)}function mr(t,e,n){var r=Q,i=Rt.transition;try{Rt.transition=null,Q=1,BI(t,e,n,r)}finally{Rt.transition=i,Q=r}return null}function BI(t,e,n,r){do li();while(Mn!==null);if(K&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(S1(t,o),t===Pe&&(ge=Pe=null,_e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ac||(ac=!0,kR(zc,function(){return li(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Rt.transition,Rt.transition=null;var a=Q;Q=1;var s=K;K|=4,sf.current=null,OI(t,n),PR(n,t),sI(Ad),Lc=!!Id,Ad=Id=null,t.current=n,xI(n),l1(),K=s,Q=a,Rt.transition=o}else t.current=n;if(ac&&(ac=!1,Mn=t,eu=i),o=t.pendingLanes,o===0&&(zn=null),h1(n.stateNode),st(t,fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zc)throw Zc=!1,t=Kd,Kd=null,t;return eu&1&&t.tag!==0&&li(),o=t.pendingLanes,o&1?t===Gd?Wo++:(Wo=0,Gd=t):Wo=0,Kn(),null}function li(){if(Mn!==null){var t=aP(eu),e=Rt.transition,n=Q;try{if(Rt.transition=null,Q=16>t?16:t,Mn===null)var r=!1;else{if(t=Mn,Mn=null,eu=0,K&6)throw Error(M(331));var i=K;for(K|=4,b=t.current;b!==null;){var o=b,a=o.child;if(b.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var u=s[c];for(b=u;b!==null;){var l=b;switch(l.tag){case 0:case 11:case 15:Uo(8,l,o)}var p=l.child;if(p!==null)p.return=l,b=p;else for(;b!==null;){l=b;var d=l.sibling,h=l.return;if(yR(l),l===u){b=null;break}if(d!==null){d.return=h,b=d;break}b=h}}}var f=o.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var S=m.sibling;m.sibling=null,m=S}while(m!==null)}}b=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,b=a;else e:for(;b!==null;){if(o=b,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Uo(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,b=v;break e}b=o.return}}var g=t.current;for(b=g;b!==null;){a=b;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,b=y;else e:for(a=g;b!==null;){if(s=b,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Ru(9,s)}}catch(P){pe(s,s.return,P)}if(s===a){b=null;break e}var C=s.sibling;if(C!==null){C.return=s.return,b=C;break e}b=s.return}}if(K=i,Kn(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(fu,t)}catch{}r=!0}return r}finally{Q=n,Rt.transition=e}}return!1}function kg(t,e,n){e=gi(n,e),e=aR(t,e,1),t=Nn(t,e,1),e=Qe(),t!==null&&(Pa(t,1,e),st(t,e))}function pe(t,e,n){if(t.tag===3)kg(t,t,n);else for(;e!==null;){if(e.tag===3){kg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zn===null||!zn.has(r))){t=gi(n,t),t=cR(e,t,1),e=Nn(e,t,1),t=Qe(),e!==null&&(Pa(e,1,t),st(e,t));break}}e=e.return}}function FI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qe(),t.pingedLanes|=t.suspendedLanes&n,Pe===t&&(_e&n)===n&&(ye===4||ye===3&&(_e&130023424)===_e&&500>fe()-af?Er(t,0):of|=n),st(t,e)}function _R(t,e){e===0&&(t.mode&1?(e=Xa,Xa<<=1,!(Xa&130023424)&&(Xa=4194304)):e=1);var n=Qe();t=hn(t,e),t!==null&&(Pa(t,e,n),st(t,n))}function VI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_R(t,n)}function qI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),_R(t,n)}var MR;MR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rt.current)nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nt=!1,MI(t,e,n);nt=!!(t.flags&131072)}else nt=!1,ne&&e.flags&1048576&&OP(e,Wc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ec(t,e),t=e.pendingProps;var i=di(e,He.current);ui(e,n),i=Zh(null,e,r,t,i,n);var o=ef();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,it(r)?(o=!0,Uc(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gh(e),i.updater=Pu,e.stateNode=i,i._reactInternals=e,zd(e,r,t,n),e=Bd(null,e,r,!0,o,n)):(e.tag=0,ne&&o&&Vh(e),Je(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ec(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=$I(r),t=kt(r,t),i){case 0:e=Ld(null,e,r,t,n);break e;case 1:e=Cg(null,e,r,t,n);break e;case 11:e=yg(null,e,r,t,n);break e;case 14:e=Sg(null,e,r,kt(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kt(r,i),Ld(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kt(r,i),Cg(t,e,r,i,n);case 3:e:{if(dR(e),t===null)throw Error(M(387));r=e.pendingProps,o=e.memoizedState,i=o.element,BP(t,e),Gc(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=gi(Error(M(423)),e),e=Pg(t,e,r,n,i);break e}else if(r!==i){i=gi(Error(M(424)),e),e=Pg(t,e,r,n,i);break e}else for(ct=xn(e.stateNode.containerInfo.firstChild),ut=e,ne=!0,Dt=null,n=jP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hi(),r===i){e=fn(t,e,n);break e}Je(t,e,r,n)}e=e.child}return e;case 5:return FP(e),t===null&&Od(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,_d(r,i)?a=null:o!==null&&_d(r,o)&&(e.flags|=32),pR(t,e),Je(t,e,a,n),e.child;case 6:return t===null&&Od(e),null;case 13:return hR(t,e,n);case 4:return Jh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fi(e,null,r,n):Je(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kt(r,i),yg(t,e,r,i,n);case 7:return Je(t,e,e.pendingProps,n),e.child;case 8:return Je(t,e,e.pendingProps.children,n),e.child;case 12:return Je(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Z(Hc,r._currentValue),r._currentValue=a,o!==null)if(zt(o.value,a)){if(o.children===i.children&&!rt.current){e=fn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=sn(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),xd(o.return,n,e),s.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(M(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),xd(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Je(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ui(e,n),i=wt(i),r=r(i),e.flags|=1,Je(t,e,r,n),e.child;case 14:return r=e.type,i=kt(r,e.pendingProps),i=kt(r.type,i),Sg(t,e,r,i,n);case 15:return uR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:kt(r,i),Ec(t,e),e.tag=1,it(r)?(t=!0,Uc(e)):t=!1,ui(e,n),oR(e,r,i),zd(e,r,i,n),Bd(null,e,r,!0,t,n);case 19:return fR(t,e,n);case 22:return lR(t,e,n)}throw Error(M(156,e.tag))};function kR(t,e){return rP(t,e)}function UI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new UI(t,e,n,r)}function pf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $I(t){if(typeof t=="function")return pf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mh)return 11;if(t===kh)return 14}return 2}function Ln(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ac(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")pf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ur:return Tr(n.children,i,o,e);case _h:a=8,i|=8;break;case od:return t=Pt(12,n,e,i|2),t.elementType=od,t.lanes=o,t;case ad:return t=Pt(13,n,e,i),t.elementType=ad,t.lanes=o,t;case cd:return t=Pt(19,n,e,i),t.elementType=cd,t.lanes=o,t;case FC:return Eu(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case LC:a=10;break e;case BC:a=9;break e;case Mh:a=11;break e;case kh:a=14;break e;case Rn:a=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Pt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Tr(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function Eu(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=FC,t.lanes=n,t.stateNode={isHidden:!1},t}function wp(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function Ep(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ip(0),this.expirationTimes=ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ip(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function df(t,e,n,r,i,o,a,s,c){return t=new WI(t,e,n,s,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Pt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gh(o),t}function HI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bR(t){if(!t)return Vn;t=t._reactInternals;e:{if(Nr(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(it(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(it(n))return bP(t,n,e)}return e}function DR(t,e,n,r,i,o,a,s,c){return t=df(n,r,!0,t,i,o,a,s,c),t.context=bR(null),n=t.current,r=Qe(),i=jn(n),o=sn(r,i),o.callback=e??null,Nn(n,o,i),t.current.lanes=i,Pa(t,i,r),st(t,r),t}function Tu(t,e,n,r){var i=e.current,o=Qe(),a=jn(i);return n=bR(n),e.context===null?e.context=n:e.pendingContext=n,e=sn(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nn(i,e,a),t!==null&&(Nt(t,i,a,o),Pc(t,i,a)),a}function nu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hf(t,e){bg(t,e),(t=t.alternate)&&bg(t,e)}function KI(){return null}var OR=typeof reportError=="function"?reportError:function(t){console.error(t)};function ff(t){this._internalRoot=t}Iu.prototype.render=ff.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));Tu(t,e,null,null)};Iu.prototype.unmount=ff.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;br(function(){Tu(null,t,null,null)}),e[dn]=null}};function Iu(t){this._internalRoot=t}Iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=lP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<In.length&&e!==0&&e<In[n].priority;n++);In.splice(n,0,t),n===0&&dP(t)}};function vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Au(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dg(){}function GI(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=nu(a);o.call(u)}}var a=DR(e,r,t,0,null,!1,!1,"",Dg);return t._reactRootContainer=a,t[dn]=a.current,ia(t.nodeType===8?t.parentNode:t),br(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=nu(c);s.call(u)}}var c=df(t,0,!1,null,null,!1,!1,"",Dg);return t._reactRootContainer=c,t[dn]=c.current,ia(t.nodeType===8?t.parentNode:t),br(function(){Tu(e,c,n,r)}),c}function _u(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=nu(a);s.call(c)}}Tu(e,a,t,i)}else a=GI(n,e,t,i,r);return nu(a)}cP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Do(e.pendingLanes);n!==0&&(Oh(e,n|1),st(e,fe()),!(K&6)&&(mi=fe()+500,Kn()))}break;case 13:br(function(){var r=hn(t,1);if(r!==null){var i=Qe();Nt(r,t,1,i)}}),hf(t,1)}};xh=function(t){if(t.tag===13){var e=hn(t,134217728);if(e!==null){var n=Qe();Nt(e,t,134217728,n)}hf(t,134217728)}};uP=function(t){if(t.tag===13){var e=jn(t),n=hn(t,e);if(n!==null){var r=Qe();Nt(n,t,e,r)}hf(t,e)}};lP=function(){return Q};pP=function(t,e){var n=Q;try{return Q=t,e()}finally{Q=n}};yd=function(t,e,n){switch(e){case"input":if(pd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=yu(r);if(!i)throw Error(M(90));qC(r),pd(r,i)}}}break;case"textarea":$C(t,n);break;case"select":e=n.value,e!=null&&si(t,!!n.multiple,e,!1)}};XC=cf;YC=br;var JI={usingClientEntryPoint:!1,Events:[wa,Kr,yu,JC,QC,cf]},Ui={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QI={bundleType:Ui.bundleType,version:Ui.version,rendererPackageName:Ui.rendererPackageName,rendererConfig:Ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tP(t),t===null?null:t.stateNode},findFiberByHostInstance:Ui.findFiberByHostInstance||KI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cc.isDisabled&&cc.supportsFiber)try{fu=cc.inject(QI),Wt=cc}catch{}}dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JI;dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vf(e))throw Error(M(200));return HI(t,e,null,n)};dt.createRoot=function(t,e){if(!vf(t))throw Error(M(299));var n=!1,r="",i=OR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=df(t,1,!1,null,null,n,!1,r,i),t[dn]=e.current,ia(t.nodeType===8?t.parentNode:t),new ff(e)};dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=tP(e),t=t===null?null:t.stateNode,t};dt.flushSync=function(t){return br(t)};dt.hydrate=function(t,e,n){if(!Au(e))throw Error(M(200));return _u(null,t,e,!0,n)};dt.hydrateRoot=function(t,e,n){if(!vf(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=OR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=DR(e,null,t,1,n??null,i,!1,o,a),t[dn]=e.current,ia(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Iu(e)};dt.render=function(t,e,n){if(!Au(e))throw Error(M(200));return _u(null,t,e,!1,n)};dt.unmountComponentAtNode=function(t){if(!Au(t))throw Error(M(40));return t._reactRootContainer?(br(function(){_u(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1};dt.unstable_batchedUpdates=cf;dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Au(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return _u(t,e,n,!1,r)};dt.version="18.3.1-next-f1338f8080-20240426";function xR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xR)}catch(t){console.error(t)}}xR(),xC.exports=dt;var XI=xC.exports,NR,Og=XI;NR=Og.createRoot,Og.hydrateRoot;function YI(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function Mu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Xd=t=>Array.isArray(t);function zR(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function ha(t){return typeof t=="string"||Array.isArray(t)}function xg(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function gf(t,e,n,r){if(typeof e=="function"){const[i,o]=xg(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=xg(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function ku(t,e,n){const r=t.getProps();return gf(r,e,n!==void 0?n:r.custom,t)}const mf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yf=["initial",...mf],Ta=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zr=new Set(Ta),on=t=>t*1e3,an=t=>t/1e3,ZI={type:"spring",stiffness:500,damping:25,restSpeed:10},eA=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),tA={type:"keyframes",duration:.8},nA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rA=(t,{keyframes:e})=>e.length>2?tA:zr.has(t)?t.startsWith("scale")?eA(e[1]):ZI:nA;function Sf(t,e){return t?t[e]||t.default||t:void 0}const iA={skipAnimations:!1,useManualTiming:!1},sA=t=>t!==null;function bu(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(sA),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const We=t=>t;function oA(t){let e=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function s(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,l=!1,p=!1)=>{const h=p&&r?e:n;return l&&o.add(u),h.has(u)||h.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(s),r=!1,i&&(i=!1,c.process(u))}};return c}const uc=["read","resolveKeyframes","update","preRender","render","postRender"],aA=40;function jR(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=uc.reduce((v,g)=>(v[g]=oA(o),v),{}),{read:s,resolveKeyframes:c,update:u,preRender:l,render:p,postRender:d}=a,h=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,aA),1),i.timestamp=v,i.isProcessing=!0,s.process(i),c.process(i),u.process(i),l.process(i),p.process(i),d.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(h))},f=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:uc.reduce((v,g)=>{const y=a[g];return v[g]=(C,P=!1,w=!1)=>(n||f(),y.schedule(C,P,w)),v},{}),cancel:v=>{for(let g=0;g<uc.length;g++)a[uc[g]].cancel(v)},state:i,steps:a}}const{schedule:X,cancel:qn,state:Ie,steps:Tp}=jR(typeof requestAnimationFrame<"u"?requestAnimationFrame:We,!0),LR=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,cA=1e-7,uA=12;function lA(t,e,n,r,i){let o,a,s=0;do a=e+(n-e)/2,o=LR(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>cA&&++s<uA);return a}function Ia(t,e,n,r){if(t===e&&n===r)return We;const i=o=>lA(o,0,1,t,n);return o=>o===0||o===1?o:LR(i(o),e,r)}const BR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,FR=t=>e=>1-t(1-e),VR=Ia(.33,1.53,.69,.99),Cf=FR(VR),qR=BR(Cf),UR=t=>(t*=2)<1?.5*Cf(t):.5*(2-Math.pow(2,-10*(t-1))),Pf=t=>1-Math.sin(Math.acos(t)),$R=FR(Pf),WR=BR(Pf),HR=t=>/^0[^.\s]+$/u.test(t);function pA(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||HR(t):!0}let Yd=We;const KR=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),GR=t=>e=>typeof e=="string"&&e.startsWith(t),JR=GR("--"),dA=GR("var(--"),Rf=t=>dA(t)?hA.test(t.split("/*")[0].trim()):!1,hA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vA(t){const e=fA.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function QR(t,e,n=1){const[r,i]=vA(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return KR(a)?parseFloat(a):a}return Rf(i)?QR(i,e,n+1):i}const vn=(t,e,n)=>n>e?e:n<t?t:n,_i={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},fa={..._i,transform:t=>vn(0,1,t)},lc={..._i,default:1},Aa=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Pn=Aa("deg"),Kt=Aa("%"),z=Aa("px"),gA=Aa("vh"),mA=Aa("vw"),Ng={...Kt,parse:t=>Kt.parse(t)/100,transform:t=>Kt.transform(t*100)},yA=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),zg=t=>t===_i||t===z,jg=(t,e)=>parseFloat(t.split(", ")[e]),Lg=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return jg(i[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?jg(o[1],t):0}},SA=new Set(["x","y","z"]),CA=Ta.filter(t=>!SA.has(t));function PA(t){const e=[];return CA.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const yi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Lg(4,13),y:Lg(5,14)};yi.translateX=yi.x;yi.translateY=yi.y;const XR=t=>e=>e.test(t),RA={test:t=>t==="auto",parse:t=>t},YR=[_i,z,Kt,Pn,mA,gA,RA],Bg=t=>YR.find(XR(t)),Ir=new Set;let Zd=!1,eh=!1;function ZR(){if(eh){const t=Array.from(Ir).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=PA(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,a])=>{var s;(s=r.getValue(o))===null||s===void 0||s.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}eh=!1,Zd=!1,Ir.forEach(t=>t.complete()),Ir.clear()}function e0(){Ir.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(eh=!0)})}function wA(){e0(),ZR()}class wf{constructor(e,n,r,i,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ir.add(this),Zd||(Zd=!0,X.read(e0),X.resolveKeyframes(ZR))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,s);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ir.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ir.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ho=t=>Math.round(t*1e5)/1e5,Ef=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function EA(t){return t==null}const TA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tf=(t,e)=>n=>!!(typeof n=="string"&&TA.test(n)&&n.startsWith(t)||e&&!EA(n)&&Object.prototype.hasOwnProperty.call(n,e)),t0=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,a,s]=r.match(Ef);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},IA=t=>vn(0,255,t),Ip={..._i,transform:t=>Math.round(IA(t))},wr={test:Tf("rgb","red"),parse:t0("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ip.transform(t)+", "+Ip.transform(e)+", "+Ip.transform(n)+", "+Ho(fa.transform(r))+")"};function AA(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const th={test:Tf("#"),parse:AA,transform:wr.transform},ei={test:Tf("hsl","hue"),parse:t0("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Kt.transform(Ho(e))+", "+Kt.transform(Ho(n))+", "+Ho(fa.transform(r))+")"},Fe={test:t=>wr.test(t)||th.test(t)||ei.test(t),parse:t=>wr.test(t)?wr.parse(t):ei.test(t)?ei.parse(t):th.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?wr.transform(t):ei.transform(t)},_A=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function MA(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ef))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(_A))===null||n===void 0?void 0:n.length)||0)>0}const n0="number",r0="color",kA="var",bA="var(",Fg="${}",DA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function va(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const s=e.replace(DA,c=>(Fe.test(c)?(r.color.push(o),i.push(r0),n.push(Fe.parse(c))):c.startsWith(bA)?(r.var.push(o),i.push(kA),n.push(c)):(r.number.push(o),i.push(n0),n.push(parseFloat(c))),++o,Fg)).split(Fg);return{values:n,split:s,indexes:r,types:i}}function i0(t){return va(t).values}function s0(t){const{split:e,types:n}=va(t),r=e.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],i[a]!==void 0){const s=n[a];s===n0?o+=Ho(i[a]):s===r0?o+=Fe.transform(i[a]):o+=i[a]}return o}}const OA=t=>typeof t=="number"?0:t;function xA(t){const e=i0(t);return s0(t)(e.map(OA))}const Un={test:MA,parse:i0,createTransformer:s0,getAnimatableNone:xA},NA=new Set(["brightness","contrast","saturate","opacity"]);function zA(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ef)||[];if(!r)return t;const i=n.replace(r,"");let o=NA.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const jA=/\b([a-z-]*)\(.*?\)/gu,nh={...Un,getAnimatableNone:t=>{const e=t.match(jA);return e?e.map(zA).join(" "):t}},LA={borderWidth:z,borderTopWidth:z,borderRightWidth:z,borderBottomWidth:z,borderLeftWidth:z,borderRadius:z,radius:z,borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomRightRadius:z,borderBottomLeftRadius:z,width:z,maxWidth:z,height:z,maxHeight:z,top:z,right:z,bottom:z,left:z,padding:z,paddingTop:z,paddingRight:z,paddingBottom:z,paddingLeft:z,margin:z,marginTop:z,marginRight:z,marginBottom:z,marginLeft:z,backgroundPositionX:z,backgroundPositionY:z},BA={rotate:Pn,rotateX:Pn,rotateY:Pn,rotateZ:Pn,scale:lc,scaleX:lc,scaleY:lc,scaleZ:lc,skew:Pn,skewX:Pn,skewY:Pn,distance:z,translateX:z,translateY:z,translateZ:z,x:z,y:z,z,perspective:z,transformPerspective:z,opacity:fa,originX:Ng,originY:Ng,originZ:z},Vg={..._i,transform:Math.round},If={...LA,...BA,zIndex:Vg,size:z,fillOpacity:fa,strokeOpacity:fa,numOctaves:Vg},FA={...If,color:Fe,backgroundColor:Fe,outlineColor:Fe,fill:Fe,stroke:Fe,borderColor:Fe,borderTopColor:Fe,borderRightColor:Fe,borderBottomColor:Fe,borderLeftColor:Fe,filter:nh,WebkitFilter:nh},Af=t=>FA[t];function o0(t,e){let n=Af(t);return n!==nh&&(n=Un),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const VA=new Set(["auto","none","0"]);function qA(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!VA.has(o)&&va(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=o0(n,i)}class a0 extends wf{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),Rf(u))){const l=QR(u,n.current);l!==void 0&&(e[c]=l),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!yA.has(r)||e.length!==2)return;const[i,o]=e,a=Bg(i),s=Bg(o);if(a!==s)if(zg(a)&&zg(s))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)pA(e[i])&&r.push(i);r.length&&qA(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const a=i.length-1,s=i[a];i[a]=yi[r](n.measureViewportBox(),window.getComputedStyle(n.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function _f(t){return typeof t=="function"}let _c;function UA(){_c=void 0}const Gt={now:()=>(_c===void 0&&Gt.set(Ie.isProcessing||iA.useManualTiming?Ie.timestamp:performance.now()),_c),set:t=>{_c=t,queueMicrotask(UA)}},qg=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Un.test(t)||t==="0")&&!t.startsWith("url("));function $A(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function WA(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=qg(i,e),s=qg(o,e);return!a||!s?!1:$A(t)||(n==="spring"||_f(n))&&r}const HA=40;class c0{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",...s}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Gt.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,...s},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>HA?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&wA(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Gt.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:a,onComplete:s,onUpdate:c,isGenerator:u}=this.options;if(!u&&!WA(e,r,i,o))if(a)this.options.duration=0;else{c==null||c(bu(e,this.options,n)),s==null||s(),this.resolveFinishedPromise();return}const l=this.initPlayback(e,n);l!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...l},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Si=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},u0=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=t(Si(0,i-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function l0(t,e){return e?t*(1e3/e):0}const KA=5;function p0(t,e,n){const r=Math.max(e-KA,0);return l0(n-t(r),e-r)}const ue={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ap=.001;function GA({duration:t=ue.duration,bounce:e=ue.bounce,velocity:n=ue.velocity,mass:r=ue.mass}){let i,o,a=1-e;a=vn(ue.minDamping,ue.maxDamping,a),t=vn(ue.minDuration,ue.maxDuration,an(t)),a<1?(i=u=>{const l=u*a,p=l*t,d=l-n,h=rh(u,a),f=Math.exp(-p);return Ap-d/h*f},o=u=>{const p=u*a*t,d=p*n+n,h=Math.pow(a,2)*Math.pow(u,2)*t,f=Math.exp(-p),m=rh(Math.pow(u,2),a);return(-i(u)+Ap>0?-1:1)*((d-h)*f)/m}):(i=u=>{const l=Math.exp(-u*t),p=(u-n)*t+1;return-Ap+l*p},o=u=>{const l=Math.exp(-u*t),p=(n-u)*(t*t);return l*p});const s=5/t,c=QA(i,o,s);if(t=on(t),isNaN(c))return{stiffness:ue.stiffness,damping:ue.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:t}}}const JA=12;function QA(t,e,n){let r=n;for(let i=1;i<JA;i++)r=r-t(r)/e(r);return r}function rh(t,e){return t*Math.sqrt(1-e*e)}const ih=2e4;function d0(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ih;)e+=n,r=t.next(e);return e>=ih?1/0:e}const XA=["duration","bounce"],YA=["stiffness","damping","mass"];function Ug(t,e){return e.some(n=>t[n]!==void 0)}function ZA(t){let e={velocity:ue.velocity,stiffness:ue.stiffness,damping:ue.damping,mass:ue.mass,isResolvedFromDuration:!1,...t};if(!Ug(t,YA)&&Ug(t,XA))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*vn(.05,1,1-t.bounce)*Math.sqrt(i);e={...e,mass:ue.mass,stiffness:i,damping:o}}else{const n=GA(t);e={...e,...n,mass:ue.mass},e.isResolvedFromDuration=!0}return e}function h0(t=ue.visualDuration,e=ue.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],s={done:!1,value:o},{stiffness:c,damping:u,mass:l,duration:p,velocity:d,isResolvedFromDuration:h}=ZA({...n,velocity:-an(n.velocity||0)}),f=d||0,m=u/(2*Math.sqrt(c*l)),S=a-o,v=an(Math.sqrt(c/l)),g=Math.abs(S)<5;r||(r=g?ue.restSpeed.granular:ue.restSpeed.default),i||(i=g?ue.restDelta.granular:ue.restDelta.default);let y;if(m<1){const P=rh(v,m);y=w=>{const I=Math.exp(-m*v*w);return a-I*((f+m*v*S)/P*Math.sin(P*w)+S*Math.cos(P*w))}}else if(m===1)y=P=>a-Math.exp(-v*P)*(S+(f+v*S)*P);else{const P=v*Math.sqrt(m*m-1);y=w=>{const I=Math.exp(-m*v*w),R=Math.min(P*w,300);return a-I*((f+m*v*S)*Math.sinh(R)+P*S*Math.cosh(R))/P}}const C={calculatedDuration:h&&p||null,next:P=>{const w=y(P);if(h)s.done=P>=p;else{let I=0;m<1&&(I=P===0?on(f):p0(y,P,w));const R=Math.abs(I)<=r,A=Math.abs(a-w)<=i;s.done=R&&A}return s.value=s.done?a:w,s},toString:()=>{const P=Math.min(d0(C),ih),w=u0(I=>C.next(P*I).value,P,30);return P+"ms "+w}};return C}function $g({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:c,restDelta:u=.5,restSpeed:l}){const p=t[0],d={done:!1,value:p},h=R=>s!==void 0&&R<s||c!==void 0&&R>c,f=R=>s===void 0?c:c===void 0||Math.abs(s-R)<Math.abs(c-R)?s:c;let m=n*e;const S=p+m,v=a===void 0?S:a(S);v!==S&&(m=v-p);const g=R=>-m*Math.exp(-R/r),y=R=>v+g(R),C=R=>{const A=g(R),O=y(R);d.done=Math.abs(A)<=u,d.value=d.done?v:O};let P,w;const I=R=>{h(d.value)&&(P=R,w=h0({keyframes:[d.value,f(d.value)],velocity:p0(y,R,d.value),damping:i,stiffness:o,restDelta:u,restSpeed:l}))};return I(0),{calculatedDuration:null,next:R=>{let A=!1;return!w&&P===void 0&&(A=!0,C(R),I(R)),P!==void 0&&R>=P?w.next(R-P):(!A&&C(R),d)}}}const e_=Ia(.42,0,1,1),t_=Ia(0,0,.58,1),f0=Ia(.42,0,.58,1),n_=t=>Array.isArray(t)&&typeof t[0]!="number",Mf=t=>Array.isArray(t)&&typeof t[0]=="number",Wg={linear:We,easeIn:e_,easeInOut:f0,easeOut:t_,circIn:Pf,circInOut:WR,circOut:$R,backIn:Cf,backInOut:qR,backOut:VR,anticipate:UR},Hg=t=>{if(Mf(t)){Yd(t.length===4);const[e,n,r,i]=t;return Ia(e,n,r,i)}else if(typeof t=="string")return Yd(Wg[t]!==void 0),Wg[t];return t},r_=(t,e)=>n=>e(t(n)),cn=(...t)=>t.reduce(r_),se=(t,e,n)=>t+(e-t)*n;function _p(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function i_({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,a=0;if(!e)i=o=a=n;else{const s=n<.5?n*(1+e):n+e-n*e,c=2*n-s;i=_p(c,s,t+1/3),o=_p(c,s,t),a=_p(c,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function ru(t,e){return n=>n>0?e:t}const Mp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},s_=[th,wr,ei],o_=t=>s_.find(e=>e.test(t));function Kg(t){const e=o_(t);if(!e)return!1;let n=e.parse(t);return e===ei&&(n=i_(n)),n}const Gg=(t,e)=>{const n=Kg(t),r=Kg(e);if(!n||!r)return ru(t,e);const i={...n};return o=>(i.red=Mp(n.red,r.red,o),i.green=Mp(n.green,r.green,o),i.blue=Mp(n.blue,r.blue,o),i.alpha=se(n.alpha,r.alpha,o),wr.transform(i))},sh=new Set(["none","hidden"]);function a_(t,e){return sh.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function c_(t,e){return n=>se(t,e,n)}function kf(t){return typeof t=="number"?c_:typeof t=="string"?Rf(t)?ru:Fe.test(t)?Gg:p_:Array.isArray(t)?v0:typeof t=="object"?Fe.test(t)?Gg:u_:ru}function v0(t,e){const n=[...t],r=n.length,i=t.map((o,a)=>kf(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}}function u_(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=kf(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function l_(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],s=t.indexes[a][i[a]],c=(n=t.values[s])!==null&&n!==void 0?n:0;r[o]=c,i[a]++}return r}const p_=(t,e)=>{const n=Un.createTransformer(e),r=va(t),i=va(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?sh.has(t)&&!i.values.length||sh.has(e)&&!r.values.length?a_(t,e):cn(v0(l_(r,i),i.values),n):ru(t,e)};function g0(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?se(t,e,n):kf(t)(t,e)}function d_(t,e,n){const r=[],i=n||g0,o=t.length-1;for(let a=0;a<o;a++){let s=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||We:e;s=cn(c,s)}r.push(s)}return r}function h_(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(Yd(o===e.length),o===1)return()=>e[0];if(o===2&&t[0]===t[1])return()=>e[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=d_(e,r,i),s=a.length,c=u=>{let l=0;if(s>1)for(;l<t.length-2&&!(u<t[l+1]);l++);const p=Si(t[l],t[l+1],u);return a[l](p)};return n?u=>c(vn(t[0],t[o-1],u)):c}function f_(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Si(0,e,r);t.push(se(n,1,i))}}function v_(t){const e=[0];return f_(e,t.length-1),e}function g_(t,e){return t.map(n=>n*e)}function m_(t,e){return t.map(()=>e||f0).splice(0,t.length-1)}function iu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=n_(r)?r.map(Hg):Hg(r),o={done:!1,value:e[0]},a=g_(n&&n.length===e.length?n:v_(e),t),s=h_(a,e,{ease:Array.isArray(i)?i:m_(e,i)});return{calculatedDuration:t,next:c=>(o.value=s(c),o.done=c>=t,o)}}const y_=t=>{const e=({timestamp:n})=>t(n);return{start:()=>X.update(e,!0),stop:()=>qn(e),now:()=>Ie.isProcessing?Ie.timestamp:Gt.now()}},S_={decay:$g,inertia:$g,tween:iu,keyframes:iu,spring:h0},C_=t=>t/100;class bf extends c0{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:o}=this.options,a=(i==null?void 0:i.KeyframeResolver)||wf,s=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new a(o,s,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=this.options,s=_f(n)?n:S_[n]||iu;let c,u;s!==iu&&typeof e[0]!="number"&&(c=cn(C_,g0(e[0],e[1])),e=[0,100]);const l=s({...this.options,keyframes:e});o==="mirror"&&(u=s({...this.options,keyframes:[...e].reverse(),velocity:-a})),l.calculatedDuration===null&&(l.calculatedDuration=d0(l));const{calculatedDuration:p}=l,d=p+i,h=d*(r+1)-i;return{generator:l,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:p,resolvedDuration:d,totalDuration:h}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:a,mapPercentToKeyframes:s,keyframes:c,calculatedDuration:u,totalDuration:l,resolvedDuration:p}=r;if(this.startTime===null)return o.next(0);const{delay:d,repeat:h,repeatType:f,repeatDelay:m,onUpdate:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-l/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-d*(this.speed>=0?1:-1),g=this.speed>=0?v<0:v>l;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=l);let y=this.currentTime,C=o;if(h){const R=Math.min(this.currentTime,l)/p;let A=Math.floor(R),O=R%1;!O&&R>=1&&(O=1),O===1&&A--,A=Math.min(A,h+1),!!(A%2)&&(f==="reverse"?(O=1-O,m&&(O-=m/p)):f==="mirror"&&(C=a)),y=vn(0,1,O)*p}const P=g?{done:!1,value:c[0]}:C.next(y);s&&(P.value=s(P.value));let{done:w}=P;!g&&u!==null&&(w=this.speed>=0?this.currentTime>=l:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return I&&i!==void 0&&(P.value=bu(c,this.options,i)),S&&S(P.value),I&&this.finish(),P}get duration(){const{resolved:e}=this;return e?an(e.calculatedDuration):0}get time(){return an(this.currentTime)}set time(e){e=on(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=an(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=y_,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const P_=new Set(["opacity","clipPath","filter","transform"]);function Df(t){let e;return()=>(e===void 0&&(e=t()),e)}const R_={linearEasing:void 0};function w_(t,e){const n=Df(t);return()=>{var r;return(r=R_[e])!==null&&r!==void 0?r:n()}}const su=w_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function m0(t){return!!(typeof t=="function"&&su()||!t||typeof t=="string"&&(t in oh||su())||Mf(t)||Array.isArray(t)&&t.every(m0))}const xo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,oh={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:xo([0,.65,.55,1]),circOut:xo([.55,0,1,.45]),backIn:xo([.31,.01,.66,-.59]),backOut:xo([.33,1.53,.69,.99])};function y0(t,e){if(t)return typeof t=="function"&&su()?u0(t,e):Mf(t)?xo(t):Array.isArray(t)?t.map(n=>y0(n,e)||oh.easeOut):oh[t]}function E_(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeInOut",times:c}={}){const u={[e]:n};c&&(u.offset=c);const l=y0(s,i);return Array.isArray(l)&&(u.easing=l),t.animate(u,{delay:r,duration:i,easing:Array.isArray(l)?"linear":l,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function Jg(t,e){t.timeline=e,t.onfinish=null}const T_=Df(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ou=10,I_=2e4;function A_(t){return _f(t.type)||t.type==="spring"||!m0(t.ease)}function __(t,e){const n=new bf({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<I_;)r=n.sample(o),i.push(r.value),o+=ou;return{times:void 0,keyframes:i,duration:o-ou,ease:"linear"}}const S0={anticipate:UR,backInOut:qR,circInOut:WR};function M_(t){return t in S0}class Qg extends c0{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new a0(o,(a,s)=>this.onKeyframesResolved(a,s),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:o,ease:a,type:s,motionValue:c,name:u,startTime:l}=this.options;if(!(!((r=c.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&su()&&M_(a)&&(a=S0[a]),A_(this.options)){const{onComplete:d,onUpdate:h,motionValue:f,element:m,...S}=this.options,v=__(e,S);e=v.keyframes,e.length===1&&(e[1]=e[0]),i=v.duration,o=v.times,a=v.ease,s="keyframes"}const p=E_(c.owner.current,u,e,{...this.options,duration:i,times:o,ease:a});return p.startTime=l??this.calcStartTime(),this.pendingTimeline?(Jg(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:d}=this.options;c.set(bu(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:i,times:o,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return an(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return an(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=on(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return We;const{animation:r}=n;Jg(r,e)}return We}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:o,ease:a,times:s}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:l,onComplete:p,element:d,...h}=this.options,f=new bf({...h,keyframes:r,duration:i,type:o,ease:a,times:s,isGenerator:!0}),m=on(this.time);u.setWithVelocity(f.sample(m-ou).value,f.sample(m).value,ou)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:a,type:s}=e;return T_()&&r&&P_.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&o!=="mirror"&&a!==0&&s!=="inertia"}}const k_=Df(()=>window.ScrollTimeline!==void 0);class b_{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>k_()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function D_({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:c,elapsed:u,...l}){return!!Object.keys(l).length}const Of=(t,e,n,r={},i,o)=>a=>{const s=Sf(r,t)||{},c=s.delay||r.delay||0;let{elapsed:u=0}=r;u=u-on(c);let l={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-u,onUpdate:d=>{e.set(d),s.onUpdate&&s.onUpdate(d)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:o?void 0:i};D_(s)||(l={...l,...rA(t,l)}),l.duration&&(l.duration=on(l.duration)),l.repeatDelay&&(l.repeatDelay=on(l.repeatDelay)),l.from!==void 0&&(l.keyframes[0]=l.from);let p=!1;if((l.type===!1||l.duration===0&&!l.repeatDelay)&&(l.duration=0,l.delay===0&&(p=!0)),p&&!o&&e.get()!==void 0){const d=bu(l.keyframes,s);if(d!==void 0)return X.update(()=>{l.onUpdate(d),l.onComplete()}),new b_([])}return!o&&Qg.supports(l)?new Qg(l):new bf(l)},O_=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),x_=t=>Xd(t)?t[t.length-1]||0:t;function xf(t,e){t.indexOf(e)===-1&&t.push(e)}function Nf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class zf{constructor(){this.subscriptions=[]}add(e){return xf(this.subscriptions,e),()=>Nf(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xg=30,N_=t=>!isNaN(parseFloat(t));class z_{constructor(e,n={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=Gt.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Gt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=N_(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new zf);const r=this.events[e].add(n);return e==="change"?()=>{r(),X.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Gt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Xg)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Xg);return l0(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ga(t,e){return new z_(t,e)}function j_(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ga(n))}function L_(t,e){const n=ku(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o){const s=x_(o[a]);j_(t,a,s)}}const jf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),B_="framerAppearId",C0="data-"+jf(B_);function P0(t){return t.props[C0]}const $e=t=>!!(t&&t.getVelocity);function F_(t){return!!($e(t)&&t.add)}function ah(t,e){const n=t.getValue("willChange");if(F_(n))return n.add(e)}function V_({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function R0(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:s,...c}=e;r&&(a=r);const u=[],l=i&&t.animationState&&t.animationState.getState()[i];for(const p in c){const d=t.getValue(p,(o=t.latestValues[p])!==null&&o!==void 0?o:null),h=c[p];if(h===void 0||l&&V_(l,p))continue;const f={delay:n,...Sf(a||{},p)};let m=!1;if(window.MotionHandoffAnimation){const v=P0(t);if(v){const g=window.MotionHandoffAnimation(v,p,X);g!==null&&(f.startTime=g,m=!0)}}ah(t,p),d.start(Of(p,d,h,t.shouldReduceMotion&&zr.has(p)?{type:!1}:f,t,m));const S=d.animation;S&&u.push(S)}return s&&Promise.all(u).then(()=>{X.update(()=>{s&&L_(t,s)})}),u}function ch(t,e,n={}){var r;const i=ku(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const a=i?()=>Promise.all(R0(t,i,n)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:l=0,staggerChildren:p,staggerDirection:d}=o;return q_(t,e,l+u,p,d,n)}:()=>Promise.resolve(),{when:c}=o;if(c){const[u,l]=c==="beforeChildren"?[a,s]:[s,a];return u().then(()=>l())}else return Promise.all([a(),s(n.delay)])}function q_(t,e,n=0,r=0,i=1,o){const a=[],s=(t.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>s-u*r;return Array.from(t.variantChildren).sort(U_).forEach((u,l)=>{u.notify("AnimationStart",e),a.push(ch(u,e,{...o,delay:n+c(l)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function U_(t,e){return t.sortNodePosition(e)}function $_(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>ch(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=ch(t,e,n);else{const i=typeof e=="function"?ku(t,e,n.custom):e;r=Promise.all(R0(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const W_=yf.length;function w0(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?w0(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<W_;n++){const r=yf[n],i=t.props[r];(ha(i)||i===!1)&&(e[r]=i)}return e}const H_=[...mf].reverse(),K_=mf.length;function G_(t){return e=>Promise.all(e.map(({animation:n,options:r})=>$_(t,n,r)))}function J_(t){let e=G_(t),n=Yg(),r=!0;const i=c=>(u,l)=>{var p;const d=ku(t,l,c==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(d){const{transition:h,transitionEnd:f,...m}=d;u={...u,...m,...f}}return u};function o(c){e=c(t)}function a(c){const{props:u}=t,l=w0(t.parent)||{},p=[],d=new Set;let h={},f=1/0;for(let S=0;S<K_;S++){const v=H_[S],g=n[v],y=u[v]!==void 0?u[v]:l[v],C=ha(y),P=v===c?g.isActive:null;P===!1&&(f=S);let w=y===l[v]&&y!==u[v]&&C;if(w&&r&&t.manuallyAnimateOnMount&&(w=!1),g.protectedKeys={...h},!g.isActive&&P===null||!y&&!g.prevProp||Mu(y)||typeof y=="boolean")continue;const I=Q_(g.prevProp,y);let R=I||v===c&&g.isActive&&!w&&C||S>f&&C,A=!1;const O=Array.isArray(y)?y:[y];let F=O.reduce(i(v),{});P===!1&&(F={});const{prevResolvedValues:J={}}=g,G={...J,...F},Ke=re=>{R=!0,d.has(re)&&(A=!0,d.delete(re)),g.needsAnimating[re]=!0;const k=t.getValue(re);k&&(k.liveStyle=!1)};for(const re in G){const k=F[re],x=J[re];if(h.hasOwnProperty(re))continue;let L=!1;Xd(k)&&Xd(x)?L=!zR(k,x):L=k!==x,L?k!=null?Ke(re):d.add(re):k!==void 0&&d.has(re)?Ke(re):g.protectedKeys[re]=!0}g.prevProp=y,g.prevResolvedValues=F,g.isActive&&(h={...h,...F}),r&&t.blockInitialAnimation&&(R=!1),R&&(!(w&&I)||A)&&p.push(...O.map(re=>({animation:re,options:{type:v}})))}if(d.size){const S={};d.forEach(v=>{const g=t.getBaseTarget(v),y=t.getValue(v);y&&(y.liveStyle=!0),S[v]=g??null}),p.push({animation:S})}let m=!!p.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(p):Promise.resolve()}function s(c,u){var l;if(n[c].isActive===u)return Promise.resolve();(l=t.variantChildren)===null||l===void 0||l.forEach(d=>{var h;return(h=d.animationState)===null||h===void 0?void 0:h.setActive(c,u)}),n[c].isActive=u;const p=a(c);for(const d in n)n[d].protectedKeys={};return p}return{animateChanges:a,setActive:s,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Yg(),r=!0}}}function Q_(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!zR(e,t):!1}function er(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Yg(){return{animate:er(!0),whileInView:er(),whileHover:er(),whileTap:er(),whileDrag:er(),whileFocus:er(),exit:er()}}class Gn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class X_ extends Gn{constructor(e){super(e),e.animationState||(e.animationState=J_(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Y_=0;class Z_ extends Gn{constructor(){super(...arguments),this.id=Y_++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const eM={animation:{Feature:X_},exit:{Feature:Z_}},E0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Du(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const tM=t=>e=>E0(e)&&t(e,Du(e));function rn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function un(t,e,n,r){return rn(t,e,tM(n),r)}const Zg=(t,e)=>Math.abs(t-e);function nM(t,e){const n=Zg(t.x,e.x),r=Zg(t.y,e.y);return Math.sqrt(n**2+r**2)}class T0{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=bp(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=nM(p.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:f}=p,{timestamp:m}=Ie;this.history.push({...f,timestamp:m});const{onStart:S,onMove:v}=this.handlers;d||(S&&S(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,d)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=kp(d,this.transformPagePoint),X.update(this.updatePoint,!0)},this.handlePointerUp=(p,d)=>{this.end();const{onEnd:h,onSessionEnd:f,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=bp(p.type==="pointercancel"?this.lastMoveEventInfo:kp(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(p,S),f&&f(p,S)},!E0(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=Du(e),s=kp(a,this.transformPagePoint),{point:c}=s,{timestamp:u}=Ie;this.history=[{...c,timestamp:u}];const{onSessionStart:l}=n;l&&l(e,bp(s,this.history)),this.removeListeners=cn(un(this.contextWindow,"pointermove",this.handlePointerMove),un(this.contextWindow,"pointerup",this.handlePointerUp),un(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qn(this.updatePoint)}}function kp(t,e){return e?{point:e(t.point)}:t}function em(t,e){return{x:t.x-e.x,y:t.y-e.y}}function bp({point:t},e){return{point:t,delta:em(t,I0(e)),offset:em(t,rM(e)),velocity:iM(e,.1)}}function rM(t){return t[0]}function I0(t){return t[t.length-1]}function iM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=I0(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>on(e)));)n--;if(!r)return{x:0,y:0};const o=an(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function A0(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const tm=A0("dragHorizontal"),nm=A0("dragVertical");function _0(t){let e=!1;if(t==="y")e=nm();else if(t==="x")e=tm();else{const n=tm(),r=nm();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function M0(){const t=_0(!0);return t?(t(),!1):!0}function ti(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const k0=1e-4,sM=1-k0,oM=1+k0,b0=.01,aM=0-b0,cM=0+b0;function pt(t){return t.max-t.min}function uM(t,e,n){return Math.abs(t-e)<=n}function rm(t,e,n,r=.5){t.origin=r,t.originPoint=se(e.min,e.max,t.origin),t.scale=pt(n)/pt(e),t.translate=se(n.min,n.max,t.origin)-t.originPoint,(t.scale>=sM&&t.scale<=oM||isNaN(t.scale))&&(t.scale=1),(t.translate>=aM&&t.translate<=cM||isNaN(t.translate))&&(t.translate=0)}function Ko(t,e,n,r){rm(t.x,e.x,n.x,r?r.originX:void 0),rm(t.y,e.y,n.y,r?r.originY:void 0)}function im(t,e,n){t.min=n.min+e.min,t.max=t.min+pt(e)}function lM(t,e,n){im(t.x,e.x,n.x),im(t.y,e.y,n.y)}function sm(t,e,n){t.min=e.min-n.min,t.max=t.min+pt(e)}function Go(t,e,n){sm(t.x,e.x,n.x),sm(t.y,e.y,n.y)}function pM(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?se(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?se(n,t,r.max):Math.min(t,n)),t}function om(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function dM(t,{top:e,left:n,bottom:r,right:i}){return{x:om(t.x,n,i),y:om(t.y,e,r)}}function am(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function hM(t,e){return{x:am(t.x,e.x),y:am(t.y,e.y)}}function fM(t,e){let n=.5;const r=pt(t),i=pt(e);return i>r?n=Si(e.min,e.max-r,t.min):r>i&&(n=Si(t.min,t.max-i,e.min)),vn(0,1,n)}function vM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const uh=.35;function gM(t=uh){return t===!1?t=0:t===!0&&(t=uh),{x:cm(t,"left","right"),y:cm(t,"top","bottom")}}function cm(t,e,n){return{min:um(t,e),max:um(t,n)}}function um(t,e){return typeof t=="number"?t:t[e]||0}const lm=()=>({translate:0,scale:1,origin:0,originPoint:0}),ni=()=>({x:lm(),y:lm()}),pm=()=>({min:0,max:0}),he=()=>({x:pm(),y:pm()});function yt(t){return[t("x"),t("y")]}function D0({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function mM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function yM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Dp(t){return t===void 0||t===1}function lh({scale:t,scaleX:e,scaleY:n}){return!Dp(t)||!Dp(e)||!Dp(n)}function yr(t){return lh(t)||O0(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function O0(t){return dm(t.x)||dm(t.y)}function dm(t){return t&&t!=="0%"}function au(t,e,n){const r=t-n,i=e*r;return n+i}function hm(t,e,n,r,i){return i!==void 0&&(t=au(t,i,r)),au(t,n,r)+e}function ph(t,e=0,n=1,r,i){t.min=hm(t.min,e,n,r,i),t.max=hm(t.max,e,n,r,i)}function x0(t,{x:e,y:n}){ph(t.x,e.translate,e.scale,e.originPoint),ph(t.y,n.translate,n.scale,n.originPoint)}const fm=.999999999999,vm=1.0000000000001;function SM(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,a;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ii(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,x0(t,a)),r&&yr(o.latestValues)&&ii(t,o.latestValues))}e.x<vm&&e.x>fm&&(e.x=1),e.y<vm&&e.y>fm&&(e.y=1)}function ri(t,e){t.min=t.min+e,t.max=t.max+e}function gm(t,e,n,r,i=.5){const o=se(t.min,t.max,i);ph(t,e,n,o,r)}function ii(t,e){gm(t.x,e.x,e.scaleX,e.scale,e.originX),gm(t.y,e.y,e.scaleY,e.scale,e.originY)}function N0(t,e){return D0(yM(t.getBoundingClientRect(),e))}function CM(t,e,n){const r=N0(t,n),{scroll:i}=e;return i&&(ri(r.x,i.offset.x),ri(r.y,i.offset.y)),r}const z0=({current:t})=>t?t.ownerDocument.defaultView:null,PM=new WeakMap;class RM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=he(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=l=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Du(l,"page").point)},o=(l,p)=>{const{drag:d,dragPropagation:h,onDragStart:f}=this.getProps();if(d&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=_0(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),yt(S=>{let v=this.getAxisMotionValue(S).get()||0;if(Kt.test(v)){const{projection:g}=this.visualElement;if(g&&g.layout){const y=g.layout.layoutBox[S];y&&(v=pt(y)*(parseFloat(v)/100))}}this.originPoint[S]=v}),f&&X.postRender(()=>f(l,p)),ah(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},a=(l,p)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:f,onDrag:m}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:S}=p;if(h&&this.currentDirection===null){this.currentDirection=wM(S),this.currentDirection!==null&&f&&f(this.currentDirection);return}this.updateAxis("x",p.point,S),this.updateAxis("y",p.point,S),this.visualElement.render(),m&&m(l,p)},s=(l,p)=>this.stop(l,p),c=()=>yt(l=>{var p;return this.getAnimationState(l)==="paused"&&((p=this.getAxisMotionValue(l).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new T0(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:s,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:z0(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&X.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!pc(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=pM(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&ti(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=dM(i.layoutBox,n):this.constraints=!1,this.elastic=gM(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&yt(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=vM(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ti(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=CM(r,i.root,this.visualElement.getTransformPagePoint());let a=hM(i.layout.layoutBox,o);if(n){const s=n(mM(a));this.hasMutatedConstraints=!!s,s&&(a=D0(s))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),c=this.constraints||{},u=yt(l=>{if(!pc(l,n,this.currentDirection))return;let p=c&&c[l]||{};a&&(p={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,f={type:"inertia",velocity:r?e[l]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...o,...p};return this.startAxisValueAnimation(l,f)});return Promise.all(u).then(s)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return ah(this.visualElement,e),r.start(Of(e,r,0,n,this.visualElement,!1))}stopAnimation(){yt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){yt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){yt(n=>{const{drag:r}=this.getProps();if(!pc(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:s}=i.layout.layoutBox[n];o.set(e[n]-se(a,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ti(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};yt(a=>{const s=this.getAxisMotionValue(a);if(s&&this.constraints!==!1){const c=s.get();i[a]=fM({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),yt(a=>{if(!pc(a,e,null))return;const s=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];s.set(se(c,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;PM.set(this.visualElement,this);const e=this.visualElement.current,n=un(e,"pointerdown",c=>{const{drag:u,dragListener:l=!0}=this.getProps();u&&l&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ti(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),X.read(r);const a=rn(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(yt(l=>{const p=this.getAxisMotionValue(l);p&&(this.originPoint[l]+=c[l].translate,p.set(p.get()+c[l].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=uh,dragMomentum:s=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:s}}}function pc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function wM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class EM extends Gn{constructor(e){super(e),this.removeGroupControls=We,this.removeListeners=We,this.controls=new RM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||We}unmount(){this.removeGroupControls(),this.removeListeners()}}const mm=t=>(e,n)=>{t&&X.postRender(()=>t(e,n))};class TM extends Gn{constructor(){super(...arguments),this.removePointerDownListener=We}onPointerDown(e){this.session=new T0(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:z0(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:mm(e),onStart:mm(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&X.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=un(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ou=E.createContext(null);function IM(){const t=E.useContext(Ou);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=E.useId();E.useEffect(()=>r(i),[]);const o=E.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,o]:[!0]}const Lf=E.createContext({}),j0=E.createContext({}),Mc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ym(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $i={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(z.test(t))t=parseFloat(t);else return t;const n=ym(t,e.target.x),r=ym(t,e.target.y);return`${n}% ${r}%`}},AM={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Un.parse(t);if(i.length>5)return r;const o=Un.createTransformer(t),a=typeof i[0]!="number"?1:0,s=n.x.scale*e.x,c=n.y.scale*e.y;i[0+a]/=s,i[1+a]/=c;const u=se(s,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),o(i)}},cu={};function _M(t){Object.assign(cu,t)}const{schedule:Bf,cancel:vj}=jR(queueMicrotask,!1);class MM extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;_M(kM),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Mc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,a=r.projection;return a&&(a.isPresent=o,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||X.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Bf.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function L0(t){const[e,n]=IM(),r=E.useContext(Lf);return T.jsx(MM,{...t,layoutGroup:r,switchLayoutGroup:E.useContext(j0),isPresent:e,safeToRemove:n})}const kM={borderRadius:{...$i,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$i,borderTopRightRadius:$i,borderBottomLeftRadius:$i,borderBottomRightRadius:$i,boxShadow:AM},B0=["TopLeft","TopRight","BottomLeft","BottomRight"],bM=B0.length,Sm=t=>typeof t=="string"?parseFloat(t):t,Cm=t=>typeof t=="number"||z.test(t);function DM(t,e,n,r,i,o){i?(t.opacity=se(0,n.opacity!==void 0?n.opacity:1,OM(r)),t.opacityExit=se(e.opacity!==void 0?e.opacity:1,0,xM(r))):o&&(t.opacity=se(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<bM;a++){const s=`border${B0[a]}Radius`;let c=Pm(e,s),u=Pm(n,s);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Cm(c)===Cm(u)?(t[s]=Math.max(se(Sm(c),Sm(u),r),0),(Kt.test(u)||Kt.test(c))&&(t[s]+="%")):t[s]=u}(e.rotate||n.rotate)&&(t.rotate=se(e.rotate||0,n.rotate||0,r))}function Pm(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const OM=F0(0,.5,$R),xM=F0(.5,.95,We);function F0(t,e,n){return r=>r<t?0:r>e?1:n(Si(t,e,r))}function Rm(t,e){t.min=e.min,t.max=e.max}function gt(t,e){Rm(t.x,e.x),Rm(t.y,e.y)}function wm(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Em(t,e,n,r,i){return t-=e,t=au(t,1/n,r),i!==void 0&&(t=au(t,1/i,r)),t}function NM(t,e=0,n=1,r=.5,i,o=t,a=t){if(Kt.test(e)&&(e=parseFloat(e),e=se(a.min,a.max,e/100)-a.min),typeof e!="number")return;let s=se(o.min,o.max,r);t===o&&(s-=e),t.min=Em(t.min,e,n,s,i),t.max=Em(t.max,e,n,s,i)}function Tm(t,e,[n,r,i],o,a){NM(t,e[n],e[r],e[i],e.scale,o,a)}const zM=["x","scaleX","originX"],jM=["y","scaleY","originY"];function Im(t,e,n,r){Tm(t.x,e,zM,n?n.x:void 0,r?r.x:void 0),Tm(t.y,e,jM,n?n.y:void 0,r?r.y:void 0)}function Am(t){return t.translate===0&&t.scale===1}function V0(t){return Am(t.x)&&Am(t.y)}function _m(t,e){return t.min===e.min&&t.max===e.max}function LM(t,e){return _m(t.x,e.x)&&_m(t.y,e.y)}function Mm(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function q0(t,e){return Mm(t.x,e.x)&&Mm(t.y,e.y)}function km(t){return pt(t.x)/pt(t.y)}function bm(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class BM{constructor(){this.members=[]}add(e){xf(this.members,e),e.scheduleRender()}remove(e){if(Nf(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function FM(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:l,rotateX:p,rotateY:d,skewX:h,skewY:f}=n;u&&(r=`perspective(${u}px) ${r}`),l&&(r+=`rotate(${l}deg) `),p&&(r+=`rotateX(${p}deg) `),d&&(r+=`rotateY(${d}deg) `),h&&(r+=`skewX(${h}deg) `),f&&(r+=`skewY(${f}deg) `)}const s=t.x.scale*e.x,c=t.y.scale*e.y;return(s!==1||c!==1)&&(r+=`scale(${s}, ${c})`),r||"none"}const VM=(t,e)=>t.depth-e.depth;class qM{constructor(){this.children=[],this.isDirty=!1}add(e){xf(this.children,e),this.isDirty=!0}remove(e){Nf(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(VM),this.isDirty=!1,this.children.forEach(e)}}function kc(t){const e=$e(t)?t.get():t;return O_(e)?e.toValue():e}function UM(t,e){const n=Gt.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(qn(r),t(o-e))};return X.read(r,!0),()=>qn(r)}function $M(t){return t instanceof SVGElement&&t.tagName!=="svg"}function WM(t,e,n){const r=$e(t)?t:ga(t);return r.start(Of("",r,e,n)),r.animation}const Sr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},No=typeof window<"u"&&window.MotionDebug!==void 0,Op=["","X","Y","Z"],HM={visibility:"hidden"},Dm=1e3;let KM=0;function xp(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function U0(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=P0(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",X,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&U0(r)}function $0({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},s=e==null?void 0:e()){this.id=KM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,No&&(Sr.totalNodes=Sr.resolvedTargetDeltas=Sr.recalculatedProjection=0),this.nodes.forEach(QM),this.nodes.forEach(tk),this.nodes.forEach(nk),this.nodes.forEach(XM),No&&window.MotionDebug.record(Sr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new qM)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new zf),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const c=this.eventHandlers.get(a);c&&c.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$M(a),this.instance=a;const{layoutId:c,layout:u,visualElement:l}=this.options;if(l&&!l.current&&l.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(u||c)&&(this.isLayoutDirty=!0),t){let p;const d=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=UM(d,250),Mc.hasAnimatedSinceResize&&(Mc.hasAnimatedSinceResize=!1,this.nodes.forEach(xm))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&l&&(c||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||l.getDefaultTransition()||ak,{onLayoutAnimationStart:S,onLayoutAnimationComplete:v}=l.getProps(),g=!this.targetLayout||!q0(this.targetLayout,f)||h,y=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||d&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,y);const C={...Sf(m,"layout"),onPlay:S,onComplete:v};(l.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else d||xm(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rk),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&U0(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let l=0;l<this.path.length;l++){const p=this.path[l];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:s,layout:c}=this.options;if(s===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Om);return}this.isUpdating||this.nodes.forEach(ZM),this.isUpdating=!1,this.nodes.forEach(ek),this.nodes.forEach(GM),this.nodes.forEach(JM),this.clearAllSnapshots();const s=Gt.now();Ie.delta=vn(0,1e3/60,s-Ie.timestamp),Ie.timestamp=s,Ie.isProcessing=!0,Tp.update.process(Ie),Tp.preRender.process(Ie),Tp.render.process(Ie),Ie.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YM),this.sharedNodes.forEach(ik)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,X.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){X.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=he(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!V0(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,l=u!==this.prevTransformTemplateValue;a&&(s||yr(this.latestValues)||l)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let c=this.removeElementScroll(s);return a&&(c=this.removeTransform(c)),ck(c),{animationId:this.root.animationId,measuredBox:s,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:s}=this.options;if(!s)return he();const c=s.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(uk))){const{scroll:l}=this.root;l&&(ri(c.x,l.offset.x),ri(c.y,l.offset.y))}return c}removeElementScroll(a){var s;const c=he();if(gt(c,a),!((s=this.scroll)===null||s===void 0)&&s.wasRoot)return c;for(let u=0;u<this.path.length;u++){const l=this.path[u],{scroll:p,options:d}=l;l!==this.root&&p&&d.layoutScroll&&(p.wasRoot&&gt(c,a),ri(c.x,p.offset.x),ri(c.y,p.offset.y))}return c}applyTransform(a,s=!1){const c=he();gt(c,a);for(let u=0;u<this.path.length;u++){const l=this.path[u];!s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&ii(c,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),yr(l.latestValues)&&ii(c,l.latestValues)}return yr(this.latestValues)&&ii(c,this.latestValues),c}removeTransform(a){const s=he();gt(s,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!yr(u.latestValues))continue;lh(u.latestValues)&&u.updateSnapshot();const l=he(),p=u.measurePageBox();gt(l,p),Im(s,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,l)}return yr(this.latestValues)&&Im(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ie.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var s;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:d}=this.options;if(!(!this.layout||!(p||d))){if(this.resolvedRelativeTargetAt=Ie.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=he(),this.relativeTargetOrigin=he(),Go(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),gt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=he(),this.targetWithTransforms=he()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gt(this.target,this.layout.layoutBox),x0(this.target,this.targetDelta)):gt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=he(),this.relativeTargetOrigin=he(),Go(this.relativeTargetOrigin,this.target,h.target),gt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}No&&Sr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||lh(this.parent.latestValues)||O0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const s=this.getLead(),c=!!this.resumingFrom||this!==s;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ie.timestamp&&(u=!1),u)return;const{layout:l,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||p))return;gt(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;SM(this.layoutCorrected,this.treeScale,this.path,c),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=he());const{target:f}=s;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wm(this.prevProjectionDelta.x,this.projectionDelta.x),wm(this.prevProjectionDelta.y,this.projectionDelta.y)),Ko(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!bm(this.projectionDelta.x,this.prevProjectionDelta.x)||!bm(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f)),No&&Sr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var s;if((s=this.options.visualElement)===null||s===void 0||s.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ni(),this.projectionDelta=ni(),this.projectionDeltaWithTransform=ni()}setAnimationOrigin(a,s=!1){const c=this.snapshot,u=c?c.latestValues:{},l={...this.latestValues},p=ni();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const d=he(),h=c?c.source:void 0,f=this.layout?this.layout.source:void 0,m=h!==f,S=this.getStack(),v=!S||S.members.length<=1,g=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(ok));this.animationProgress=0;let y;this.mixTargetDelta=C=>{const P=C/1e3;Nm(p.x,a.x,P),Nm(p.y,a.y,P),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Go(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sk(this.relativeTarget,this.relativeTargetOrigin,d,P),y&&LM(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=he()),gt(y,this.relativeTarget)),m&&(this.animationValues=l,DM(l,u,this.latestValues,P,g,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=X.update(()=>{Mc.hasAnimatedSinceResize=!0,this.currentAnimation=WM(0,Dm,{...a,onUpdate:s=>{this.mixTargetDelta(s),a.onUpdate&&a.onUpdate(s)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Dm),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:c,layout:u,latestValues:l}=a;if(!(!s||!c||!u)){if(this!==a&&this.layout&&u&&W0(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||he();const p=pt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+p;const d=pt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+d}gt(s,c),ii(s,l),Ko(this.projectionDeltaWithTransform,this.layoutCorrected,s,l)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new BM),this.sharedNodes.get(a).add(s);const u=s.options.initialPromotionConfig;s.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:s}=this.options;return s?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:s}=this.options;return s?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(s=!0),!s)return;const u={};c.z&&xp("z",a,u,this.animationValues);for(let l=0;l<Op.length;l++)xp(`rotate${Op[l]}`,a,u,this.animationValues),xp(`skew${Op[l]}`,a,u,this.animationValues);a.render();for(const l in u)a.setStaticValue(l,u[l]),this.animationValues&&(this.animationValues[l]=u[l]);a.scheduleRender()}getProjectionStyles(a){var s,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return HM;const u={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=kc(a==null?void 0:a.pointerEvents)||"",u.transform=l?l(this.latestValues,""):"none",u;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=kc(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!yr(this.latestValues)&&(m.transform=l?l({},""):"none",this.hasProjected=!1),m}const d=p.animationValues||p.latestValues;this.applyTransformsToTarget(),u.transform=FM(this.projectionDeltaWithTransform,this.treeScale,d),l&&(u.transform=l(d,u.transform));const{x:h,y:f}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,p.animationValues?u.opacity=p===this?(c=(s=d.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=p===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in cu){if(d[m]===void 0)continue;const{correct:S,applyTo:v}=cu[m],g=u.transform==="none"?d[m]:S(d[m],p);if(v){const y=v.length;for(let C=0;C<y;C++)u[v[C]]=g}else u[m]=g}return this.options.layoutId&&(u.pointerEvents=p===this?kc(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(Om),this.root.sharedNodes.clear()}}}function GM(t){t.updateLayout()}function JM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?yt(p=>{const d=a?n.measuredBox[p]:n.layoutBox[p],h=pt(d);d.min=r[p].min,d.max=d.min+h}):W0(o,n.layoutBox,r)&&yt(p=>{const d=a?n.measuredBox[p]:n.layoutBox[p],h=pt(r[p]);d.max=d.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+h)});const s=ni();Ko(s,r,n.layoutBox);const c=ni();a?Ko(c,t.applyTransform(i,!0),n.measuredBox):Ko(c,r,n.layoutBox);const u=!V0(s);let l=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:d,layout:h}=p;if(d&&h){const f=he();Go(f,n.layoutBox,d.layoutBox);const m=he();Go(m,r,h.layoutBox),q0(f,m)||(l=!0),p.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=f,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:s,hasLayoutChanged:u,hasRelativeTargetChanged:l})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function QM(t){No&&Sr.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function XM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function YM(t){t.clearSnapshot()}function Om(t){t.clearMeasurements()}function ZM(t){t.isLayoutDirty=!1}function ek(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function xm(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function tk(t){t.resolveTargetDelta()}function nk(t){t.calcProjection()}function rk(t){t.resetSkewAndRotation()}function ik(t){t.removeLeadSnapshot()}function Nm(t,e,n){t.translate=se(e.translate,0,n),t.scale=se(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function zm(t,e,n,r){t.min=se(e.min,n.min,r),t.max=se(e.max,n.max,r)}function sk(t,e,n,r){zm(t.x,e.x,n.x,r),zm(t.y,e.y,n.y,r)}function ok(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ak={duration:.45,ease:[.4,0,.1,1]},jm=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Lm=jm("applewebkit/")&&!jm("chrome/")?Math.round:We;function Bm(t){t.min=Lm(t.min),t.max=Lm(t.max)}function ck(t){Bm(t.x),Bm(t.y)}function W0(t,e,n){return t==="position"||t==="preserve-aspect"&&!uM(km(e),km(n),.2)}function uk(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const lk=$0({attachResizeListener:(t,e)=>rn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Np={current:void 0},H0=$0({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Np.current){const t=new lk({});t.mount(window),t.setOptions({layoutScroll:!0}),Np.current=t}return Np.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),pk={pan:{Feature:TM},drag:{Feature:EM,ProjectionNode:H0,MeasureLayout:L0}};function Fm(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(o,a)=>{if(o.pointerType==="touch"||M0())return;const s=t.getProps();t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",e);const c=s[r];c&&X.postRender(()=>c(o,a))};return un(t.current,n,i,{passive:!t.getProps()[r]})}class dk extends Gn{mount(){this.unmount=cn(Fm(this.node,!0),Fm(this.node,!1))}unmount(){}}class hk extends Gn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cn(rn(this.node.current,"focus",()=>this.onFocus()),rn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const K0=(t,e)=>e?t===e?!0:K0(t,e.parentElement):!1;function zp(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Du(n))}class fk extends Gn{constructor(){super(...arguments),this.removeStartListeners=We,this.removeEndListeners=We,this.removeAccessibleListeners=We,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=un(window,"pointerup",(s,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:l,globalTapTarget:p}=this.node.getProps(),d=!p&&!K0(this.node.current,s.target)?l:u;d&&X.update(()=>d(s,c))},{passive:!(r.onTap||r.onPointerUp)}),a=un(window,"pointercancel",(s,c)=>this.cancelPress(s,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=cn(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=s=>{s.key!=="Enter"||!this.checkPressEnd()||zp("up",(c,u)=>{const{onTap:l}=this.node.getProps();l&&X.postRender(()=>l(c,u))})};this.removeEndListeners(),this.removeEndListeners=rn(this.node.current,"keyup",a),zp("down",(s,c)=>{this.startPress(s,c)})},n=rn(this.node.current,"keydown",e),r=()=>{this.isPressing&&zp("cancel",(o,a)=>this.cancelPress(o,a))},i=rn(this.node.current,"blur",r);this.removeAccessibleListeners=cn(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&X.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!M0()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&X.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=un(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=rn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=cn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const dh=new WeakMap,jp=new WeakMap,vk=t=>{const e=dh.get(t.target);e&&e(t)},gk=t=>{t.forEach(vk)};function mk({root:t,...e}){const n=t||document;jp.has(n)||jp.set(n,{});const r=jp.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(gk,{root:t,...e})),r[i]}function yk(t,e,n){const r=mk(e);return dh.set(t,n),r.observe(t),()=>{dh.delete(t),r.unobserve(t)}}const Sk={some:0,all:1};class Ck extends Gn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Sk[i]},s=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:l,onViewportLeave:p}=this.node.getProps(),d=u?l:p;d&&d(c)};return yk(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Pk(e,n))&&this.startObserver()}unmount(){}}function Pk({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Rk={inView:{Feature:Ck},tap:{Feature:fk},focus:{Feature:hk},hover:{Feature:dk}},wk={layout:{ProjectionNode:H0,MeasureLayout:L0}},Ff=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),xu=E.createContext({}),Vf=typeof window<"u",G0=Vf?E.useLayoutEffect:E.useEffect,J0=E.createContext({strict:!1});function Ek(t,e,n,r,i){var o,a;const{visualElement:s}=E.useContext(xu),c=E.useContext(J0),u=E.useContext(Ou),l=E.useContext(Ff).reducedMotion,p=E.useRef();r=r||c.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:s,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:l}));const d=p.current,h=E.useContext(j0);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&Tk(p.current,n,i,h);const f=E.useRef(!1);E.useInsertionEffect(()=>{d&&f.current&&d.update(n,u)});const m=n[C0],S=E.useRef(!!m&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,m))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,m)));return G0(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),Bf.render(d.render),S.current&&d.animationState&&d.animationState.animateChanges())}),E.useEffect(()=>{d&&(!S.current&&d.animationState&&d.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,m)}),S.current=!1))}),d}function Tk(t,e,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:c,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Q0(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||s&&ti(s),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:u})}function Q0(t){if(t)return t.options.allowProjection!==!1?t.projection:Q0(t.parent)}function Ik(t,e,n){return E.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ti(n)&&(n.current=r))},[e])}function Nu(t){return Mu(t.animate)||yf.some(e=>ha(t[e]))}function X0(t){return!!(Nu(t)||t.variants)}function Ak(t,e){if(Nu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ha(n)?n:void 0,animate:ha(r)?r:void 0}}return t.inherit!==!1?e:{}}function _k(t){const{initial:e,animate:n}=Ak(t,E.useContext(xu));return E.useMemo(()=>({initial:e,animate:n}),[Vm(e),Vm(n)])}function Vm(t){return Array.isArray(t)?t.join(" "):t}const qm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ci={};for(const t in qm)Ci[t]={isEnabled:e=>qm[t].some(n=>!!e[n])};function Mk(t){for(const e in t)Ci[e]={...Ci[e],...t[e]}}const kk=Symbol.for("motionComponentSymbol");function bk({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&Mk(t);function o(s,c){let u;const l={...E.useContext(Ff),...s,layoutId:Dk(s)},{isStatic:p}=l,d=_k(s),h=r(s,p);if(!p&&Vf){Ok();const f=xk(l);u=f.MeasureLayout,d.visualElement=Ek(i,h,l,e,f.ProjectionNode)}return T.jsxs(xu.Provider,{value:d,children:[u&&d.visualElement?T.jsx(u,{visualElement:d.visualElement,...l}):null,n(i,s,Ik(h,d.visualElement,c),h,p,d.visualElement)]})}const a=E.forwardRef(o);return a[kk]=i,a}function Dk({layoutId:t}){const e=E.useContext(Lf).id;return e&&t!==void 0?e+"-"+t:t}function Ok(t,e){E.useContext(J0).strict}function xk(t){const{drag:e,layout:n}=Ci;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Nk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qf(t){return typeof t!="string"||t.includes("-")?!1:!!(Nk.indexOf(t)>-1||/[A-Z]/u.test(t))}function Y0(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const Z0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ew(t,e,n,r){Y0(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Z0.has(i)?i:jf(i),e.attrs[i])}function tw(t,{layout:e,layoutId:n}){return zr.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!cu[t]||t==="opacity")}function Uf(t,e,n){var r;const{style:i}=t,o={};for(const a in i)($e(i[a])||e.style&&$e(e.style[a])||tw(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[a]=i[a]);return o}function nw(t,e,n){const r=Uf(t,e,n);for(const i in t)if($e(t[i])||$e(e[i])){const o=Ta.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function $f(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}function zk({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const a={latestValues:jk(r,i,o,t),renderState:e()};return n&&(a.mount=s=>n(r,s,a)),a}const rw=t=>(e,n)=>{const r=E.useContext(xu),i=E.useContext(Ou),o=()=>zk(t,e,r,i);return n?o():$f(o)};function jk(t,e,n,r){const i={},o=r(t,{});for(const d in o)i[d]=kc(o[d]);let{initial:a,animate:s}=t;const c=Nu(t),u=X0(t);e&&u&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),s===void 0&&(s=e.animate));let l=n?n.initial===!1:!1;l=l||a===!1;const p=l?s:a;if(p&&typeof p!="boolean"&&!Mu(p)){const d=Array.isArray(p)?p:[p];for(let h=0;h<d.length;h++){const f=gf(t,d[h]);if(f){const{transitionEnd:m,transition:S,...v}=f;for(const g in v){let y=v[g];if(Array.isArray(y)){const C=l?y.length-1:0;y=y[C]}y!==null&&(i[g]=y)}for(const g in m)i[g]=m[g]}}}return i}const Wf=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),iw=()=>({...Wf(),attrs:{}}),sw=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Lk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Bk=Ta.length;function Fk(t,e,n){let r="",i=!0;for(let o=0;o<Bk;o++){const a=Ta[o],s=t[a];if(s===void 0)continue;let c=!0;if(typeof s=="number"?c=s===(a.startsWith("scale")?1:0):c=parseFloat(s)===0,!c||n){const u=sw(s,If[a]);if(!c){i=!1;const l=Lk[a]||a;r+=`${l}(${u}) `}n&&(e[a]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Hf(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let a=!1,s=!1;for(const c in e){const u=e[c];if(zr.has(c)){a=!0;continue}else if(JR(c)){i[c]=u;continue}else{const l=sw(u,If[c]);c.startsWith("origin")?(s=!0,o[c]=l):r[c]=l}}if(e.transform||(a||n?r.transform=Fk(e,t.transform,n):r.transform&&(r.transform="none")),s){const{originX:c="50%",originY:u="50%",originZ:l=0}=o;r.transformOrigin=`${c} ${u} ${l}`}}function Um(t,e,n){return typeof t=="string"?t:z.transform(e+n*t)}function Vk(t,e,n){const r=Um(e,t.x,t.width),i=Um(n,t.y,t.height);return`${r} ${i}`}const qk={offset:"stroke-dashoffset",array:"stroke-dasharray"},Uk={offset:"strokeDashoffset",array:"strokeDasharray"};function $k(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?qk:Uk;t[o.offset]=z.transform(-r);const a=z.transform(e),s=z.transform(n);t[o.array]=`${a} ${s}`}function Kf(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:a,pathSpacing:s=1,pathOffset:c=0,...u},l,p){if(Hf(t,u,p),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h,dimensions:f}=t;d.transform&&(f&&(h.transform=d.transform),delete d.transform),f&&(i!==void 0||o!==void 0||h.transform)&&(h.transformOrigin=Vk(f,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),a!==void 0&&$k(d,a,s,c,!1)}const Gf=t=>typeof t=="string"&&t.toLowerCase()==="svg",Wk={useVisualState:rw({scrapeMotionValuesFromProps:nw,createRenderState:iw,onMount:(t,e,{renderState:n,latestValues:r})=>{X.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),X.render(()=>{Kf(n,r,Gf(e.tagName),t.transformTemplate),ew(e,n)})}})},Hk={useVisualState:rw({scrapeMotionValuesFromProps:Uf,createRenderState:Wf})};function ow(t,e,n){for(const r in e)!$e(e[r])&&!tw(r,n)&&(t[r]=e[r])}function Kk({transformTemplate:t},e){return E.useMemo(()=>{const n=Wf();return Hf(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Gk(t,e){const n=t.style||{},r={};return ow(r,n,t),Object.assign(r,Kk(t,e)),r}function Jk(t,e){const n={},r=Gk(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Qk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function uu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Qk.has(t)}let aw=t=>!uu(t);function Xk(t){t&&(aw=e=>e.startsWith("on")?!uu(e):t(e))}try{Xk(require("@emotion/is-prop-valid").default)}catch{}function Yk(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(aw(i)||n===!0&&uu(i)||!e&&!uu(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Zk(t,e,n,r){const i=E.useMemo(()=>{const o=iw();return Kf(o,e,Gf(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};ow(o,t.style,t),i.style={...o,...i.style}}return i}function eb(t=!1){return(n,r,i,{latestValues:o},a)=>{const c=(qf(n)?Zk:Jk)(r,o,a,n),u=Yk(r,typeof n=="string",t),l=n!==E.Fragment?{...u,...c,ref:i}:{},{children:p}=r,d=E.useMemo(()=>$e(p)?p.get():p,[p]);return E.createElement(n,{...l,children:d})}}function tb(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...qf(r)?Wk:Hk,preloadedFeatures:t,useRender:eb(i),createVisualElement:e,Component:r};return bk(a)}}const hh={current:null},cw={current:!1};function nb(){if(cw.current=!0,!!Vf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>hh.current=t.matches;t.addListener(e),e()}else hh.current=!1}function rb(t,e,n){for(const r in e){const i=e[r],o=n[r];if($e(i))t.addValue(r,i);else if($e(o))t.addValue(r,ga(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,ga(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const $m=new WeakMap,ib=[...YR,Fe,Un],sb=t=>ib.find(XR(t)),Wm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ob{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=Gt.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,X.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!o,this.isControllingVariants=Nu(n),this.isVariantNode=X0(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:l,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const d in p){const h=p[d];c[d]!==void 0&&$e(h)&&h.set(c[d],!1)}}mount(e){this.current=e,$m.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),cw.current||nb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hh.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$m.delete(this.current),this.projection&&this.projection.unmount(),qn(this.notifyUpdate),qn(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=zr.has(e),i=n.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&X.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ci){const n=Ci[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):he()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Wm.length;r++){const i=Wm[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=e[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=rb(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ga(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(KR(i)||HR(i))?i=parseFloat(i):!sb(i)&&Un.test(n)&&(i=o0(e,n)),this.setBaseTarget(e,$e(i)?i.get():i)),$e(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=gf(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!$e(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new zf),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class uw extends ob{constructor(){super(...arguments),this.KeyframeResolver=a0}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function ab(t){return window.getComputedStyle(t)}class cb extends uw{constructor(){super(...arguments),this.type="html",this.renderInstance=Y0}readValueFromInstance(e,n){if(zr.has(n)){const r=Af(n);return r&&r.default||0}else{const r=ab(e),i=(JR(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return N0(e,n)}build(e,n,r){Hf(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Uf(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;$e(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class ub extends uw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=he}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(zr.has(n)){const r=Af(n);return r&&r.default||0}return n=Z0.has(n)?n:jf(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return nw(e,n,r)}build(e,n,r){Kf(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){ew(e,n,r,i)}mount(e){this.isSVGTag=Gf(e.tagName),super.mount(e)}}const lb=(t,e)=>qf(t)?new ub(e):new cb(e,{allowProjection:t!==E.Fragment}),pb=tb({...eM,...Rk,...pk,...wk},lb),Ot=YI(pb);class db extends E.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function hb({children:t,isPresent:e}){const n=E.useId(),r=E.useRef(null),i=E.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=E.useContext(Ff);return E.useInsertionEffect(()=>{const{width:a,height:s,top:c,left:u}=i.current;if(e||!r.current||!a||!s)return;r.current.dataset.motionPopId=n;const l=document.createElement("style");return o&&(l.nonce=o),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${s}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[e]),T.jsx(db,{isPresent:e,childRef:r,sizeRef:i,children:E.cloneElement(t,{ref:r})})}const fb=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a})=>{const s=$f(vb),c=E.useId(),u=E.useCallback(p=>{s.set(p,!0);for(const d of s.values())if(!d)return;r&&r()},[s,r]),l=E.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:u,register:p=>(s.set(p,!1),()=>s.delete(p))}),o?[Math.random(),u]:[n,u]);return E.useMemo(()=>{s.forEach((p,d)=>s.set(d,!1))},[n]),E.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),a==="popLayout"&&(t=T.jsx(hb,{isPresent:n,children:t})),T.jsx(Ou.Provider,{value:l,children:t})};function vb(){return new Map}const dc=t=>t.key||"";function Hm(t){const e=[];return E.Children.forEach(t,n=>{E.isValidElement(n)&&e.push(n)}),e}const lw=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const s=E.useMemo(()=>Hm(t),[t]),c=s.map(dc),u=E.useRef(!0),l=E.useRef(s),p=$f(()=>new Map),[d,h]=E.useState(s),[f,m]=E.useState(s);G0(()=>{u.current=!1,l.current=s;for(let g=0;g<f.length;g++){const y=dc(f[g]);c.includes(y)?p.delete(y):p.get(y)!==!0&&p.set(y,!1)}},[f,c.length,c.join("-")]);const S=[];if(s!==d){let g=[...s];for(let y=0;y<f.length;y++){const C=f[y],P=dc(C);c.includes(P)||(g.splice(y,0,C),S.push(C))}a==="wait"&&S.length&&(g=S),m(Hm(g)),h(s);return}const{forceRender:v}=E.useContext(Lf);return T.jsx(T.Fragment,{children:f.map(g=>{const y=dc(g),C=s===f||c.includes(y),P=()=>{if(p.has(y))p.set(y,!0);else return;let w=!0;p.forEach(I=>{I||(w=!1)}),w&&(v==null||v(),m(l.current),i&&i())};return T.jsx(fb,{isPresent:C,initial:!u.current||r?void 0:!1,custom:C?void 0:n,presenceAffectsLayout:o,mode:a,onExitComplete:C?void 0:P,children:g},y)})})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Jn=(t,e)=>{const n=E.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:s="",children:c,...u},l)=>E.createElement("svg",{ref:l,...gb,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${mb(t)}`,s].join(" "),...u},[...e.map(([p,d])=>E.createElement(p,d)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=Jn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=Jn("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=Jn("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=Jn("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=Jn("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=Jn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=Jn("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=Jn("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Tb=({isListening:t,isSpeaking:e,isTranslationMode:n,onToggleListening:r})=>{const i=E.useRef(null),o=E.useRef(null),a=E.useRef(null),s=E.useRef(),c=E.useRef(null),u=E.useRef("#FF3B84"),l=E.useRef(0),p=E.useRef(!1),d=E.useRef(Date.now()*.001),h=E.useRef(0),f=E.useRef(null),m=E.useRef(0),S=100,v=1500,g=1e3,y="#FF3B84",C="#3B82F6",P=R=>R<.5?4*R*R*R:1-Math.pow(-2*R+2,3)/2,w=E.useCallback((R,A,O)=>{const F={r:parseInt(R.slice(1,3),16),g:parseInt(R.slice(3,5),16),b:parseInt(R.slice(5,7),16)},J={r:parseInt(A.slice(1,3),16),g:parseInt(A.slice(3,5),16),b:parseInt(A.slice(5,7),16)},G=P(O),Ke=Math.round(F.r+(J.r-F.r)*G),It=Math.round(F.g+(J.g-F.g)*G),Se=Math.round(F.b+(J.b-F.b)*G);return`#${Ke.toString(16).padStart(2,"0")}${It.toString(16).padStart(2,"0")}${Se.toString(16).padStart(2,"0")}`},[]),I=E.useCallback((R,A,O)=>{const F=new Uint8Array(R.length);for(let J=0;J<R.length;J++)F[J]=R[J]+(A[J]-R[J])*O;return F},[]);return E.useEffect(()=>((async()=>{if(o.current||(o.current=new AudioContext,a.current=o.current.createAnalyser(),a.current.fftSize=256),t&&!e)try{c.current=await navigator.mediaDevices.getUserMedia({audio:!0}),o.current.createMediaStreamSource(c.current).connect(a.current)}catch(A){console.error("Error accessing microphone:",A)}else c.current&&(c.current.getTracks().forEach(A=>A.stop()),c.current=null)})(),m.current=0,()=>{c.current&&c.current.getTracks().forEach(A=>A.stop())}),[t,e]),E.useEffect(()=>{p.current||(l.current=Date.now(),p.current=!0,u.current=n?y:C)},[n]),E.useEffect(()=>{var G;const R=i.current;if(!R)return;const A=R.getContext("2d");if(!A)return;const O=n?C:y,F=((G=a.current)==null?void 0:G.frequencyBinCount)||128;return f.current||(f.current=new Uint8Array(F).fill(128)),(()=>{if(!a.current)return;const Ke=new Uint8Array(F),It=new Uint8Array(F),Se=()=>{s.current=requestAnimationFrame(Se);const re=Date.now()-l.current,k=Math.min(re/v,1);k===1&&(p.current=!1);const x=w(u.current,O,k),L=`${x}33`;n||e?m.current=Math.min(m.current+1/(g/16),1):m.current=Math.max(m.current-1/(g/16),0),t&&!e&&a.current.getByteFrequencyData(Ke);const Y=Date.now()*.001,ce=Y-d.current;h.current+=ce*(e?3:2),d.current=Y;const yn=e?.7:.5;for(let _t=0;_t<F;_t++){const Sn=_t/F,Fa=Math.sin(h.current+Sn*Math.PI*4)*yn;It[_t]=128+Fa*64}const ft=I(Ke,It,m.current);f.current=ft,A.clearRect(0,0,R.width,R.height);const vt=R.width/2,Oe=R.height/2,At=64,Oi=A.createRadialGradient(vt,Oe,S-20,vt,Oe,S+20);Oi.addColorStop(0,L),Oi.addColorStop(1,"rgba(0, 0, 0, 0)"),A.fillStyle=Oi,A.fillRect(0,0,R.width,R.height);for(let _t=0;_t<At;_t++){const Sn=_t*2*Math.PI/At,Ql=(ft[Math.floor(_t/At*F)]||0)/255*30,xi=S-10,Va=xi+Ql,qa=vt+xi*Math.cos(Sn),Ua=Oe+xi*Math.sin(Sn),$a=vt+Va*Math.cos(Sn),Wa=Oe+Va*Math.sin(Sn),Ni=A.createLinearGradient(qa,Ua,$a,Wa);Ni.addColorStop(0,x),Ni.addColorStop(1,`${x}80`),A.beginPath(),A.moveTo(qa,Ua),A.lineTo($a,Wa),A.strokeStyle=Ni,A.lineWidth=2*Math.PI*S/At*.8,A.lineCap="round",A.stroke()}A.beginPath(),A.arc(vt,Oe,S-15,0,2*Math.PI),A.strokeStyle=x,A.lineWidth=2,A.stroke(),A.beginPath(),A.arc(vt,Oe,S-15,0,2*Math.PI),A.strokeStyle=L,A.lineWidth=4,A.stroke()};Se()})(),()=>{s.current&&cancelAnimationFrame(s.current)}},[t,e,n,w,I]),T.jsx(Ot.div,{className:"relative cursor-pointer group",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,children:T.jsxs(Ot.div,{initial:!1,animate:{scale:n?[1,1.05,1]:1,transition:{duration:.3,times:[0,.5,1],ease:"easeInOut"}},className:"relative",children:[T.jsx("canvas",{ref:i,className:"w-[300px] h-[300px] mx-auto",width:300,height:300}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:T.jsx(Ot.div,{className:"opacity-0 group-hover:opacity-100 transition-opacity",initial:!1,animate:{scale:t?1.2:1},transition:{duration:.2},children:t&&!e?T.jsx(wb,{className:"w-6 h-6 text-white/80"}):T.jsx(Cb,{className:"w-6 h-6 text-white/80"})})})]})})},fh=[{code:"en-US",name:"English",flag:"us"},{code:"es-ES",name:"Spanish",flag:"es"},{code:"fr-FR",name:"French",flag:"fr"},{code:"de-DE",name:"German",flag:"de"},{code:"it-IT",name:"Italian",flag:"it"},{code:"pt-PT",name:"Portuguese",flag:"pt"},{code:"ru-RU",name:"Russian",flag:"ru"},{code:"zh-CN",name:"Chinese",flag:"cn"},{code:"ja-JP",name:"Japanese",flag:"jp"},{code:"ko-KR",name:"Korean",flag:"kr"}],Km=({languageCode:t,className:e=""})=>{const n=fh.find(r=>r.code===t);return n?T.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[T.jsx("img",{src:`https://flagcdn.com/24x18/${n.flag}.png`,alt:`${n.name} flag`,className:"w-6 h-4 object-cover rounded"}),T.jsx("span",{className:"text-sm text-gray-400",children:n.name})]}):null};function Ib({transcript:t,translation:e,sourceLanguage:n,targetLanguage:r,onRepeatTranslation:i,isRepeating:o=!1}){return T.jsxs("div",{className:"w-full space-y-4",children:[T.jsxs("div",{className:"glass-panel p-6",children:[T.jsxs("div",{className:"flex items-center justify-between mb-4",children:[T.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Original"}),T.jsx(Km,{languageCode:n})]}),T.jsx("p",{className:"text-text-secondary",children:t||"Waiting for speech..."})]}),T.jsxs("div",{className:"glass-panel p-6",children:[T.jsxs("div",{className:"flex items-center justify-between mb-4",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Translation"}),e&&T.jsx("button",{onClick:i,disabled:o,className:`p-2 rounded-full transition-all ${o?"bg-primary/20 text-primary animate-pulse cursor-wait":"hover:bg-surface/80 text-text-secondary hover:text-text-primary"}`,title:"Repeat translation",children:T.jsx(Rb,{className:"w-4 h-4"})})]}),T.jsx(Km,{languageCode:r})]}),T.jsx("p",{className:"text-text-secondary",children:e||"Translation will appear here..."})]})]})}const dw=E.createContext(void 0);function hw({children:t}){const[e,n]=E.useState(()=>{const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});E.useEffect(()=>{document.documentElement.classList.toggle("dark",e==="dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")};return T.jsx(dw.Provider,{value:{theme:e,toggleTheme:r},children:t})}function Ab(){const t=E.useContext(dw);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const _b=()=>{const{theme:t,toggleTheme:e}=Ab();return T.jsx("button",{onClick:e,className:"p-3 rounded-full bg-surface-40 hover:bg-surface-60 backdrop-blur-md border border-white/5 transition-all duration-200","aria-label":"Toggle theme",children:t==="dark"?T.jsx(Eb,{className:"w-5 h-5 text-[rgb(var(--primary))]"}):T.jsx(Pb,{className:"w-5 h-5 text-[rgb(var(--primary))]"})})};function Gm({value:t,onChange:e,label:n}){const[r,i]=E.useState(!1),o=E.useRef(null),a=fh.find(s=>s.code===t);return E.useEffect(()=>{const s=c=>{o.current&&!o.current.contains(c.target)&&i(!1)};return r&&document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[r]),T.jsxs("div",{className:"flex flex-col relative",ref:o,children:[T.jsx("label",{className:"text-sm text-text-secondary mb-1",children:n}),T.jsxs("button",{type:"button",onClick:()=>i(!r),className:"w-full bg-surface/40 text-text-primary border border-white/5 rounded-lg pl-12 pr-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[rgb(var(--primary))] min-w-[200px] backdrop-blur-sm flex items-center justify-between",children:[T.jsx("span",{children:a==null?void 0:a.name}),T.jsx(yb,{className:`w-4 h-4 text-text-secondary transition-transform duration-200 ${r?"rotate-180":""}`}),a&&T.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:T.jsx("img",{src:`https://flagcdn.com/24x18/${a.flag}.png`,alt:`${a.name} flag`,className:"w-6 h-4 object-cover rounded"})})]}),r&&T.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-surface/95 backdrop-blur-md border border-white/5 rounded-lg shadow-lg overflow-hidden z-50",children:fh.map(s=>T.jsxs("button",{onClick:()=>{e(s.code),i(!1)},className:`w-full px-3 py-2 flex items-center gap-3 hover:bg-surface/80 transition-colors ${s.code===t?"bg-surface/60":""}`,children:[T.jsx("img",{src:`https://flagcdn.com/24x18/${s.flag}.png`,alt:`${s.name} flag`,className:"w-6 h-4 object-cover rounded"}),T.jsx("span",{className:"text-text-primary text-sm",children:s.name})]},s.code))})]})}const Jm={"en-US":[{name:"en-US-JennyMultilingualV2Neural",gender:"Female",styles:["chat","cheerful","empathetic"]},{name:"en-US-AriaNeural",gender:"Female",styles:["newscast","customerservice","narration"]},{name:"en-US-GuyNeural",gender:"Male",styles:["newscast","angry","cheerful"]},{name:"en-US-DavisNeural",gender:"Male",styles:["chat","angry","cheerful"]}],"es-ES":[{name:"es-ES-ElviraNeural",gender:"Female",styles:["chat","cheerful"]},{name:"es-ES-AlvaroNeural",gender:"Male",styles:["chat","cheerful"]},{name:"es-ES-TeresaNeural",gender:"Female",styles:["chat","cheerful"]}],"fr-FR":[{name:"fr-FR-DeniseNeural",gender:"Female",styles:["chat","cheerful"]},{name:"fr-FR-HenriNeural",gender:"Male",styles:["chat","cheerful"]},{name:"fr-FR-AlainNeural",gender:"Male",styles:["chat","cheerful"]}],"de-DE":[{name:"de-DE-KatjaNeural",gender:"Female",styles:["chat","cheerful"]},{name:"de-DE-ConradNeural",gender:"Male",styles:["chat","cheerful"]},{name:"de-DE-AmalaNeural",gender:"Female",styles:["chat","cheerful"]}],"it-IT":[{name:"it-IT-ElsaNeural",gender:"Female",styles:["chat","cheerful"]},{name:"it-IT-DiegoNeural",gender:"Male",styles:["chat","cheerful"]},{name:"it-IT-IsabellaNeural",gender:"Female",styles:["chat","cheerful"]}]};function fw(t){return Jm[t]||Jm["en-US"]}function vw(t){return fw(t)[0]}function Mb(t){const e={excited:/(!{2,}|wow|amazing|fantastic|awesome)/i,sad:/(sad|sorry|unfortunately|regret)/i,angry:/(angry|mad|furious|upset)/i,cheerful:/(happy|glad|great|wonderful)/i,empathetic:/(understand|feel for|care|support)/i};for(const[n,r]of Object.entries(e))if(r.test(t))return n;return"chat"}const kb={"en-US":[{name:"friendly",style:"friendly",description:"Warm and welcoming"},{name:"chat",style:"chat",description:"Casual and relaxed"},{name:"newscast",style:"newscast",description:"Professional news anchor"},{name:"customerservice",style:"customerservice",description:"Professional and helpful"}],"es-ES":[{name:"friendly",style:"friendly",description:"Warm and welcoming"},{name:"chat",style:"chat",description:"Casual and relaxed"}],"fr-FR":[{name:"friendly",style:"friendly",description:"Warm and welcoming"},{name:"chat",style:"chat",description:"Casual and relaxed"}],"de-DE":[{name:"friendly",style:"friendly",description:"Warm and welcoming"},{name:"chat",style:"chat",description:"Casual and relaxed"}],"it-IT":[{name:"friendly",style:"friendly",description:"Warm and welcoming"},{name:"chat",style:"chat",description:"Casual and relaxed"}]},bb=({language:t,onVoiceChange:e,onStyleChange:n,selectedVoice:r,selectedStyle:i})=>{const[o,a]=E.useState(!1),s=E.useRef(null),c=E.useRef(null),u=fw(t),l=kb[t]||[];E.useEffect(()=>{const d=f=>{s.current&&!s.current.contains(f.target)&&a(!1)},h=f=>{var m;f.key==="Escape"&&(a(!1),(m=c.current)==null||m.focus())};return o&&(document.addEventListener("mousedown",d),document.addEventListener("keydown",h)),()=>{document.removeEventListener("mousedown",d),document.removeEventListener("keydown",h)}},[o]);const p=()=>{a(!o)};return T.jsxs("div",{className:"relative",children:[T.jsx("button",{ref:c,onClick:p,className:"p-2 rounded-full hover:bg-surface/80 transition-colors","aria-label":"Voice Settings","aria-expanded":o,"aria-controls":"voice-settings-dialog",children:T.jsx(pw,{className:"w-5 h-5 text-text-secondary"})}),o&&T.jsx("div",{ref:s,id:"voice-settings-dialog",role:"dialog","aria-label":"Voice Settings",className:"absolute right-0 top-full mt-2 p-4 bg-surface/80 backdrop-blur-md border border-white/5 rounded-xl shadow-lg min-w-[300px] z-50",children:T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"voice-select",className:"block text-sm font-medium text-text-secondary mb-1",children:"Voice"}),T.jsx("select",{id:"voice-select",value:r,onChange:d=>e(d.target.value),className:"w-full bg-surface/40 text-text-primary border border-white/5 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[rgb(var(--primary))]",children:u.map(d=>T.jsxs("option",{value:d.name,children:[d.name," (",d.gender,")"]},d.name))})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"style-select",className:"block text-sm font-medium text-text-secondary mb-1",children:"Speaking Style"}),T.jsx("select",{id:"style-select",value:i,onChange:d=>n(d.target.value),className:"w-full bg-surface/40 text-text-primary border border-white/5 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-[rgb(var(--primary))]",children:l.map(d=>T.jsxs("option",{value:d.style,children:[d.name," - ",d.description]},d.style))})]}),T.jsx("div",{className:"text-xs text-text-secondary mt-2",children:T.jsx("p",{children:"Voice settings will be applied to the next translation."})})]})})]})},gw=({onSwap:t,disabled:e=!1})=>T.jsx(Ot.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:t,disabled:e,className:"p-2 rounded-full hover:bg-surface/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Swap languages",children:T.jsxs("svg",{className:"w-5 h-5 text-text-secondary",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M7 16V4M7 4L3 8M7 4L11 8"}),T.jsx("path",{d:"M17 8V20M17 20L21 16M17 20L13 16"})]})}),Db=({sourceLanguage:t,targetLanguage:e,onSourceLanguageChange:n,onTargetLanguageChange:r,selectedVoice:i,selectedStyle:o,onVoiceChange:a,onStyleChange:s})=>{const[c,u]=E.useState(!1),l=E.useRef(null),p=E.useRef(null),d=()=>{const h=t;n(e),r(h)};return E.useEffect(()=>{const h=f=>{l.current&&!l.current.contains(f.target)&&p.current&&!p.current.contains(f.target)&&u(!1)};return c&&document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[c]),T.jsxs("div",{className:"relative",children:[T.jsx(Ot.button,{ref:p,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(!c),className:"p-3 rounded-full bg-surface/40 hover:bg-surface/60 backdrop-blur-md border border-white/5 transition-all duration-200",children:T.jsx(pw,{className:"w-5 h-5 text-[rgb(var(--primary))]"})}),T.jsx(lw,{children:c&&T.jsxs(T.Fragment,{children:[T.jsx(Ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40"}),T.jsx(Ot.div,{ref:l,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},onClick:h=>h.stopPropagation(),className:"absolute top-full left-0 mt-4 glass-panel p-6 min-w-[320px] z-50",children:T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"space-y-4",children:[T.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Language Settings"}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"flex-1",children:T.jsx(Gm,{value:t,onChange:n,label:"From"})}),T.jsx("div",{className:"pt-6",children:T.jsx(gw,{onSwap:d})}),T.jsx("div",{className:"flex-1",children:T.jsx(Gm,{value:e,onChange:r,label:"To"})})]})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Voice Settings"}),T.jsx(bb,{language:e,selectedVoice:i,selectedStyle:o,onVoiceChange:a,onStyleChange:s})]})]})})]})})]})},Ob=()=>T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs("div",{className:"relative",children:[T.jsx(Sb,{className:"w-8 h-8 text-[rgb(var(--primary))]"}),T.jsx("div",{className:"absolute inset-0 bg-[rgb(var(--primary))] blur-lg opacity-30 animate-pulse-slow"})]}),T.jsxs("div",{className:"flex items-baseline",children:[T.jsx("span",{className:"text-2xl font-black tracking-tight bg-gradient-to-r from-[rgb(var(--primary))] via-[rgb(var(--secondary))] to-[rgb(var(--accent))] bg-clip-text text-transparent",children:"Atlas"}),T.jsx("span",{className:"text-2xl font-black tracking-tight text-[rgb(var(--primary))]",children:"AI"})]})]});var Ut={},Lp={},zu={},Bp={},le={},Mi={},Tt={},mw={},ju={},Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.default=Nb;let hc;const xb=new Uint8Array(16);function Nb(){if(!hc&&(hc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hc(xb)}var Qn={},jr={},Bu={};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.default=void 0;var zb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Bu.default=zb;Object.defineProperty(jr,"__esModule",{value:!0});jr.default=void 0;var jb=Lb(Bu);function Lb(t){return t&&t.__esModule?t:{default:t}}function Bb(t){return typeof t=="string"&&jb.default.test(t)}var Fb=Bb;jr.default=Fb;Object.defineProperty(Qn,"__esModule",{value:!0});Qn.default=void 0;Qn.unsafeStringify=yw;var Vb=qb(jr);function qb(t){return t&&t.__esModule?t:{default:t}}const Ee=[];for(let t=0;t<256;++t)Ee.push((t+256).toString(16).slice(1));function yw(t,e=0){return Ee[t[e+0]]+Ee[t[e+1]]+Ee[t[e+2]]+Ee[t[e+3]]+"-"+Ee[t[e+4]]+Ee[t[e+5]]+"-"+Ee[t[e+6]]+Ee[t[e+7]]+"-"+Ee[t[e+8]]+Ee[t[e+9]]+"-"+Ee[t[e+10]]+Ee[t[e+11]]+Ee[t[e+12]]+Ee[t[e+13]]+Ee[t[e+14]]+Ee[t[e+15]]}function Ub(t,e=0){const n=yw(t,e);if(!(0,Vb.default)(n))throw TypeError("Stringified UUID is invalid");return n}var $b=Ub;Qn.default=$b;Object.defineProperty(ju,"__esModule",{value:!0});ju.default=void 0;var Wb=Kb(Lu),Hb=Qn;function Kb(t){return t&&t.__esModule?t:{default:t}}let Qm,Fp,Vp=0,qp=0;function Gb(t,e,n){let r=e&&n||0;const i=e||new Array(16);t=t||{};let o=t.node||Qm,a=t.clockseq!==void 0?t.clockseq:Fp;if(o==null||a==null){const d=t.random||(t.rng||Wb.default)();o==null&&(o=Qm=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=Fp=(d[6]<<8|d[7])&16383)}let s=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:qp+1;const u=s-Vp+(c-qp)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||s>Vp)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Vp=s,qp=c,Fp=a,s+=122192928e5;const l=((s&268435455)*1e4+c)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=l&255;const p=s/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=p&255,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(let d=0;d<6;++d)i[r+d]=o[d];return e||(0,Hb.unsafeStringify)(i)}var Jb=Gb;ju.default=Jb;var Fu={},$n={},_a={};Object.defineProperty(_a,"__esModule",{value:!0});_a.default=void 0;var Qb=Xb(jr);function Xb(t){return t&&t.__esModule?t:{default:t}}function Yb(t){if(!(0,Qb.default)(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var Zb=Yb;_a.default=Zb;Object.defineProperty($n,"__esModule",{value:!0});$n.URL=$n.DNS=void 0;$n.default=iD;var eD=Qn,tD=nD(_a);function nD(t){return t&&t.__esModule?t:{default:t}}function rD(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}const Sw="6ba7b810-9dad-11d1-80b4-00c04fd430c8";$n.DNS=Sw;const Cw="6ba7b811-9dad-11d1-80b4-00c04fd430c8";$n.URL=Cw;function iD(t,e,n){function r(i,o,a,s){var c;if(typeof i=="string"&&(i=rD(i)),typeof o=="string"&&(o=(0,tD.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=n(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){s=s||0;for(let l=0;l<16;++l)a[s+l]=u[l];return a}return(0,eD.unsafeStringify)(u)}try{r.name=t}catch{}return r.DNS=Sw,r.URL=Cw,r}var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.default=void 0;function sD(t){if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return oD(aD(cD(t),t.length*8))}function oD(t){const e=[],n=t.length*32,r="0123456789abcdef";for(let i=0;i<n;i+=8){const o=t[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);e.push(a)}return e}function Pw(t){return(t+64>>>9<<4)+14+1}function aD(t,e){t[e>>5]|=128<<e%32,t[Pw(e)-1]=e;let n=1732584193,r=-271733879,i=-1732584194,o=271733878;for(let a=0;a<t.length;a+=16){const s=n,c=r,u=i,l=o;n=ze(n,r,i,o,t[a],7,-680876936),o=ze(o,n,r,i,t[a+1],12,-389564586),i=ze(i,o,n,r,t[a+2],17,606105819),r=ze(r,i,o,n,t[a+3],22,-1044525330),n=ze(n,r,i,o,t[a+4],7,-176418897),o=ze(o,n,r,i,t[a+5],12,1200080426),i=ze(i,o,n,r,t[a+6],17,-1473231341),r=ze(r,i,o,n,t[a+7],22,-45705983),n=ze(n,r,i,o,t[a+8],7,1770035416),o=ze(o,n,r,i,t[a+9],12,-1958414417),i=ze(i,o,n,r,t[a+10],17,-42063),r=ze(r,i,o,n,t[a+11],22,-1990404162),n=ze(n,r,i,o,t[a+12],7,1804603682),o=ze(o,n,r,i,t[a+13],12,-40341101),i=ze(i,o,n,r,t[a+14],17,-1502002290),r=ze(r,i,o,n,t[a+15],22,1236535329),n=je(n,r,i,o,t[a+1],5,-165796510),o=je(o,n,r,i,t[a+6],9,-1069501632),i=je(i,o,n,r,t[a+11],14,643717713),r=je(r,i,o,n,t[a],20,-373897302),n=je(n,r,i,o,t[a+5],5,-701558691),o=je(o,n,r,i,t[a+10],9,38016083),i=je(i,o,n,r,t[a+15],14,-660478335),r=je(r,i,o,n,t[a+4],20,-405537848),n=je(n,r,i,o,t[a+9],5,568446438),o=je(o,n,r,i,t[a+14],9,-1019803690),i=je(i,o,n,r,t[a+3],14,-187363961),r=je(r,i,o,n,t[a+8],20,1163531501),n=je(n,r,i,o,t[a+13],5,-1444681467),o=je(o,n,r,i,t[a+2],9,-51403784),i=je(i,o,n,r,t[a+7],14,1735328473),r=je(r,i,o,n,t[a+12],20,-1926607734),n=Le(n,r,i,o,t[a+5],4,-378558),o=Le(o,n,r,i,t[a+8],11,-2022574463),i=Le(i,o,n,r,t[a+11],16,1839030562),r=Le(r,i,o,n,t[a+14],23,-35309556),n=Le(n,r,i,o,t[a+1],4,-1530992060),o=Le(o,n,r,i,t[a+4],11,1272893353),i=Le(i,o,n,r,t[a+7],16,-155497632),r=Le(r,i,o,n,t[a+10],23,-1094730640),n=Le(n,r,i,o,t[a+13],4,681279174),o=Le(o,n,r,i,t[a],11,-358537222),i=Le(i,o,n,r,t[a+3],16,-722521979),r=Le(r,i,o,n,t[a+6],23,76029189),n=Le(n,r,i,o,t[a+9],4,-640364487),o=Le(o,n,r,i,t[a+12],11,-421815835),i=Le(i,o,n,r,t[a+15],16,530742520),r=Le(r,i,o,n,t[a+2],23,-995338651),n=Be(n,r,i,o,t[a],6,-198630844),o=Be(o,n,r,i,t[a+7],10,1126891415),i=Be(i,o,n,r,t[a+14],15,-1416354905),r=Be(r,i,o,n,t[a+5],21,-57434055),n=Be(n,r,i,o,t[a+12],6,1700485571),o=Be(o,n,r,i,t[a+3],10,-1894986606),i=Be(i,o,n,r,t[a+10],15,-1051523),r=Be(r,i,o,n,t[a+1],21,-2054922799),n=Be(n,r,i,o,t[a+8],6,1873313359),o=Be(o,n,r,i,t[a+15],10,-30611744),i=Be(i,o,n,r,t[a+6],15,-1560198380),r=Be(r,i,o,n,t[a+13],21,1309151649),n=Be(n,r,i,o,t[a+4],6,-145523070),o=Be(o,n,r,i,t[a+11],10,-1120210379),i=Be(i,o,n,r,t[a+2],15,718787259),r=Be(r,i,o,n,t[a+9],21,-343485551),n=kn(n,s),r=kn(r,c),i=kn(i,u),o=kn(o,l)}return[n,r,i,o]}function cD(t){if(t.length===0)return[];const e=t.length*8,n=new Uint32Array(Pw(e));for(let r=0;r<e;r+=8)n[r>>5]|=(t[r/8]&255)<<r%32;return n}function kn(t,e){const n=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(n>>16)<<16|n&65535}function uD(t,e){return t<<e|t>>>32-e}function qu(t,e,n,r,i,o){return kn(uD(kn(kn(e,t),kn(r,o)),i),n)}function ze(t,e,n,r,i,o,a){return qu(e&n|~e&r,t,e,i,o,a)}function je(t,e,n,r,i,o,a){return qu(e&r|n&~r,t,e,i,o,a)}function Le(t,e,n,r,i,o,a){return qu(e^n^r,t,e,i,o,a)}function Be(t,e,n,r,i,o,a){return qu(n^(e|~r),t,e,i,o,a)}var lD=sD;Vu.default=lD;Object.defineProperty(Fu,"__esModule",{value:!0});Fu.default=void 0;var pD=Rw($n),dD=Rw(Vu);function Rw(t){return t&&t.__esModule?t:{default:t}}const hD=(0,pD.default)("v3",48,dD.default);var fD=hD;Fu.default=fD;var Uu={},$u={};Object.defineProperty($u,"__esModule",{value:!0});$u.default=void 0;const vD=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var gD={randomUUID:vD};$u.default=gD;Object.defineProperty(Uu,"__esModule",{value:!0});Uu.default=void 0;var Xm=ww($u),mD=ww(Lu),yD=Qn;function ww(t){return t&&t.__esModule?t:{default:t}}function SD(t,e,n){if(Xm.default.randomUUID&&!e&&!t)return Xm.default.randomUUID();t=t||{};const r=t.random||(t.rng||mD.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return(0,yD.unsafeStringify)(r)}var CD=SD;Uu.default=CD;var Wu={},Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});Hu.default=void 0;function PD(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function Up(t,e){return t<<e|t>>>32-e}function RD(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const a=unescape(encodeURIComponent(t));t=[];for(let s=0;s<a.length;++s)t.push(a.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const r=t.length/4+2,i=Math.ceil(r/16),o=new Array(i);for(let a=0;a<i;++a){const s=new Uint32Array(16);for(let c=0;c<16;++c)s[c]=t[a*64+c*4]<<24|t[a*64+c*4+1]<<16|t[a*64+c*4+2]<<8|t[a*64+c*4+3];o[a]=s}o[i-1][14]=(t.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(t.length-1)*8&4294967295;for(let a=0;a<i;++a){const s=new Uint32Array(80);for(let h=0;h<16;++h)s[h]=o[a][h];for(let h=16;h<80;++h)s[h]=Up(s[h-3]^s[h-8]^s[h-14]^s[h-16],1);let c=n[0],u=n[1],l=n[2],p=n[3],d=n[4];for(let h=0;h<80;++h){const f=Math.floor(h/20),m=Up(c,5)+PD(f,u,l,p)+d+e[f]+s[h]>>>0;d=p,p=l,l=Up(u,30)>>>0,u=c,c=m}n[0]=n[0]+c>>>0,n[1]=n[1]+u>>>0,n[2]=n[2]+l>>>0,n[3]=n[3]+p>>>0,n[4]=n[4]+d>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var wD=RD;Hu.default=wD;Object.defineProperty(Wu,"__esModule",{value:!0});Wu.default=void 0;var ED=Ew($n),TD=Ew(Hu);function Ew(t){return t&&t.__esModule?t:{default:t}}const ID=(0,ED.default)("v5",80,TD.default);var AD=ID;Wu.default=AD;var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.default=void 0;var _D="00000000-0000-0000-0000-000000000000";Ku.default=_D;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.default=void 0;var MD=kD(jr);function kD(t){return t&&t.__esModule?t:{default:t}}function bD(t){if(!(0,MD.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var DD=bD;Gu.default=DD;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a.default}});var e=l(ju),n=l(Fu),r=l(Uu),i=l(Wu),o=l(Ku),a=l(Gu),s=l(jr),c=l(Qn),u=l(_a);function l(p){return p&&p.__esModule?p:{default:p}}})(mw);Object.defineProperty(Tt,"__esModule",{value:!0});Tt.createNoDashGuid=Tt.createGuid=void 0;const OD=mw,Tw=()=>OD.v4();Tt.createGuid=Tw;const xD=()=>Tw().replace(new RegExp("-","g"),"").toUpperCase();Tt.createNoDashGuid=xD;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;const e=Tt;(function(r){r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None"})(t.EventType||(t.EventType={}));class n{constructor(i,o){this.privName=i,this.privEventId=e.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=o,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}t.PlatformEvent=n})(Mi);Object.defineProperty(le,"__esModule",{value:!0});le.AudioStreamNodeErrorEvent=le.AudioStreamNodeDetachedEvent=le.AudioStreamNodeAttachedEvent=le.AudioStreamNodeAttachingEvent=le.AudioStreamNodeEvent=le.AudioSourceErrorEvent=le.AudioSourceOffEvent=le.AudioSourceReadyEvent=le.AudioSourceInitializingEvent=le.AudioSourceEvent=void 0;const vh=Mi;class ki extends vh.PlatformEvent{constructor(e,n,r=vh.EventType.Info){super(e,r),this.privAudioSourceId=n}get audioSourceId(){return this.privAudioSourceId}}le.AudioSourceEvent=ki;class ND extends ki{constructor(e){super("AudioSourceInitializingEvent",e)}}le.AudioSourceInitializingEvent=ND;class zD extends ki{constructor(e){super("AudioSourceReadyEvent",e)}}le.AudioSourceReadyEvent=zD;class jD extends ki{constructor(e){super("AudioSourceOffEvent",e)}}le.AudioSourceOffEvent=jD;class LD extends ki{constructor(e,n){super("AudioSourceErrorEvent",e,vh.EventType.Error),this.privError=n}get error(){return this.privError}}le.AudioSourceErrorEvent=LD;class Ma extends ki{constructor(e,n,r){super(e,n),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}}le.AudioStreamNodeEvent=Ma;class BD extends Ma{constructor(e,n){super("AudioStreamNodeAttachingEvent",e,n)}}le.AudioStreamNodeAttachingEvent=BD;class FD extends Ma{constructor(e,n){super("AudioStreamNodeAttachedEvent",e,n)}}le.AudioStreamNodeAttachedEvent=FD;class VD extends Ma{constructor(e,n){super("AudioStreamNodeDetachedEvent",e,n)}}le.AudioStreamNodeDetachedEvent=VD;class qD extends Ma{constructor(e,n,r){super("AudioStreamNodeErrorEvent",e,n),this.privError=r}get error(){return this.privError}}le.AudioStreamNodeErrorEvent=qD;var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.ConnectionMessageSentEvent=ve.ConnectionMessageReceivedEvent=ve.ConnectionEstablishErrorEvent=ve.ConnectionErrorEvent=ve.ConnectionClosedEvent=ve.ConnectionEstablishedEvent=ve.ConnectionStartEvent=ve.ConnectionEvent=ve.ServiceEvent=void 0;const Dr=Mi;class UD extends Dr.PlatformEvent{constructor(e,n,r=Dr.EventType.Info){super(e,r),this.privJsonResult=n}get jsonString(){return this.privJsonResult}}ve.ServiceEvent=UD;class Xn extends Dr.PlatformEvent{constructor(e,n,r=Dr.EventType.Info){super(e,r),this.privConnectionId=n}get connectionId(){return this.privConnectionId}}ve.ConnectionEvent=Xn;class $D extends Xn{constructor(e,n,r){super("ConnectionStartEvent",e),this.privUri=n,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}}ve.ConnectionStartEvent=$D;class WD extends Xn{constructor(e){super("ConnectionEstablishedEvent",e)}}ve.ConnectionEstablishedEvent=WD;class HD extends Xn{constructor(e,n,r){super("ConnectionClosedEvent",e,Dr.EventType.Debug),this.privReason=r,this.privStatusCode=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ve.ConnectionClosedEvent=HD;class KD extends Xn{constructor(e,n,r){super("ConnectionErrorEvent",e,Dr.EventType.Debug),this.privMessage=n,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}}ve.ConnectionErrorEvent=KD;class GD extends Xn{constructor(e,n,r){super("ConnectionEstablishErrorEvent",e,Dr.EventType.Error),this.privStatusCode=n,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ve.ConnectionEstablishErrorEvent=GD;class JD extends Xn{constructor(e,n,r){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=n,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}ve.ConnectionMessageReceivedEvent=JD;class QD extends Xn{constructor(e,n,r){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=n,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}ve.ConnectionMessageSentEvent=QD;var Jf={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.ObjectDisposedError=Me.InvalidOperationError=Me.ArgumentNullError=void 0;class XD extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}Me.ArgumentNullError=XD;class YD extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}Me.InvalidOperationError=YD;class ZD extends Error{constructor(e,n){super(n),this.name=e+"ObjectDisposed",this.message=n}}Me.ObjectDisposedError=ZD;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;const e=Me,n=Tt;var r;(function(o){o[o.Text=0]="Text",o[o.Binary=1]="Binary"})(r=t.MessageType||(t.MessageType={}));class i{constructor(a,s,c,u){if(this.privBody=null,a===r.Text&&s&&typeof s!="string")throw new e.InvalidOperationError("Payload must be a string");if(a===r.Binary&&s&&!(s instanceof ArrayBuffer))throw new e.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=s,this.privHeaders=c||{},this.privId=u||n.createNoDashGuid(),this.messageType){case r.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===r.Binary)throw new e.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===r.Text)throw new e.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}t.ConnectionMessage=i})(Jf);var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.ConnectionOpenResponse=void 0;class eO{constructor(e,n){this.privStatusCode=e,this.privReason=n}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}Ju.ConnectionOpenResponse=eO;var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.DeferralMap=void 0;class tO{constructor(){this.privMap={}}add(e,n){this.privMap[e]=n}getId(e){return this.privMap[e]}complete(e,n){try{this.privMap[e].resolve(n)}catch(r){this.privMap[e].reject(r)}finally{this.privMap[e]=void 0}}}Qu.DeferralMap=tO;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});Or.SendingAgentContextMessageEvent=Or.DialogEvent=void 0;const Ym=Mi;class Iw extends Ym.PlatformEvent{constructor(e,n=Ym.EventType.Info){super(e,n)}}Or.DialogEvent=Iw;class nO extends Iw{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}Or.SendingAgentContextMessageEvent=nO;var Xu={},ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.EventSource=void 0;const rO=Me,iO=Tt;class sO{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new rO.ObjectDisposedError("EventSource");if(this.metadata)for(const n in this.metadata)n&&e.metadata&&(e.metadata[n]||(e.metadata[n]=this.metadata[n]));for(const n in this.privEventListeners)n&&this.privEventListeners[n]&&this.privEventListeners[n](e)}attach(e){const n=iO.createNoDashGuid();return this.privEventListeners[n]=e,{detach:()=>(delete this.privEventListeners[n],Promise.resolve())}}attachListener(e){return this.attach(n=>e.onEvent(n))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(n=>e.onEvent(n)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}ka.EventSource=sO;Object.defineProperty(Xu,"__esModule",{value:!0});Xu.Events=void 0;const oO=Me,aO=ka;class ma{static setEventSource(e){if(!e)throw new oO.ArgumentNullError("eventSource");ma.privInstance=e}static get instance(){return ma.privInstance}}Xu.Events=ma;ma.privInstance=new aO.EventSource;var Aw={};Object.defineProperty(Aw,"__esModule",{value:!0});var _w={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(t.ConnectionState||(t.ConnectionState={}))})(_w);var Mw={};Object.defineProperty(Mw,"__esModule",{value:!0});var kw={};Object.defineProperty(kw,"__esModule",{value:!0});var bw={};Object.defineProperty(bw,"__esModule",{value:!0});var Dw={};Object.defineProperty(Dw,"__esModule",{value:!0});var Ow={};Object.defineProperty(Ow,"__esModule",{value:!0});var xw={};Object.defineProperty(xw,"__esModule",{value:!0});var Nw={};Object.defineProperty(Nw,"__esModule",{value:!0});var zw={};Object.defineProperty(zw,"__esModule",{value:!0});var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.List=void 0;const cO=Me;class En{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const n of e)this.privList.push(n)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,n){this.throwIfDisposed(),e===0?this.privList.unshift(n):e===this.privList.length?this.privList.push(n):this.privList.splice(e,0,n),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,n){this.throwIfDisposed();const r=this.privList.splice(e,n);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[n]=e,{detach:()=>(delete this.privAddSubscriptions[n],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[n]=e,{detach:()=>(delete this.privRemoveSubscriptions[n],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[n]=e,{detach:()=>(delete this.privDisposedSubscriptions[n],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach(n=>{e.push(n)}),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let n=0;n<this.length();n++)e(this.privList[n],n)}select(e){this.throwIfDisposed();const n=[];for(let r=0;r<this.privList.length;r++)n.push(e(this.privList[r],r));return new En(n)}where(e){this.throwIfDisposed();const n=new En;for(let r=0;r<this.privList.length;r++)e(this.privList[r],r)&&n.add(this.privList[r]);return n}orderBy(e){this.throwIfDisposed();const r=this.toArray().sort(e);return new En(r)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy((n,r)=>e(r,n))}clone(){return this.throwIfDisposed(),new En(this.toArray())}concat(e){return this.throwIfDisposed(),new En(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new En(this.privList.concat(e))}isDisposed(){return this.privList==null}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new cO.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const n in e)n&&e[n]()}}ba.List=En;var Qf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0;var e;(function(s){s[s.None=0]="None",s[s.Resolved=1]="Resolved",s[s.Rejected=2]="Rejected"})(e=t.PromiseState||(t.PromiseState={}));class n{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=u)},u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=u)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}t.PromiseResult=n;class r{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,u)=>{this.privOnSetResult=c,this.privOnSetError=u}}}t.PromiseResultEventSource=r;class i{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,u)=>{this.privResolve=c,this.privReject=u})}get promise(){return this.privPromise}}t.Deferred=i;class o{constructor(){this.privState=e.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new r,this.privPromiseResult=new n(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==e.None)throw new Error("'Cannot resolve a completed promise'");this.privState=e.Resolved,this.privPromiseResultEvents.setResult(c);for(let u=0;u<this.privSuccessHandlers.length;u++)this.executeSuccessCallback(c,this.privSuccessHandlers[u],this.privErrorHandlers[u]);this.detachHandlers()}reject(c){if(this.privState!==e.None)throw new Error("'Cannot reject a completed promise'");this.privState=e.Rejected,this.privPromiseResultEvents.setError(c);for(const u of this.privErrorHandlers)this.executeErrorCallback(c,u);this.detachHandlers()}on(c,u){c==null&&(c=()=>{}),this.privState===e.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(u)):(this.privState===e.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,u):this.privState===e.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,u),this.detachHandlers())}executeSuccessCallback(c,u,l){try{u(c)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,l)}}executeErrorCallback(c,u){if(u)try{u(c)}catch(l){throw new Error(`'Unhandled callback error: ${l}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}t.Sink=o;function a(s,c,u){s.then(l=>{try{c&&c(l)}catch(p){if(u)try{if(p instanceof Error){const d=p;u(d.name+": "+d.message)}else u(p)}catch{}}},l=>{if(u)try{if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}catch{}})}t.marshalPromiseToCallbacks=a})(Qf);var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.Queue=void 0;const $p=Me,Wp=ba,Zm=Qf;var Jo;(function(t){t[t.Dequeue=0]="Dequeue",t[t.Peek=1]="Peek"})(Jo||(Jo={}));class uO{constructor(e){this.privPromiseStore=new Wp.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new Wp.List,this.privDetachables=[],this.privSubscribers=new Wp.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise(n=>n(e)))}enqueueFromPromise(e){this.throwIfDispose(),e.then(n=>{this.privList.add(n)},()=>{})}dequeue(){this.throwIfDispose();const e=new Zm.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:Jo.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new Zm.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:Jo.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(e,n){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=n,this.privIsDisposing=!0;const r=this.privSubscribers;if(r){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}for(const i of this.privDetachables)await i.detach();if(this.privPromiseStore.length()>0&&e){const i=[];return this.privPromiseStore.toArray().forEach(o=>{i.push(o)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(o=>{e(o)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(e){await this.drainAndDispose(null,e)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,n=this.privList;if(e&&n){for(;n.length()>0&&e.length()>0&&!this.privIsDisposing;){const r=e.removeFirst();if(r.type===Jo.Peek)r.deferral.resolve(n.first());else{const i=n.removeFirst();r.deferral.resolve(i)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===n&&(this.privList=n)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new $p.InvalidOperationError(this.privDisposeReason):new $p.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new $p.InvalidOperationError("Queue disposing")}}Da.Queue=uO;var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.RawWebsocketMessage=void 0;const fc=Jf,Wi=Me,lO=Tt;class pO{constructor(e,n,r){if(this.privPayload=null,!n)throw new Wi.ArgumentNullError("payload");if(e===fc.MessageType.Binary&&Object.getPrototypeOf(n).constructor.name!=="ArrayBuffer")throw new Wi.InvalidOperationError("Payload must be ArrayBuffer");if(e===fc.MessageType.Text&&typeof n!="string")throw new Wi.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=n,this.privId=r||lO.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===fc.MessageType.Binary)throw new Wi.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===fc.MessageType.Text)throw new Wi.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}Yu.RawWebsocketMessage=pO;var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.RiffPcmEncoder=void 0;class dO{constructor(e,n){this.privActualSampleRate=e,this.privDesiredSampleRate=n}encode(e){const n=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!n)return null;const r=n.length*2,i=new ArrayBuffer(r),o=new DataView(i);return this.floatTo16BitPCM(o,0,n),i}setString(e,n,r){for(let i=0;i<r.length;i++)e.setUint8(n+i,r.charCodeAt(i))}floatTo16BitPCM(e,n,r){for(let i=0;i<r.length;i++,n+=2){const o=Math.max(-1,Math.min(1,r[i]));e.setInt16(n,o<0?o*32768:o*32767,!0)}}downSampleAudioFrame(e,n,r){if(!e)return null;if(r===n||r>n)return e;const i=n/r,o=Math.round(e.length/i),a=new Float32Array(o);let s=0,c=0;for(;c<o;){const u=Math.round((c+1)*i);let l=0,p=0;for(;s<u&&s<e.length;)l+=e[s++],p++;a[c++]=l/p}return a}}Zu.RiffPcmEncoder=dO;var el={};Object.defineProperty(el,"__esModule",{value:!0});el.Stream=void 0;const ey=Me,hO=Tt,ty=Da;class fO{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||hO.createNoDashGuid(),this.privReaderQueue=new ty.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch{}}read(){if(this.privIsReadEnded)throw new ey.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async e=>((e===void 0||e.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),e))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new ty.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new ey.InvalidOperationError("Stream closed")}}el.Stream=fO;var tl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(t.TranslationStatus||(t.TranslationStatus={}))})(tl);var Hi={},ny;function vO(){if(ny)return Hi;ny=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.ChunkedArrayBufferStream=void 0;const t=N();let e=class extends t.Stream{constructor(r,i){super(i),this.privTargetChunkSize=Math.round(r),this.privNextBufferReadyBytes=0}writeStreamChunk(r){if(r.isEnd||this.privNextBufferReadyBytes===0&&r.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(r);return}let i=0;for(;i<r.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=r.timeReceived);const o=Math.min(r.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),s=new Uint8Array(r.buffer.slice(i,o+i));a.set(s,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=o,i+=o,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return Hi.ChunkedArrayBufferStream=e,Hi}var jw={};Object.defineProperty(jw,"__esModule",{value:!0});var nl={};Object.defineProperty(nl,"__esModule",{value:!0});nl.Timeout=void 0;class Ve{static load(){const e=new Map([[0,()=>{}]]),n=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),o=new Worker(i);return o.addEventListener("message",({data:c})=>{if(Ve.isCallNotification(c)){const{params:{timerId:u}}=c,l=e.get(u);if(typeof l=="number"){const p=n.get(l);if(p===void 0||p!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),e.delete(u);else throw new Error("The timer is in an undefined state.")}else if(Ve.isClearResponse(c)){const{id:u}=c,l=n.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");n.delete(u),e.delete(l)}else{const{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{const u=Math.random();n.set(u,c),e.set(c,u),o.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{const l=Math.random();return e.set(l,c),o.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>(Ve.workerTimers!==null||(Ve.workerTimers=Ve.load()),Ve.workerTimers)}static isCallNotification(e){return e.method!==void 0&&e.method==="call"}static isClearResponse(e){return e.error===null&&typeof e.id=="number"}}nl.Timeout=Ve;Ve.workerTimers=null;Ve.clearTimeout=t=>Ve.timers().clearTimeout(t);Ve.setTimeout=(t,e)=>Ve.timers().setTimeout(t,e);Ve.timers=Ve.loadWorkerTimers();var H={};Object.defineProperty(H,"__esModule",{value:!0});H.OCSPCacheUpdateErrorEvent=H.OCSPResponseRetrievedEvent=H.OCSPCacheFetchErrorEvent=H.OCSPVerificationFailedEvent=H.OCSPCacheHitEvent=H.OCSPCacheEntryNeedsRefreshEvent=H.OCSPCacheEntryExpiredEvent=H.OCSPWSUpgradeStartedEvent=H.OCSPStapleReceivedEvent=H.OCSPCacheUpdateCompleteEvent=H.OCSPDiskCacheStoreEvent=H.OCSPMemoryCacheStoreEvent=H.OCSPCacheUpdateNeededEvent=H.OCSPDiskCacheHitEvent=H.OCSPCacheMissEvent=H.OCSPMemoryCacheHitEvent=H.OCSPEvent=void 0;const be=Mi;class De extends be.PlatformEvent{constructor(e,n,r){super(e,n),this.privSignature=r}}H.OCSPEvent=De;class gO extends De{constructor(e){super("OCSPMemoryCacheHitEvent",be.EventType.Debug,e)}}H.OCSPMemoryCacheHitEvent=gO;class mO extends De{constructor(e){super("OCSPCacheMissEvent",be.EventType.Debug,e)}}H.OCSPCacheMissEvent=mO;class yO extends De{constructor(e){super("OCSPDiskCacheHitEvent",be.EventType.Debug,e)}}H.OCSPDiskCacheHitEvent=yO;class SO extends De{constructor(e){super("OCSPCacheUpdateNeededEvent",be.EventType.Debug,e)}}H.OCSPCacheUpdateNeededEvent=SO;class CO extends De{constructor(e){super("OCSPMemoryCacheStoreEvent",be.EventType.Debug,e)}}H.OCSPMemoryCacheStoreEvent=CO;class PO extends De{constructor(e){super("OCSPDiskCacheStoreEvent",be.EventType.Debug,e)}}H.OCSPDiskCacheStoreEvent=PO;class RO extends De{constructor(e){super("OCSPCacheUpdateCompleteEvent",be.EventType.Debug,e)}}H.OCSPCacheUpdateCompleteEvent=RO;class wO extends De{constructor(){super("OCSPStapleReceivedEvent",be.EventType.Debug,"")}}H.OCSPStapleReceivedEvent=wO;class EO extends De{constructor(e){super("OCSPWSUpgradeStartedEvent",be.EventType.Debug,e)}}H.OCSPWSUpgradeStartedEvent=EO;class TO extends De{constructor(e,n){super("OCSPCacheEntryExpiredEvent",be.EventType.Debug,e),this.privExpireTime=n}}H.OCSPCacheEntryExpiredEvent=TO;class IO extends De{constructor(e,n,r){super("OCSPCacheEntryNeedsRefreshEvent",be.EventType.Debug,e),this.privExpireTime=r,this.privStartTime=n}}H.OCSPCacheEntryNeedsRefreshEvent=IO;class AO extends De{constructor(e,n,r){super("OCSPCacheHitEvent",be.EventType.Debug,e),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=n,this.privStartTimeString=new Date(n).toLocaleTimeString()}}H.OCSPCacheHitEvent=AO;class _O extends De{constructor(e,n){super("OCSPVerificationFailedEvent",be.EventType.Debug,e),this.privError=n}}H.OCSPVerificationFailedEvent=_O;class MO extends De{constructor(e,n){super("OCSPCacheFetchErrorEvent",be.EventType.Debug,e),this.privError=n}}H.OCSPCacheFetchErrorEvent=MO;class kO extends De{constructor(e){super("OCSPResponseRetrievedEvent",be.EventType.Debug,e)}}H.OCSPResponseRetrievedEvent=kO;class bO extends De{constructor(e,n){super("OCSPCacheUpdateErrorEvent",be.EventType.Debug,e),this.privError=n}}H.OCSPCacheUpdateErrorEvent=bO;var Ki={},ry;function DO(){if(ry)return Ki;ry=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.BackgroundEvent=void 0;const t=N();class e extends t.PlatformEvent{constructor(r){super("BackgroundEvent",t.EventType.Error),this.privError=r}get error(){return this.privError}}return Ki.BackgroundEvent=e,Ki}var iy;function N(){return iy||(iy=1,function(t){var e=$&&$.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a),Object.defineProperty(i,s,{enumerable:!0,get:function(){return o[a]}})}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),n=$&&$.__exportStar||function(i,o){for(var a in i)a!=="default"&&!o.hasOwnProperty(a)&&e(o,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),n(le,t),n(ve,t),n(Jf,t),n(Ju,t),n(Qu,t),n(Or,t),n(Me,t),n(Xu,t),n(ka,t),n(Tt,t),n(Aw,t),n(_w,t),n(Mw,t),n(kw,t),n(bw,t),n(Dw,t),n(Ow,t),n(xw,t),n(Nw,t),n(zw,t),n(ba,t),n(Mi,t),n(Qf,t),n(Da,t),n(Yu,t),n(Zu,t),n(el,t);var r=tl;Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return r.TranslationStatus}}),n(vO(),t),n(jw,t),n(nl,t),n(H,t),n(DO(),t)}(Bp)),Bp}var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.HeaderNames=void 0;class jt{}Re.HeaderNames=jt;jt.AuthKey="Ocp-Apim-Subscription-Key";jt.Authorization="Authorization";jt.SpIDAuthKey="Apim-Subscription-Id";jt.ConnectionId="X-ConnectionId";jt.ContentType="Content-Type";jt.CustomCommandsAppId="X-CommandsAppId";jt.Path="Path";jt.RequestId="X-RequestId";jt.RequestStreamId="X-StreamId";jt.RequestTimestamp="X-Timestamp";var bi={};Object.defineProperty(bi,"__esModule",{value:!0});bi.AuthInfo=void 0;class OO{constructor(e,n){this.privHeaderName=e,this.privToken=n}get headerName(){return this.privHeaderName}get token(){return this.privToken}}bi.AuthInfo=OO;Object.defineProperty(zu,"__esModule",{value:!0});zu.CognitiveSubscriptionKeyAuthentication=void 0;const xO=N(),NO=Re,zO=bi;class jO{constructor(e){if(!e)throw new xO.ArgumentNullError("subscriptionKey");this.privAuthInfo=new zO.AuthInfo(NO.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}zu.CognitiveSubscriptionKeyAuthentication=jO;var rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.CognitiveTokenAuthentication=void 0;const sy=N(),oy=bi,ay=Re;class ya{constructor(e,n){if(!e)throw new sy.ArgumentNullError("fetchCallback");if(!n)throw new sy.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=n}fetch(e){return this.privFetchCallback(e).then(n=>new oy.AuthInfo(ay.HeaderNames.Authorization,n===void 0?void 0:ya.privTokenPrefix+n))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then(n=>new oy.AuthInfo(ay.HeaderNames.Authorization,n===void 0?void 0:ya.privTokenPrefix+n))}}rl.CognitiveTokenAuthentication=ya;ya.privTokenPrefix="Bearer ";var Lw={};Object.defineProperty(Lw,"__esModule",{value:!0});var Bw={};Object.defineProperty(Bw,"__esModule",{value:!0});var Gi={},Hp={},il={};const LO={},BO=Object.freeze(Object.defineProperty({__proto__:null,default:LO},Symbol.toStringTag,{value:"Module"})),Lr=TT(BO);var Xf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;const e=N();Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return e.EventType}})})(Xf);var B={};Object.defineProperty(B,"__esModule",{value:!0});B.Contracts=void 0;class Tn{static throwIfNullOrUndefined(e,n){if(e==null)throw new Error("throwIfNullOrUndefined:"+n)}static throwIfNull(e,n){if(e===null)throw new Error("throwIfNull:"+n)}static throwIfNullOrWhitespace(e,n){if(Tn.throwIfNullOrUndefined(e,n),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}static throwIfNullOrTooLong(e,n,r){if(Tn.throwIfNullOrUndefined(e,n),(""+e).length>r)throw new Error("throwIfNullOrTooLong:"+n+" (more than "+r.toString()+" characters)")}static throwIfNullOrTooShort(e,n,r){if(Tn.throwIfNullOrUndefined(e,n),(""+e).length<r)throw new Error("throwIfNullOrTooShort:"+n+" (less than "+r.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,n){if(Tn.throwIfNullOrUndefined(e,n),e.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(const r of e)Tn.throwIfNullOrWhitespace(r,n)}static throwIfFileDoesNotExist(e,n){Tn.throwIfNullOrWhitespace(e,n)}static throwIfNotUndefined(e,n){if(e!==void 0)throw new Error("throwIfNotUndefined:"+n)}}B.Contracts=Tn;var FO=$&&$.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),VO=$&&$.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),qO=$&&$.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&FO(e,t,n);return VO(e,t),e};Object.defineProperty(il,"__esModule",{value:!0});il.ConsoleLoggingListener=void 0;const cy=qO(Lr),Ji=Xf,UO=B;class $O{constructor(e=Ji.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){UO.Contracts.throwIfNullOrUndefined(cy.openSync,`
File System access not available`),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const n=this.toString(e);if(this.logCallback&&this.logCallback(n),this.privLogPath&&cy.writeFileSync(this.privLogPath,n+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case Ji.LogLevel.Debug:console.debug(n);break;case Ji.LogLevel.Info:console.info(n);break;case Ji.LogLevel.Warning:console.warn(n);break;case Ji.LogLevel.Error:console.error(n);break;default:console.log(n);break}}}toString(e){const n=[`${e.eventTime}`,`${e.name}`],r=e;for(const i in r)if(i&&e.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){const o=r[i];let a="<NULL>";o!=null&&(typeof o=="number"||typeof o=="string"?a=o.toString():a=JSON.stringify(o)),n.push(`${i}: ${a}`)}return n.join(" | ")}}il.ConsoleLoggingListener=$O;var Fw={};Object.defineProperty(Fw,"__esModule",{value:!0});var Kp={},Yn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0;var e;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS",i[i.AMR_WB=11]="AMR_WB",i[i.G722=12]="G722"})(e=t.AudioFormatTag||(t.AudioFormatTag={}));class n{static getDefaultInputFormat(){return r.getDefaultInputFormat()}static getWaveFormat(o,a,s,c){return new r(o,a,s,c)}static getWaveFormatPCM(o,a,s){return new r(o,a,s)}}t.AudioStreamFormat=n;class r extends n{constructor(o=16e3,a=16,s=1,c=e.PCM){super();let u=!0;switch(c){case e.PCM:this.formatTag=1;break;case e.ALaw:this.formatTag=6;break;case e.MuLaw:this.formatTag=7;break;default:u=!1}if(this.bitsPerSample=a,this.samplesPerSec=o,this.channels=s,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),u){this.privHeader=new ArrayBuffer(44);const l=new DataView(this.privHeader);this.setString(l,0,"RIFF"),l.setUint32(4,0,!0),this.setString(l,8,"WAVEfmt "),l.setUint32(16,16,!0),l.setUint16(20,this.formatTag,!0),l.setUint16(22,this.channels,!0),l.setUint32(24,this.samplesPerSec,!0),l.setUint32(28,this.avgBytesPerSec,!0),l.setUint16(32,this.channels*(this.bitsPerSample/8),!0),l.setUint16(34,this.bitsPerSample,!0),this.setString(l,36,"data"),l.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new r}static getAudioContext(o){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return o!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:o}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(o,a,s){for(let c=0;c<s.length;c++)o.setUint8(a+c,s.charCodeAt(c))}}t.AudioStreamFormatImpl=r})(Yn);var uy;function WO(){return uy||(uy=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;const e=D(),n=N(),r=Yn;t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,s,c,u){this.privRecorder=a,this.deviceId=s,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||n.createNoDashGuid(),this.privEvents=new n.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new n.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const u=c;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let s=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(s=(c,u,l)=>{a.mediaDevices.getUserMedia(c).then(u).catch(l)}),s){const c=()=>{this.onEvent(new n.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):s({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const l=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(l),this.onEvent(new n.AudioSourceErrorEvent(this.privId,l))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new n.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new n.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(s=>(this.onEvent(new n.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(s.readEnded(),delete this.privStreams[a],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>s.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const s=this.privStreams[a];s&&s.close()}this.onEvent(new n.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:e.type.Microphones}))}setProperty(a,s){if(a===t.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(s);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const s=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(s===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new n.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const l of u)if(l.deviceId===s){this.privMicrophoneLabel=l.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const s=new n.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=s;try{this.privRecorder.record(this.privContext,this.privMediaStream,s)}catch(u){throw this.onEvent(new n.AudioStreamNodeErrorEvent(this.privId,a,u)),u}return s}onEvent(a){this.privEvents.onEvent(a),n.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=r.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}t.MicAudioSource=i,i.AUDIOFORMAT=r.AudioStreamFormat.getDefaultInputFormat()}(Kp)),Kp}var Qi={},ly;function HO(){if(ly)return Qi;ly=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.FileAudioSource=void 0;const t=D(),e=N(),n=Yn;let r=class{constructor(o,a,s){this.privStreams={},this.privHeaderEnd=44,this.privId=s||e.createNoDashGuid(),this.privEvents=new e.EventSource,this.privSource=o,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=o.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const o=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new e.AudioSourceErrorEvent(o,"")),Promise.reject(o)}this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(o){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,o));const a=await this.upload(o);return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,o)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[o],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,o)),await this.turnOff()},id:()=>o,read:()=>a.read()})}detach(o){o&&this.privStreams[o]&&(this.privStreams[o].close(),delete this.privStreams[o],this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,o)))}turnOff(){for(const o in this.privStreams)if(o){const a=this.privStreams[o];a&&!a.isClosed&&a.close()}return this.onEvent(new e.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(o=>Promise.resolve({bitspersample:o.bitsPerSample,channelcount:o.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:o.samplesPerSec,type:t.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),s=new e.Deferred,c=u=>{const l=new DataView(u),p=v=>String.fromCharCode(l.getUint8(v),l.getUint8(v+1),l.getUint8(v+2),l.getUint8(v+3));if(p(0)!=="RIFF"){s.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){s.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=l.getInt32(16,!0),h=l.getUint16(22,!0),f=l.getUint32(24,!0),m=l.getUint16(34,!0);let S=36+Math.max(d-16,0);for(;p(S)!=="data";S+=2)if(S>4288){s.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=S+8,s.resolve(n.AudioStreamFormat.getWaveFormatPCM(f,m,h))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const u=new FileReader;u.onload=l=>{const p=l.target.result;c(p)},u.readAsArrayBuffer(a)}else{const u=a;c(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return s.promise}async upload(o){const a=s=>{const c=`Error occurred while processing '${this.privFilename}'. ${s}`;throw this.onEvent(new e.AudioStreamNodeErrorEvent(this.privId,o,c)),new Error(c)};try{await this.turnOn();const s=await this.privAudioFormatPromise,c=new e.ChunkedArrayBufferStream(s.avgBytesPerSec/10,o);this.privStreams[o]=c;const u=this.privSource.slice(this.privHeaderEnd),l=p=>{c.isClosed||(c.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const p=new FileReader;p.onerror=d=>a(d.toString()),p.onload=d=>{const h=d.target.result;l(h)},p.readAsArrayBuffer(u)}else{const p=u;l(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return c}catch(s){a(s)}}onEvent(o){this.privEvents.onEvent(o),e.Events.instance.onEvent(o)}};return Qi.FileAudioSource=r,Qi}var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.PcmRecorder=void 0;const KO=N();class GO{constructor(e){this.privStopInputOnRelease=e}record(e,n,r){const o=new KO.RiffPcmEncoder(e.sampleRate,16e3),a=e.createMediaStreamSource(n),s=()=>{const u=(()=>{let l=0;try{return e.createScriptProcessor(l,1,1)}catch{l=2048;let d=e.sampleRate;for(;l<16384&&d>=32e3;)l<<=1,d>>=1;return e.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{const p=l.inputBuffer.getChannelData(0);if(r&&!r.isClosed){const d=o.encode(p);d&&r.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:n}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(e.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const u=new AudioWorkletNode(e,"speech-processor");u.port.onmessage=l=>{const p=l.data;if(r&&!r.isClosed){const d=o.encode(p);d&&r.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(e.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:n}}).catch(()=>{s()})}else try{s()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(n=>n.stop()),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}sl.PcmRecorder=GO;var ol={},Oa={},JO=$&&$.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),QO=$&&$.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vw=$&&$.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&JO(e,t,n);return QO(e,t),e},Yf=$&&$.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.WebsocketMessageAdapter=void 0;const XO=Vw(Lr),YO=Vw(Lr),ZO=Yf(Lr),ex=Yf(Lr),tx=Yf(Lr),nx=Re,V=N();class Sa{constructor(e,n,r,i,o,a){if(!e)throw new V.ArgumentNullError("uri");if(!r)throw new V.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new V.EventSource,this.privConnectionId=n,this.privMessageFormatter=r,this.privConnectionState=V.ConnectionState.None,this.privUri=e,this.privHeaders=o,this.privEnableCompression=a,this.privHeaders[nx.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===V.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new V.Deferred,this.privCertificateValidatedDeferral=new V.Deferred,this.privConnectionState=V.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Sa.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let r=new URL(this.privUri).protocol;(r==null?void 0:r.toLocaleLowerCase())==="wss:"?r="https:":(r==null?void 0:r.toLocaleLowerCase())==="ws:"&&(r="http:"),e.agent.protocol=r,this.privWebsocketClient=new tx.default(this.privUri,e)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new V.Queue,this.privDisconnectDeferral=new V.Deferred,this.privSendMessageQueue=new V.Queue,this.processSendQueue().catch(e=>{V.Events.instance.onEvent(new V.BackgroundEvent(e))})}catch(e){return this.privConnectionEstablishDeferral.resolve(new V.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new V.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=V.ConnectionState.Connected,this.onEvent(new V.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new V.ConnectionOpenResponse(200,""))},e=>{this.privConnectionEstablishDeferral.reject(e)})},this.privWebsocketClient.onerror=e=>{this.onEvent(new V.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===V.ConnectionState.Connecting?(this.privConnectionState=V.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new V.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=V.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new V.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch(n=>{V.Events.instance.onEvent(new V.BackgroundEvent(n))})},this.privWebsocketClient.onmessage=e=>{const n=new Date().toISOString();if(this.privConnectionState===V.ConnectionState.Connected){const r=new V.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),e.data instanceof ArrayBuffer){const i=new V.RawWebsocketMessage(V.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new V.ConnectionMessageReceivedEvent(this.privConnectionId,n,o)),r.resolve(o)},o=>{r.reject(`Invalid binary message format. Error: ${o}`)})}else{const i=new V.RawWebsocketMessage(V.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new V.ConnectionMessageReceivedEvent(this.privConnectionId,n,o)),r.resolve(o)},o=>{r.reject(`Invalid text message format. Error: ${o}`)})}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==V.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${V.ConnectionState[this.privConnectionState]} state`);const n=new V.Deferred,r=new V.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(e).then(i=>{r.resolve({Message:e,RawWebsocketMessage:i,sendStatusDeferral:n})},i=>{r.reject(`Error formatting the message. ${i}`)}),n.promise}read(){return this.privConnectionState!==V.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(e){if(this.privWebsocketClient)this.privConnectionState!==V.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(e){try{if(!e)return Promise.resolve();if(this.onEvent(new V.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),e.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(e.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+new Error().stack);return Promise.resolve()}catch(n){return Promise.reject(`websocket send error: ${n}`)}}async onClose(e,n){const r=`Connection closed. ${e}: ${n}`;this.privConnectionState=V.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},r),await this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(r)},r)}async processSendQueue(){for(;;){const n=await this.privSendMessageQueue.dequeue();if(!n)return;try{await this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(r){n.sendStatusDeferral.reject(r)}}}onEvent(e){this.privConnectionEvents.onEvent(e),V.Events.instance.onEvent(e)}getAgent(){const e=new ZO.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const n={host:e.HostName,port:e.Port};return e.UserName?n.headers={"Proxy-Authentication":"Basic "+new Buffer(`${e.UserName}:${e.Password===void 0?"":e.Password}`).toString("base64")}:n.headers={},n.headers.requestOCSP="true",new ex.default(n)}createConnection(e,n){let r;if(n={...n,requestOCSP:!0,servername:n.host},this.proxyInfo){const o=Sa.GetProxyAgent(this.proxyInfo);r=new Promise((a,s)=>{o.callback(e,n,(c,u)=>{c?s(c):a(u)})})}else n.secureEndpoint?r=Promise.resolve(YO.connect(n)):r=Promise.resolve(XO.connect(n));return r}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}Oa.WebsocketMessageAdapter=Sa;Sa.forceNpmWebSocket=!1;Object.defineProperty(ol,"__esModule",{value:!0});ol.WebsocketConnection=void 0;const Gp=N(),rx=Oa;class ix{constructor(e,n,r,i,o,a=!1,s){if(this.privIsDisposed=!1,!e)throw new Gp.ArgumentNullError("uri");if(!i)throw new Gp.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",u=0;if(n){for(const l in n)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(l);c+=p;let d=n[l];d&&(d=encodeURIComponent(d),c+=`=${d}`),u++}}if(r){for(const l in r)if(l){c+=u===0&&e.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(r[l]);c+=`${l}=${p}`,u++}}this.privUri=e+c,this.privId=s||Gp.createNoDashGuid(),this.privConnectionMessageAdapter=new rx.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,o,r,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}ol.WebsocketConnection=ix;var al={};Object.defineProperty(al,"__esModule",{value:!0});al.ReplayableAudioNode=void 0;class sx{constructor(e,n){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=n}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const e=this.privReplayOffset-this.privBufferStartOffset;let n=Math.round(e*this.privBytesPerSecond*1e-7);n%2!==0&&n++;let r=0;for(;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){const i=this.privBuffers[r].chunk.buffer.slice(n);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(e=>(e&&e.buffer&&(this.privBuffers.push(new ox(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=e;const n=e-this.privBufferStartOffset;let r=Math.round(n*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&r>=this.privBuffers[i].chunk.buffer.byteLength;)r-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const n of this.privBuffers){const r=n.byteOffset/this.privBytesPerSecond*1e7,i=r+n.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=r&&e<=i)return n.chunk.timeReceived}return 0}}al.ReplayableAudioNode=sx;class ox{constructor(e,n,r){this.chunk=e,this.serial=n,this.byteOffset=r}}var Xi={},Jp={},Jt={},xa={},ax=$&&$.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),cx=$&&$.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ux=$&&$.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&ax(e,t,n);return cx(e,t),e};Object.defineProperty(xa,"__esModule",{value:!0});xa.AudioFileWriter=void 0;const Yi=ux(Lr),Qp=B;class lx{constructor(e){Qp.Contracts.throwIfNullOrUndefined(Yi.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=Yi.openSync(e,"w")}set format(e){Qp.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let n=0;this.privAudioFormat.hasHeader&&(n=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=Yi.createWriteStream("",{fd:this.privFd,start:n,autoClose:!1}))}write(e){Qp.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),Yi.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),Yi.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}xa.AudioFileWriter=lx;var ot={},py;function qw(){if(py)return ot;py=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.PullAudioInputStreamImpl=ot.PullAudioInputStream=ot.PushAudioInputStreamImpl=ot.PushAudioInputStream=ot.AudioInputStream=void 0;const t=D(),e=N(),n=Tt,r=_(),i=Yn;let o=class{constructor(){}static createPushStream(p){return a.create(p)}static createPullStream(p,d){return c.create(p,d)}};ot.AudioInputStream=o;class a extends o{static create(p){return new s(p)}}ot.PushAudioInputStream=a;class s extends a{constructor(p){super(),p===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new e.EventSource,this.privId=n.createNoDashGuid(),this.privStream=new e.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const d=this.privStream;return this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>d.read()}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}toBuffer(p){const d=Buffer.alloc(p.byteLength),h=new Uint8Array(p);for(let f=0;f<d.length;++f)d[f]=h[f];return d}}ot.PushAudioInputStreamImpl=s;class c extends o{constructor(){super()}static create(p,d){return new u(p,d)}}ot.PullAudioInputStream=c;class u extends c{constructor(p,d){super(),d===void 0?this.privFormat=r.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new e.EventSource,this.privId=n.createNoDashGuid(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new e.AudioSourceInitializingEvent(this.privId)),this.onEvent(new e.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new e.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new e.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const f=new ArrayBuffer(this.privBufferSize-d),m=this.privCallback.read(f);if(h===void 0?h=f:new Int8Array(h).set(new Int8Array(f),d),m===0)break;d+=m}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new e.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:t.type.Stream})}onEvent(p){this.privEvents.onEvent(p),e.Events.instance.onEvent(p)}}return ot.PullAudioInputStreamImpl=u,ot}var Ae={},Zn={},Zf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",e[e.AmrWb16000Hz=37]="AmrWb16000Hz",e[e.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))})(Zf);Object.defineProperty(Zn,"__esModule",{value:!0});Zn.AudioOutputFormatImpl=void 0;const U=Zf,q=Yn;class j extends q.AudioStreamFormatImpl{constructor(e,n,r,i,o,a,s,c,u){super(r,a,n,e),this.formatTag=e,this.avgBytesPerSec=i,this.blockAlign=o,this.priAudioFormatString=s,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return e===void 0?j.getDefaultOutputFormat():j.fromSpeechSynthesisOutputFormatString(j.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new j(q.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new j(q.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new j(q.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new j(q.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new j(q.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new j(q.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new j(q.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new j(q.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new j(q.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new j(q.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new j(q.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new j(q.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new j(q.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new j(q.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new j(q.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new j(q.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new j(q.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new j(q.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new j(q.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new j(q.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,e,e,!1);case"g722-16khz-64kbps":return new j(q.AudioFormatTag.G722,1,16e3,8e3,2,16,e,e,!1);case"riff-16khz-16bit-mono-pcm":default:return new j(q.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return j.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const n=new DataView(this.privHeader);n.setUint32(4,e+this.privHeader.byteLength-8,!0),n.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const n=new Uint8Array(e.byteLength+this.header.byteLength);return n.set(new Uint8Array(this.header),0),n.set(new Uint8Array(e),this.header.byteLength),n.buffer}}Zn.AudioOutputFormatImpl=j;j.SpeechSynthesisOutputFormatToString={[U.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[U.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[U.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[U.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[U.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[U.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[U.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[U.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[U.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[U.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[U.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[U.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[U.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[U.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[U.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[U.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[U.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[U.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[U.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[U.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[U.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.PushAudioOutputStreamImpl=Ae.PushAudioOutputStream=Ae.PullAudioOutputStreamImpl=Ae.PullAudioOutputStream=Ae.AudioOutputStream=void 0;const gh=N(),px=B,dx=Zn;class ev{constructor(){}static createPullStream(){return tv.create()}}Ae.AudioOutputStream=ev;class tv extends ev{static create(){return new Uw}}Ae.PullAudioOutputStream=tv;class Uw extends tv{constructor(){super(),this.privId=gh.createNoDashGuid(),this.privStream=new gh.Stream}set format(e){e==null&&(this.privFormat=dx.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(e){const n=new Int8Array(e);let r=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>e.byteLength)return n.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);n.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<e.byteLength&&!this.privStream.isReadEnded;){const i=await this.privStream.read();if(i!==void 0&&!i.isEnd){let o;i.buffer.byteLength>e.byteLength-r?(o=i.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(i.buffer.slice(e.byteLength-r))):o=i.buffer,n.set(new Int8Array(o),r),r+=o.byteLength}else this.privStream.readEnded()}return r}write(e){px.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}Ae.PullAudioOutputStreamImpl=Uw;class $w extends ev{constructor(){super()}static create(e){return new Ww(e)}}Ae.PushAudioOutputStream=$w;class Ww extends $w{constructor(e){super(),this.privId=gh.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}Ae.PushAudioOutputStreamImpl=Ww;var dy;function Kw(){if(dy)return Jt;dy=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.AudioOutputConfigImpl=Jt.AudioConfigImpl=Jt.AudioConfig=void 0;const t=we(),e=B,n=_(),r=xa,i=qw(),o=Ae;let a=class Hw{static fromDefaultMicrophoneInput(){const l=new t.PcmRecorder(!0);return new s(new t.MicAudioSource(l))}static fromMicrophoneInput(l){const p=new t.PcmRecorder(!0);return new s(new t.MicAudioSource(p,l))}static fromWavFileInput(l,p="unnamedBuffer.wav"){return new s(new t.FileAudioSource(l,p))}static fromStreamInput(l){if(l instanceof n.PullAudioInputStreamCallback)return new s(new i.PullAudioInputStreamImpl(l));if(l instanceof n.AudioInputStream)return new s(l);if(typeof MediaStream<"u"&&l instanceof MediaStream){const p=new t.PcmRecorder(!1);return new s(new t.MicAudioSource(p,null,null,l))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new n.SpeakerAudioDestination)}static fromSpeakerOutput(l){if(l===void 0)return Hw.fromDefaultSpeakerOutput();if(l instanceof n.SpeakerAudioDestination)return new c(l);throw new Error("Not Supported Type")}static fromAudioFileOutput(l){return new c(new r.AudioFileWriter(l))}static fromStreamOutput(l){if(l instanceof n.PushAudioOutputStreamCallback)return new c(new o.PushAudioOutputStreamImpl(l));if(l instanceof n.PushAudioOutputStream)return new c(l);if(l instanceof n.PullAudioOutputStream)return new c(l);throw new Error("Not Supported Type")}};Jt.AudioConfig=a;class s extends a{constructor(l){super(),this.privSource=l}get format(){return this.privSource.format}close(l,p){this.privSource.turnOff().then(()=>{l&&l()},d=>{p&&p(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(l){return this.privSource.attach(l)}detach(l){return this.privSource.detach(l)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(l,p){if(e.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(l,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(l,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(l,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Jt.AudioConfigImpl=s;class c extends a{constructor(l){super(),this.privDestination=l}set format(l){this.privDestination.format=l}write(l){this.privDestination.write(l)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Jt.AudioOutputConfigImpl=c,Jt}var Gw={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(t.CancellationReason||(t.CancellationReason={}))})(Gw);var cl={};Object.defineProperty(cl,"__esModule",{value:!0});cl.PullAudioInputStreamCallback=void 0;class hx{}cl.PullAudioInputStreamCallback=hx;var ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.PushAudioOutputStreamCallback=void 0;class fx{}ul.PushAudioOutputStreamCallback=fx;var ll={};Object.defineProperty(ll,"__esModule",{value:!0});ll.KeywordRecognitionModel=void 0;const hy=B;class vx{constructor(){this.privDisposed=!1}static fromFile(e){throw hy.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw hy.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}ll.KeywordRecognitionModel=vx;var pl={};Object.defineProperty(pl,"__esModule",{value:!0});pl.SessionEventArgs=void 0;class gx{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}pl.SessionEventArgs=gx;var Zi={},fy;function mx(){if(fy)return Zi;fy=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.RecognitionEventArgs=void 0;const t=_();let e=class extends t.SessionEventArgs{constructor(r,i){super(i),this.privOffset=r}get offset(){return this.privOffset}};return Zi.RecognitionEventArgs=e,Zi}var Jw={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.OutputFormat||(t.OutputFormat={}))})(Jw);var es={},vy;function yx(){if(vy)return es;vy=1,Object.defineProperty(es,"__esModule",{value:!0}),es.IntentRecognitionEventArgs=void 0;const t=_();let e=class extends t.RecognitionEventArgs{constructor(r,i,o){super(i,o),this.privResult=r}get result(){return this.privResult}};return es.IntentRecognitionEventArgs=e,es}var dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.RecognitionResult=void 0;class Sx{constructor(e,n,r,i,o,a,s,c,u,l){this.privResultId=e,this.privReason=n,this.privText=r,this.privDuration=i,this.privOffset=o,this.privLanguage=a,this.privLanguageDetectionConfidence=s,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}dl.RecognitionResult=Sx;var ts={},gy;function Cx(){if(gy)return ts;gy=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.SpeechRecognitionResult=void 0;const t=_();let e=class extends t.RecognitionResult{constructor(r,i,o,a,s,c,u,l,p,d,h){super(r,i,o,a,s,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return ts.SpeechRecognitionResult=e,ts}var ns={},my;function Px(){if(my)return ns;my=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.IntentRecognitionResult=void 0;const t=_();let e=class extends t.SpeechRecognitionResult{constructor(r,i,o,a,s,c,u,l,p,d,h){super(i,o,a,s,c,u,l,void 0,p,d,h),this.privIntentId=r}get intentId(){return this.privIntentId}};return ns.IntentRecognitionResult=e,ns}var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});Pi.LanguageUnderstandingModelImpl=Pi.LanguageUnderstandingModel=void 0;const Fr=B;class Qw{constructor(){}static fromEndpoint(e){Fr.Contracts.throwIfNull(e,"uri"),Fr.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const n=new bc,r=e.host.indexOf(".");if(r===-1)throw new Error("Could not determine region from endpoint");n.region=e.host.substr(0,r);const i=e.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(n.appId=e.pathname.substr(i),n.subscriptionKey=e.searchParams.get("subscription-key"),n.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return n}static fromAppId(e){Fr.Contracts.throwIfNullOrWhitespace(e,"appId");const n=new bc;return n.appId=e,n}static fromSubscription(e,n,r){Fr.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),Fr.Contracts.throwIfNullOrWhitespace(n,"appId"),Fr.Contracts.throwIfNullOrWhitespace(r,"region");const i=new bc;return i.appId=n,i.region=r,i.subscriptionKey=e,i}}Pi.LanguageUnderstandingModel=Qw;class bc extends Qw{}Pi.LanguageUnderstandingModelImpl=bc;var Qt={},yy;function Rx(){if(yy)return Qt;yy=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.MeetingTranscriptionEventArgs=Qt.ConversationTranscriptionEventArgs=Qt.SpeechRecognitionEventArgs=void 0;const t=_();let e=class extends t.RecognitionEventArgs{constructor(o,a,s){super(a,s),this.privResult=o}get result(){return this.privResult}};Qt.SpeechRecognitionEventArgs=e;class n extends t.RecognitionEventArgs{constructor(o,a,s){super(a,s),this.privResult=o}get result(){return this.privResult}}Qt.ConversationTranscriptionEventArgs=n;class r extends e{}return Qt.MeetingTranscriptionEventArgs=r,Qt}var rs={},is={},Sy;function Na(){if(Sy)return is;Sy=1,Object.defineProperty(is,"__esModule",{value:!0}),is.CancellationEventArgsBase=void 0;const t=_();let e=class extends t.RecognitionEventArgs{constructor(r,i,o,a,s){super(a,s),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return is.CancellationEventArgsBase=e,is}var Cy;function wx(){if(Cy)return rs;Cy=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.SpeechRecognitionCanceledEventArgs=void 0;const t=Na();let e=class extends t.CancellationEventArgsBase{};return rs.SpeechRecognitionCanceledEventArgs=e,rs}var ss={},Py;function Ex(){if(Py)return ss;Py=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.TranslationRecognitionEventArgs=void 0;const t=_();let e=class extends t.RecognitionEventArgs{constructor(r,i,o){super(i,o),this.privResult=r}get result(){return this.privResult}};return ss.TranslationRecognitionEventArgs=e,ss}var os={},Ry;function Tx(){if(Ry)return os;Ry=1,Object.defineProperty(os,"__esModule",{value:!0}),os.TranslationSynthesisEventArgs=void 0;const t=_();let e=class extends t.SessionEventArgs{constructor(r,i){super(i),this.privResult=r}get result(){return this.privResult}};return os.TranslationSynthesisEventArgs=e,os}var as={},wy;function Yw(){if(wy)return as;wy=1,Object.defineProperty(as,"__esModule",{value:!0}),as.TranslationRecognitionResult=void 0;const t=_();let e=class Xw extends t.SpeechRecognitionResult{constructor(r,i,o,a,s,c,u,l,p,d,h){super(i,o,a,s,c,u,l,void 0,p,d,h),this.privTranslations=r}static fromSpeechRecognitionResult(r){return new Xw(void 0,r.resultId,r.reason,r.text,r.duration,r.offset,r.language,r.languageDetectionConfidence,r.errorDetails,r.json,r.properties)}get translations(){return this.privTranslations}};return as.TranslationRecognitionResult=e,as}var hl={};Object.defineProperty(hl,"__esModule",{value:!0});hl.TranslationSynthesisResult=void 0;class Ix{constructor(e,n){this.privReason=e,this.privAudio=n}get audio(){return this.privAudio}get reason(){return this.privReason}}hl.TranslationSynthesisResult=Ix;var Zw={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=21]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(t.ResultReason||(t.ResultReason={}))})(Zw);var tr={},Ey;function Ax(){if(Ey)return tr;Ey=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.SpeechConfigImpl=tr.SpeechConfig=void 0;const t=D(),e=B,n=_();let r=class{constructor(){}static fromSubscription(a,s){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,s),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,s){e.Contracts.throwIfNull(a,"endpoint");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,a.href),s!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),c}static fromHost(a,s){e.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),s!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),c}static fromAuthorizationToken(a,s){e.Contracts.throwIfNull(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,s),c.authorizationToken=a,c}close(){}};tr.SpeechConfig=r;class i extends r{constructor(){super(),this.privProperties=new n.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=n.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return n.OutputFormat[this.privProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(t.OutputFormatPropertyName,n.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,a)}setProperty(a,s){e.Contracts.throwIfNull(s,"value"),this.privProperties.setProperty(a,s)}getProperty(a,s){return this.privProperties.getProperty(a,s)}setProxy(a,s,c,u){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],s),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],u)}setServiceProperty(a,s){const c=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));c[a]=s,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(t.ForceDictationPropertyName,"true")}clone(){const a=new i;return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[a])}}return tr.SpeechConfigImpl=i,tr}var nr={},Ty;function _x(){if(Ty)return nr;Ty=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.SpeechTranslationConfigImpl=nr.SpeechTranslationConfig=void 0;const t=D(),e=B,n=_();let r=class extends n.SpeechConfig{constructor(){super()}static fromSubscription(a,s){e.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),e.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}static fromAuthorizationToken(a,s){e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}static fromHost(a,s){e.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),s!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),c}static fromEndpoint(a,s){e.Contracts.throwIfNull(a,"endpoint"),e.Contracts.throwIfNull(s,"subscriptionKey");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,a.href),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),c}};nr.SpeechTranslationConfig=r;class i extends r{constructor(){super(),this.privSpeechProperties=new n.PropertyCollection,this.outputFormat=n.OutputFormat.Simple}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return n.OutputFormat[this.privSpeechProperties.getProperty(t.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(t.OutputFormatPropertyName,n.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){e.Contracts.throwIfNullOrWhitespace(a,"value");const s=this.targetLanguages;s.includes(a)||(s.push(a),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,s.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){e.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}setProxy(a,s,c,u){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],s),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],u)}getProperty(a,s){return this.privSpeechProperties.getProperty(a,s)}setProperty(a,s){this.privSpeechProperties.setProperty(a,s)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,s){const c=JSON.parse(this.privSpeechProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));c[a]=s,this.privSpeechProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(t.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[a])}}return nr.SpeechTranslationConfigImpl=i,nr}var cs={},Iy;function tE(){if(Iy)return cs;Iy=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.PropertyCollection=void 0;const t=_();let e=class eE{constructor(){this.privKeys=[],this.privValues=[]}getProperty(r,i){let o;typeof r=="string"?o=r:o=t.PropertyId[r];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===o)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(r,i){let o;typeof r=="string"?o=r:o=t.PropertyId[r];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===o){this.privValues[a]=i;return}this.privKeys.push(o),this.privValues.push(i)}clone(){const r=new eE;for(let i=0;i<this.privKeys.length;i++)r.privKeys.push(this.privKeys[i]),r.privValues.push(this.privValues[i]);return r}mergeTo(r){this.privKeys.forEach(i=>{if(r.getProperty(i,void 0)===void 0){const o=this.getProperty(i);r.setProperty(i,o)}})}get keys(){return this.privKeys}};return cs.PropertyCollection=e,cs}var fl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.SpeechServiceResponse_DiarizeIntermediateResults=46]="SpeechServiceResponse_DiarizeIntermediateResults",e[e.Conversation_ApplicationId=47]="Conversation_ApplicationId",e[e.Conversation_DialogType=48]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=49]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=50]="Conversation_From_Id",e[e.Conversation_Conversation_Id=51]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=52]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=53]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=54]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=55]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=56]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=57]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=58]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=59]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=60]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=61]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=62]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=63]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=64]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=65]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=66]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=67]="SpeakerRecognition_Api_Version",e[e.WebWorkerLoadType=68]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=69]="TalkingAvatarService_WebRTC_SDP"}(t.PropertyId||(t.PropertyId={}))})(fl);var us={},Ay;function Mx(){if(Ay)return us;Ay=1,Object.defineProperty(us,"__esModule",{value:!0}),us.Recognizer=void 0;const t=D(),e=N(),n=B,r=_();let i=class nE{constructor(a,s,c){this.audioConfig=a!==void 0?a:r.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=s.clone(),this.privConnectionFactory=c,this.implCommonRecognizerSetup()}close(a,s){n.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),a,s)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return t.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){t.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",s="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,s=navigator.userAgent,c=navigator.appVersion);const u=this.createRecognizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(a,s,c))));this.privReco=this.createServiceRecognizer(nE.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,u)}async recognizeOnceAsyncImpl(a){n.Contracts.throwIfDisposed(this.privDisposed);const s=new e.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,s.resolve,s.reject);const c=await s.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){n.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){n.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(a){const s=a.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0);return s&&s!==""?new t.CognitiveSubscriptionKeyAuthentication(s):new t.CognitiveTokenAuthentication(()=>{const u=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return us.Recognizer=i,us}var ls={},_y;function kx(){if(_y)return ls;_y=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.SpeechRecognizer=void 0;const t=D(),e=N(),n=B,r=_();let i=class rE extends r.Recognizer{constructor(a,s){const c=a;n.Contracts.throwIfNull(c,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(s,c.properties,new t.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(a,s,c){const u=a;return s.properties.mergeTo(u.properties),new rE(a,c)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])===r.OutputFormat[r.OutputFormat.Simple]?r.OutputFormat.Simple:r.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(a,s){e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),a,s)}startContinuousRecognitionAsync(a,s){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,s)}stopContinuousRecognitionAsync(a,s){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,s)}startKeywordRecognitionAsync(a,s,c){n.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a){a&&a()}close(a,s){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,s)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,s,c,u){const l=c;return new t.SpeechServiceRecognizer(a,s,l,u,this)}};return ls.SpeechRecognizer=i,ls}var ps={},My;function bx(){if(My)return ps;My=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.IntentRecognizer=void 0;const t=D(),e=N(),n=B,r=_();let i=class extends r.Recognizer{constructor(a,s){n.Contracts.throwIfNullOrUndefined(a,"speechConfig");const c=a;n.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(s,c.properties,new t.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=c.properties,n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}recognizeOnceAsync(a,s){if(n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),a,s)}startContinuousRecognitionAsync(a,s){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,s)}stopContinuousRecognitionAsync(a,s){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,s)}startKeywordRecognitionAsync(a,s,c){n.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a,s){if(a)try{a()}catch(c){s&&s(c)}}addIntent(a,s){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.Contracts.throwIfNullOrWhitespace(s,"intentId"),n.Contracts.throwIfNullOrWhitespace(a,"simplePhrase"),this.privAddedIntents.push([s,a])}addIntentWithLanguageModel(a,s,c){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.Contracts.throwIfNullOrWhitespace(a,"intentId"),n.Contracts.throwIfNull(s,"model");const u=s;n.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[a]=new t.AddedLmIntent(u,c)}addAllIntents(a,s){n.Contracts.throwIfNull(a,"model");const c=a;n.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privUmbrellaIntent=new t.AddedLmIntent(c,s)}close(a,s){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,s)}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,s,c,u){const l=c;return new t.IntentServiceRecognizer(a,s,l,u,this)}async dispose(a){this.privDisposedIntentRecognizer||a&&(this.privDisposedIntentRecognizer=!0,await super.dispose(a))}buildSpeechContext(){let a,s,c;const u=[];this.privUmbrellaIntent!==void 0&&(a=this.privUmbrellaIntent.modelImpl.appId,s=this.privUmbrellaIntent.modelImpl.region,c=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const l of Object.keys(this.privAddedLmIntents)){const p=this.privAddedLmIntents[l];if(a===void 0)a=p.modelImpl.appId;else if(a!==p.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(s===void 0)s=p.modelImpl.region;else if(s!==p.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(c===void 0)c=p.modelImpl.subscriptionKey;else if(c!==p.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const d="luis/"+a+"-PRODUCTION#"+l;u.push(d)}return{Intent:{id:a,key:c===void 0?this.privProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key]):c,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+a+"-PRODUCTION"]}}};return ps.IntentRecognizer=i,ps}var iE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(t.VoiceProfileType||(t.VoiceProfileType={}))})(iE);var ds={},hs={},rr={},ky;function sE(){if(ky)return rr;ky=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.ConnectionMessageImpl=rr.ConnectionMessage=void 0;const t=Re,e=N(),n=tE(),r=fl;let i=class{};rr.ConnectionMessage=i;class o{constructor(s){this.privConnectionMessage=s,this.privProperties=new n.PropertyCollection,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]&&this.privProperties.setProperty(r.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[t.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(s=>s.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===e.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===e.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return rr.ConnectionMessageImpl=o,rr}var by;function oE(){if(by)return hs;by=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.Connection=void 0;const t=D(),e=N(),n=sE(),r=B,i=_();let o=class mh{static fromRecognizer(s){const c=s.internalData,u=new mh;return u.privInternalData=c,u.setupEvents(),u}static fromSynthesizer(s){const c=s.internalData,u=new mh;return u.privInternalData=c,u.setupEvents(),u}openConnection(s,c){e.marshalPromiseToCallbacks(this.privInternalData.connect(),s,c)}closeConnection(s,c){if(this.privInternalData instanceof t.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");e.marshalPromiseToCallbacks(this.privInternalData.disconnect(),s,c)}setMessageProperty(s,c,u){if(r.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof t.ServiceRecognizerBase){if(s.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(c,u)}else if(this.privInternalData instanceof t.SynthesisAdapterBase){if(s.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(c,u)}}sendMessageAsync(s,c,u,l){e.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(s,c),u,l)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(s=>{s.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(s.connectionId)):s.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(s.connectionId)):s.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(s.message))):s.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(s.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(s=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(s.jsonString,s.name))})}};return hs.Connection=o,hs}var Dy;function Dx(){if(Dy)return ds;Dy=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.TranslationRecognizer=void 0;const t=D(),e=N(),n=oE(),r=B,i=_();let o=class aE extends i.Recognizer{constructor(s,c,u){const l=s;r.Contracts.throwIfNull(l,"speechConfig"),super(c,l.properties,u||new t.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationVoice]),r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationToLanguages]),r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(s,c,u){const l=s;return c.properties.mergeTo(l.properties),new aE(s,u)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,s)}recognizeOnceAsync(s,c){r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),s,c)}startContinuousRecognitionAsync(s,c){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),s,c)}stopContinuousRecognitionAsync(s,c){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),s,c)}removeTargetLanguage(s){if(r.Contracts.throwIfNullOrUndefined(s,"language to be removed"),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=c.indexOf(s);u>-1&&(c.splice(u,1),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")),this.updateLanguages(c))}}addTargetLanguage(s){r.Contracts.throwIfNullOrUndefined(s,"language to be added");let c=[];this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c.includes(s)||(c.push(s),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))):(this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,s),c=[s]),this.updateLanguages(c)}close(s,c){r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),s,c)}onConnection(){}async dispose(s){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,s&&(await this.implRecognizerStop(),await super.dispose(s)))}createRecognizerConfig(s){return new t.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,c,u,l){const p=u;return new t.TranslationServiceRecognizer(s,c,p,l,this)}updateLanguages(s){const c=n.Connection.fromRecognizer(this);c&&(c.setMessageProperty("speech.context","translationcontext",{to:s}),c.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:s})))}};return ds.TranslationRecognizer=o,ds}var fs={},Oy;function Ox(){if(Oy)return fs;Oy=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.Translations=void 0;const t=_();let e=class{constructor(){this.privMap=new t.PropertyCollection}get languages(){return this.privMap.keys}get(r,i){return this.privMap.getProperty(r,i)}set(r,i){this.privMap.setProperty(r,i)}};return fs.Translations=e,fs}var cE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(t.NoMatchReason||(t.NoMatchReason={}))})(cE);var vs={},xy;function xx(){if(xy)return vs;xy=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.NoMatchDetails=void 0;const t=D(),e=_();let n=class uE{constructor(i){this.privReason=i}static fromResult(i){const o=t.SimpleSpeechPhrase.fromJSON(i.json);let a=e.NoMatchReason.NotRecognized;switch(o.RecognitionStatus){case t.RecognitionStatus.BabbleTimeout:a=e.NoMatchReason.InitialBabbleTimeout;break;case t.RecognitionStatus.InitialSilenceTimeout:a=e.NoMatchReason.InitialSilenceTimeout;break;default:a=e.NoMatchReason.NotRecognized;break}return new uE(a)}get reason(){return this.privReason}};return vs.NoMatchDetails=n,vs}var vl={};Object.defineProperty(vl,"__esModule",{value:!0});vl.TranslationRecognitionCanceledEventArgs=void 0;class Nx{constructor(e,n,r,i,o){this.privCancelReason=n,this.privErrorDetails=r,this.privResult=o,this.privSessionId=e,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}vl.TranslationRecognitionCanceledEventArgs=Nx;var gs={},Ny;function zx(){if(Ny)return gs;Ny=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.IntentRecognitionCanceledEventArgs=void 0;const t=_();let e=class extends t.IntentRecognitionEventArgs{constructor(r,i,o,a,s,c){super(a,s,c),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return gs.IntentRecognitionCanceledEventArgs=e,gs}var za={};Object.defineProperty(za,"__esModule",{value:!0});za.CancellationDetailsBase=void 0;class jx{constructor(e,n,r){this.privReason=e,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}za.CancellationDetailsBase=jx;var ms={},zy;function Lx(){if(zy)return ms;zy=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.CancellationDetails=void 0;const t=D(),e=za,n=_();let r=class lE extends e.CancellationDetailsBase{constructor(o,a,s){super(o,a,s)}static fromResult(o){let a=n.CancellationReason.Error,s=n.CancellationErrorCode.NoError;if(o instanceof n.RecognitionResult&&o.json){const c=t.SimpleSpeechPhrase.fromJSON(o.json);a=t.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return o.properties&&(s=n.CancellationErrorCode[o.properties.getProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new lE(a,o.errorDetails||t.EnumTranslation.implTranslateErrorDetails(s),s)}};return ms.CancellationDetails=r,ms}var pE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(t.CancellationErrorCode||(t.CancellationErrorCode={}))})(pE);var ys={},jy;function Bx(){if(jy)return ys;jy=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.ConnectionEventArgs=void 0;const t=_();let e=class extends t.SessionEventArgs{};return ys.ConnectionEventArgs=e,ys}var Ss={},Ly;function Fx(){if(Ly)return Ss;Ly=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.ServiceEventArgs=void 0;const t=_();let e=class extends t.SessionEventArgs{constructor(r,i,o){super(o),this.privJsonResult=r,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return Ss.ServiceEventArgs=e,Ss}var gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.PhraseListGrammar=void 0;class nv{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const n=e.internalData;return new nv(n)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}gl.PhraseListGrammar=nv;var ir={},By;function rv(){if(By)return ir;By=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.DialogServiceConfigImpl=ir.DialogServiceConfig=void 0;const t=B,e=_();let n=class{constructor(){}set applicationId(o){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};ir.DialogServiceConfig=n;class r extends n{constructor(){super(),this.privSpeechConfig=new e.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(o){t.Contracts.throwIfNullOrWhitespace(o,"value"),this.privSpeechConfig.speechRecognitionLanguage=o}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(o){this.privSpeechConfig.outputFormat=o}setProperty(o,a){this.privSpeechConfig.setProperty(o,a)}getProperty(o,a){return this.privSpeechConfig.getProperty(o)}setProxy(o,a,s,c){this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName,o),this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),s&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName,s),c&&this.setProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(o,a,s){this.privSpeechConfig.setServiceProperty(o,a)}close(){}}return ir.DialogServiceConfigImpl=r,ir}var Cs={},Fy;function Vx(){if(Fy)return Cs;Fy=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.BotFrameworkConfig=void 0;const t=B,e=rv(),n=_();let r=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,a,s){t.Contracts.throwIfNullOrWhitespace(o,"subscription"),t.Contracts.throwIfNullOrWhitespace(a,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,a),s&&c.setProperty(n.PropertyId.Conversation_ApplicationId,s),c}static fromAuthorizationToken(o,a,s){t.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(a,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,a),s&&c.setProperty(n.PropertyId.Conversation_ApplicationId,s),c}static fromHost(o,a,s){t.Contracts.throwIfNullOrUndefined(o,"host");const c=o instanceof URL?o:new URL(`wss://${o}.convai.speech.azure.us`);t.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const u=new e.DialogServiceConfigImpl;return u.setProperty(n.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(n.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&u.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(o,a){t.Contracts.throwIfNull(o,"endpoint");const s=new e.DialogServiceConfigImpl;return s.setProperty(n.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,o.toString()),a!==void 0&&s.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),s}};return Cs.BotFrameworkConfig=r,Cs}var Ps={},Vy;function qx(){if(Vy)return Ps;Vy=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.CustomCommandsConfig=void 0;const t=B,e=rv(),n=_();let r=class extends e.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,a,s){t.Contracts.throwIfNullOrWhitespace(o,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"subscription"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(n.PropertyId.Conversation_ApplicationId,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}static fromAuthorizationToken(o,a,s){t.Contracts.throwIfNullOrWhitespace(o,"applicationId"),t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new e.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,e.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(n.PropertyId.Conversation_ApplicationId,o),c.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}set applicationId(o){t.Contracts.throwIfNullOrWhitespace(o,"value"),this.setProperty(n.PropertyId.Conversation_ApplicationId,o)}get applicationId(){return this.getProperty(n.PropertyId.Conversation_ApplicationId)}};return Ps.CustomCommandsConfig=r,Ps}var Rs={},ws={},Es={},Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.QueryParameterNames=void 0;class de{}Lt.QueryParameterNames=de;de.BotId="botid";de.CustomSpeechDeploymentId="cid";de.CustomVoiceDeploymentId="deploymentId";de.EnableAudioLogging="storeAudio";de.EnableLanguageId="lidEnabled";de.EnableWordLevelTimestamps="wordLevelTimestamps";de.EndSilenceTimeoutMs="endSilenceTimeoutMs";de.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";de.Format="format";de.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";de.Language="language";de.Profanity="profanity";de.RequestBotStatusMessages="enableBotMessageStatus";de.StableIntermediateThreshold="stableIntermediateThreshold";de.StableTranslation="stableTranslation";de.TestHooks="testhooks";de.Postprocessing="postprocessing";de.CtsMeetingId="meetingId";de.CtsDeviceId="deviceId";de.CtsIsParticipant="isParticipant";de.EnableAvatar="enableTalkingAvatar";var qy;function Bt(){if(qy)return Es;qy=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.ConnectionFactoryBase=void 0;const t=D(),e=_(),n=Lt;let r=class{static getHostSuffix(o){if(o){if(o.toLowerCase().startsWith("china"))return".azure.cn";if(o.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(o,a,s){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,n.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,n.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,n.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,n.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,n.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,n.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,n.QueryParameterNames.EnableWordLevelTimestamps],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,n.QueryParameterNames.StableIntermediateThreshold]]).forEach((l,p)=>{this.setUrlParameter(p,l,o,a,s)});const u=JSON.parse(o.parameters.getProperty(t.ServicePropertiesPropertyName,"{}"));Object.keys(u).forEach(l=>{a[l]=u[l]})}setUrlParameter(o,a,s,c,u){const l=s.parameters.getProperty(o,void 0);l&&(!u||u.search(a)===-1)&&(c[a]=l.toLocaleLowerCase())}};return Es.ConnectionFactoryBase=r,Es}var Uy;function Ux(){if(Uy)return ws;Uy=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.DialogConnectionFactory=void 0;const t=we(),e=D(),n=_(),r=Bt(),i=D(),o=Re,a=Lt;class s extends r.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(n.PropertyId.Conversation_ApplicationId,""),h=u.parameters.getProperty(n.PropertyId.Conversation_DialogType),f=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),m=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),S=u.parameters.getProperty(n.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),v={};v[o.HeaderNames.ConnectionId]=p,v[a.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase(),v[a.QueryParameterNames.Language]=m,v[a.QueryParameterNames.RequestBotStatusMessages]=S,d&&(v[a.QueryParameterNames.BotId]=d,h===n.DialogServiceConfig.DialogTypes.CustomCommands&&(v[o.HeaderNames.CustomCommandsAppId]=d));const g=h===n.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",y=h===n.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===n.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",C={};l.token!=null&&l.token!==""&&(C[l.headerName]=l.token);let P=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,"");if(!P){const I=r.ConnectionFactoryBase.getHostSuffix(f),R=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,`wss://${f}.${s.BaseUrl}${I}`);P=`${R.endsWith("/")?R:R+"/"}${g}${s.ApiKey}/${y}`}this.setCommonUrlParams(u,v,P);const w=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(P,v,C,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),w,p)}}return ws.DialogConnectionFactory=s,s.ApiKey="api",s.BaseUrl="convai.speech",ws}var $y;function $x(){if($y)return Rs;$y=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.DialogServiceConnector=void 0;const t=Ux(),e=D(),n=N(),r=B,i=_(),o=fl;let a=class extends i.Recognizer{constructor(c,u){const l=c;r.Contracts.throwIfNull(c,"dialogConfig"),super(u,l.properties,new t.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=l.properties.clone();const p=this.buildAgentConfig();this.privReco.agentConfig.set(p)}connect(c,u){n.marshalPromiseToCallbacks(this.privReco.connect(),c,u)}disconnect(c,u){n.marshalPromiseToCallbacks(this.privReco.disconnect(),c,u)}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(o.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(c){this.properties.setProperty(o.PropertyId.Conversation_Speech_Activity_Template,c)}listenOnceAsync(c,u){if(this.isTurnComplete){r.Contracts.throwIfDisposed(this.privIsDisposed);const p=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const d=new n.Deferred;await this.privReco.recognize(e.RecognitionMode.Conversation,d.resolve,d.reject);const h=await d.promise;return await this.implRecognizerStop(),h})();p.catch(()=>{this.dispose(!0).catch(()=>{})}),n.marshalPromiseToCallbacks(p.finally(()=>{this.isTurnComplete=!0}),c,u)}}sendActivityAsync(c,u,l){n.marshalPromiseToCallbacks(this.privReco.sendMessage(c),u,l)}close(c,u){r.Contracts.throwIfDisposed(this.privIsDisposed),n.marshalPromiseToCallbacks(this.dispose(!0),c,u)}async dispose(c){this.privIsDisposed||c&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(c))}createRecognizerConfig(c){return new e.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,l,p){const d=l;return new e.DialogServiceAdapter(c,u,d,p,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(o.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(o.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(o.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return Rs.DialogServiceConnector=a,Rs}var ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.ActivityReceivedEventArgs=void 0;class Wx{constructor(e,n){this.privActivity=e,this.privAudioStream=n}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}ml.ActivityReceivedEventArgs=Wx;var yl={},Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.TurnStatusResponsePayload=void 0;class iv{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new iv(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}Sl.TurnStatusResponsePayload=iv;Object.defineProperty(yl,"__esModule",{value:!0});yl.TurnStatusReceivedEventArgs=void 0;const Hx=Sl;class Kx{constructor(e){this.privTurnStatus=Hx.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}yl.TurnStatusReceivedEventArgs=Kx;var dE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))})(dE);var hE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(t.ProfanityOption||(t.ProfanityOption={}))})(hE);var Ts={},Wy;function Gx(){if(Wy)return Ts;Wy=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.BaseAudioPlayer=void 0;const t=Me,e=_(),n=Yn;let r=class{constructor(o){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,o===void 0&&(o=e.AudioStreamFormat.getDefaultInputFormat()),this.init(o)}playAudioSample(o,a,s){try{this.ensureInitializedContext();const c=this.formatAudioData(o),u=new Float32Array(this.samples.length+c.length);u.set(this.samples,0),u.set(c,this.samples.length),this.samples=u,a&&a()}catch(c){s&&s(c)}}stopAudio(o,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{o&&o()},s=>{a&&a(s)}),this.audioContext=null)}init(o){this.audioFormat=o,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const o=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},o)}}createAudioContext(){this.audioContext=n.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(o){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(o),128);case 16:return this.formatArrayBuffer(new Int16Array(o),32768);case 32:return this.formatArrayBuffer(new Int32Array(o),2147483648);default:throw new t.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(o,a){const s=new Float32Array(o.length);for(let c=0;c<o.length;c++)s[c]=o[c]/a;return s}updateAudioBuffer(){if(this.samples.length===0)return;const o=this.audioFormat.channels,a=this.audioContext.createBufferSource(),s=this.samples.length/o,c=this.audioContext.createBuffer(o,s,this.audioFormat.samplesPerSec);for(let u=0;u<o;u++){let l=u;const p=c.getChannelData(u);for(let d=0;d<this.samples.length;d++,l+=o)p[d]=this.samples[l]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(o){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),s=this.audioContext.destination;await this.audioContext.decodeAudioData(o,c=>{a.buffer=c,a.connect(s),a.start(0)})}};return Ts.BaseAudioPlayer=r,Ts}var Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.ConnectionMessageEventArgs=void 0;class Jx{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}Cl.ConnectionMessageEventArgs=Jx;var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.VoiceProfile=void 0;class Qx{constructor(e,n){this.privId=e,this.privProfileType=n}get profileId(){return this.privId}get profileType(){return this.privProfileType}}Pl.VoiceProfile=Qx;var sr={},Hy;function Xx(){if(Hy)return sr;Hy=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.VoiceProfileEnrollmentCancellationDetails=sr.VoiceProfileEnrollmentResult=void 0;const t=D(),e=_();let n=class yh{constructor(o,a,s){this.privReason=o,this.privProperties=new e.PropertyCollection,this.privReason!==e.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=e.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=s,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(o){const a=[];for(const s of o.value){const c=s.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:s.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new yh(c,null,null);u.privDetails=this.getIdentificationDetails(s),a.push(u)}return a}static FromVerificationProfileList(o){const a=[];for(const s of o.value){const c=s.enrollmentStatus.toLowerCase()==="enrolling"?e.ResultReason.EnrollingVoiceProfile:s.enrollmentStatus.toLowerCase()==="enrolled"?e.ResultReason.EnrolledVoiceProfile:e.ResultReason.Canceled,u=new yh(c,null,null);u.privDetails=this.getVerificationDetails(s),a.push(u)}return a}static getIdentificationDetails(o){return{audioLength:o.audioLength?parseFloat(o.audioLength):0,audioSpeechLength:o.audioSpeechLength?parseFloat(o.audioSpeechLength):0,enrollmentStatus:o.enrollmentStatus,enrollmentsCount:o.enrollmentsCount||0,enrollmentsLength:o.enrollmentsLength?parseFloat(o.enrollmentsLength):0,enrollmentsSpeechLength:o.enrollmentsSpeechLength?parseFloat(o.enrollmentsSpeechLength):0,profileId:o.profileId||o.identificationProfileId,remainingEnrollmentsSpeechLength:o.remainingEnrollmentsSpeechLength?parseFloat(o.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(o){return{audioLength:o.audioLength?parseFloat(o.audioLength):0,audioSpeechLength:o.audioSpeechLength?parseFloat(o.audioSpeechLength):0,enrollmentStatus:o.enrollmentStatus,enrollmentsCount:o.enrollmentsCount,enrollmentsLength:o.enrollmentsLength?parseFloat(o.enrollmentsLength):0,enrollmentsSpeechLength:o.enrollmentsSpeechLength?parseFloat(o.enrollmentsSpeechLength):0,profileId:o.profileId||o.verificationProfileId,remainingEnrollmentsCount:o.remainingEnrollments||o.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:o.remainingEnrollmentsSpeechLength?parseFloat(o.remainingEnrollmentsSpeechLength):0}}};sr.VoiceProfileEnrollmentResult=n;class r extends e.CancellationDetailsBase{constructor(o,a,s){super(o,a,s)}static fromResult(o){const a=e.CancellationReason.Error;let s=e.CancellationErrorCode.NoError;return o.properties&&(s=e.CancellationErrorCode[o.properties.getProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[e.CancellationErrorCode.NoError])]),new r(a,o.errorDetails,s)}}return sr.VoiceProfileEnrollmentCancellationDetails=r,sr}var or={},Ky;function Yx(){if(Ky)return or;Ky=1,Object.defineProperty(or,"__esModule",{value:!0}),or.VoiceProfileCancellationDetails=or.VoiceProfileResult=void 0;const t=D(),e=B,n=_();let r=class{constructor(a,s){this.privReason=a,this.privProperties=new n.PropertyCollection,a===n.ResultReason.Canceled&&(e.Contracts.throwIfNullOrUndefined(s,"statusText"),this.privErrorDetails=s,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};or.VoiceProfileResult=r;class i extends n.CancellationDetailsBase{constructor(a,s,c){super(a,s,c)}static fromResult(a){const s=n.CancellationReason.Error;let c=n.CancellationErrorCode.NoError;return a.properties&&(c=n.CancellationErrorCode[a.properties.getProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new i(s,a.errorDetails,c)}}return or.VoiceProfileCancellationDetails=i,or}var Is={},Gy;function Zx(){if(Gy)return Is;Gy=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.VoiceProfilePhraseResult=void 0;const t=B,e=_();let n=class extends e.VoiceProfileResult{constructor(i,o,a,s){super(i,o),this.privPhrases=[],t.Contracts.throwIfNullOrUndefined(s,"phrase array"),this.privType=a,s&&s[0]&&(this.privPhrases=s)}get phrases(){return this.privPhrases}get type(){return this.privType}};return Is.VoiceProfilePhraseResult=n,Is}var As={},Jy;function eN(){if(Jy)return As;Jy=1,Object.defineProperty(As,"__esModule",{value:!0}),As.VoiceProfileClient=void 0;const t=D(),e=Kw(),n=B,r=_();let i=class extends r.Recognizer{constructor(a){n.Contracts.throwIfNullOrUndefined(a,"speechConfig");const s=a;n.Contracts.throwIfNull(s,"speechConfig"),super(e.AudioConfig.fromStreamInput(r.AudioInputStream.createPushStream()),s.properties,new t.VoiceProfileConnectionFactory),this.privProperties=s.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,s){const c=await this.privVoiceAdapter.createProfile(a,s);return new r.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,s){return this.privVoiceAdapter.getActivationPhrases(a,s)}async enrollProfileAsync(a,s){const c=s;return n.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=s,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,s,c,u){const l=c;return new t.VoiceServiceRecognizer(a,s,l,u,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.properties)}getResult(a,s){return new r.VoiceProfileResult(a.ok?s:r.ResultReason.Canceled,a.statusText)}};return As.VoiceProfileClient=i,As}var _s={},Qy;function tN(){if(Qy)return _s;Qy=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.SpeakerRecognizer=void 0;const t=D(),e=B,n=_();let r=class extends n.Recognizer{constructor(o,a){e.Contracts.throwIfNullOrUndefined(o,"speechConfig");const s=o;e.Contracts.throwIfNullOrUndefined(s,"speechConfig"),super(a,s.properties,new t.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,e.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=s.properties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){e.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}async recognizeOnceAsync(o){return e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(o)}async close(){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(o){e.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(o);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(o){return new t.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,a,s,c){const u=s;return new t.SpeakerServiceRecognizer(o,a,u,c,this)}async dispose(o){this.privDisposedSpeakerRecognizer||o&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(o))}};return _s.SpeakerRecognizer=r,_s}var Ms={},Xy;function nN(){if(Xy)return Ms;Xy=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.SpeakerIdentificationModel=void 0;const t=B,e=_();let n=class fE{constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],t.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const o of i){if(o.profileType!==e.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+o.profileId);this.privVoiceProfiles.push(o),this.privProfileIds.push(o.profileId)}}static fromProfiles(i){return new fE(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return Ms.SpeakerIdentificationModel=n,Ms}var ks={},Yy;function rN(){if(Yy)return ks;Yy=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.SpeakerVerificationModel=void 0;const t=B,e=_();let n=class vE{constructor(i){if(t.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===e.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new vE(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===e.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return ks.SpeakerVerificationModel=n,ks}var bs={},sv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(t.LanguageIdMode||(t.LanguageIdMode={}))})(sv);var Zy;function iN(){if(Zy)return bs;Zy=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.AutoDetectSourceLanguageConfig=void 0;const t=D(),e=B,n=_(),r=sv;let i=class Dc{constructor(){this.privProperties=new n.PropertyCollection,this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=r.LanguageIdMode.AtStart}static fromOpenRange(){const a=new Dc;return a.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,t.AutoDetectSourceLanguagesOpenRangeOptionName),a}static fromLanguages(a){e.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const s=new Dc;return s.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),s}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const s=new Dc,c=[];return a.forEach(u=>{if(c.push(u.language),u.endpointId!==void 0&&u.endpointId!==""){const l=u.language+n.PropertyId.SpeechServiceConnection_EndpointId.toString();s.properties.setProperty(l,u.endpointId)}}),s.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),s}get properties(){return this.privProperties}set mode(a){a===r.LanguageIdMode.Continuous?(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return bs.AutoDetectSourceLanguageConfig=i,bs}var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.AutoDetectSourceLanguageResult=void 0;const eS=B;class lu{constructor(e,n){eS.Contracts.throwIfNullOrUndefined(e,"language"),eS.Contracts.throwIfNullOrUndefined(n,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=n}static fromResult(e){return new lu(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new lu(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}Rl.AutoDetectSourceLanguageResult=lu;var wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.SourceLanguageConfig=void 0;const sN=B;class ov{constructor(e,n){sN.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=n}static fromLanguage(e,n){return new ov(e,n)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}wl.SourceLanguageConfig=ov;var Xp={},tS;function oN(){return tS||(tS=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;const e=D(),n=_();var r;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(r=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}));class i{constructor(s,c=n.ResultReason.RecognizedSpeaker,u=n.CancellationErrorCode.NoError,l=""){this.privProperties=new n.PropertyCollection;const p=s.scenario==="TextIndependentIdentification"?r.Identify:r.Verify;this.privReason=c,this.privReason!==n.ResultReason.Canceled?p===r.Identify?(this.privProfileId=s.identificationResult.identifiedProfile.profileId,this.privScore=s.identificationResult.identifiedProfile.score,this.privReason=n.ResultReason.RecognizedSpeakers):(this.privScore=s.verificationResult.score,s.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=n.ResultReason.NoMatch),s.verificationResult.profileId!==void 0&&s.verificationResult.profileId!==""&&(this.privProfileId=s.verificationResult.profileId)):(this.privErrorDetails=l,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[u])),this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(s))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}t.SpeakerRecognitionResult=i;class o extends n.CancellationDetailsBase{constructor(s,c,u){super(s,c,u)}static fromResult(s){const c=n.CancellationReason.Error;let u=n.CancellationErrorCode.NoError;return s.properties&&(u=n.CancellationErrorCode[s.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new o(c,s.errorDetails,u)}}t.SpeakerRecognitionCancellationDetails=o}(Xp)),Xp}var Yp={},ar={},nS;function gE(){if(nS)return ar;nS=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.ConversationImpl=ar.Conversation=void 0;const t=D(),e=N(),n=B,r=_();let i=class{constructor(){}static createConversationAsync(s,c,u,l){n.Contracts.throwIfNullOrUndefined(s,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(s.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!s.subscriptionKey&&!s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])&&n.Contracts.throwIfNullOrUndefined(s.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,d,h;return typeof c=="string"?(p=new o(s,c),e.marshalPromiseToCallbacks((async()=>{})(),u,l)):(p=new o(s),d=c,h=u,p.createConversationAsync(()=>{d&&d()},f=>{h&&h(f)})),p}};ar.Conversation=i;class o extends i{constructor(s,c){if(super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case t.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case t.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const f=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(r.PropertyId.ConversationTranslator_Name);f!==void 0&&f.length>0&&f!==this.me.displayName&&this.changeNicknameAsync(f)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new t.ConversationManager,s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||s.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{s.targetLanguages.length===0&&s.addTargetLanguage(this.privLanguage),s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceResponse_ProfanityOption])||s.setProfanity(r.ProfanityOption.Masked);let d=s.getProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),n.Contracts.throwIfNullOrTooLong(d,"nickname",50),n.Contracts.throwIfNullOrTooShort(d,"nickname",2),s.setProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name],d)}this.privConfig=s;const l=s;n.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var s,c;return(s=this.privParticipants.me)!=null&&s.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const s=this.conversationId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:s,participants:c,conversationProperties:u}}get canSend(){var s;return this.privIsConnected&&!((s=this.privParticipants.me)!=null&&s.isMuted)}get canSendAsHost(){var s;return this.privIsConnected&&((s=this.privParticipants.me)==null?void 0:s.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),this.privToken=s}set conversationTranslator(s){this.privConversationTranslator=s}onToken(s){this.privConversationTranslator.onToken(s)}createConversationAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startConversationAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=t.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(s,c,u){n.Contracts.throwIfNullOrUndefined(s,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(s),c,u)}joinConversationAsync(s,c,u,l,p){try{n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,s,d=>{n.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteConversationAsync(s,c){e.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),s,c)}async deleteConversationImplAsync(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(s,c){e.marshalPromiseToCallbacks(this.endConversationImplAsync(),s,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(s,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(s,c,u){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&s.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(s),c,u);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof s=="string"?l=s:s.hasOwnProperty("id")?l=s.id:s.hasOwnProperty("userId")&&(l=s.userId),n.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockConversationAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(s,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(s,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),s.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(s,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(s,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(s){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await s.enforceAudioGating(),this.privTranscriberRecognizer=s,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const s=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:s,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(s){if(this.privParticipants.addOrUpdateParticipant(s)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[s],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(s){this.privParticipants.deleteParticipant(s.id);const c=this.conversationInfo;return c.participants=[s],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(s){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}s&&this.dispose()}handleCallback(s,c){if(s){try{s()}catch(u){c&&c(u)}s=void 0}}handleError(s,c){if(c)if(s instanceof Error){const u=s;c(u.name+": "+u.message)}else c(s)}toParticipants(s){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return s?c:c.filter(u=>u.isHost===!1)}toParticipant(s){return new r.Participant(s.id,s.avatar,s.displayName,s.isHost,s.isMuted,s.isUsingTts,s.preferredLanguage,s.voice)}getMuteAllCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMuteCommand(s,c){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:s,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:s})}getEjectCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:s,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:s})}getChangeNicknameCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:s,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMessageCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(s,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:s,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return ar.ConversationImpl=o,ar}var El={};Object.defineProperty(El,"__esModule",{value:!0});El.ConversationCommon=void 0;class aN{constructor(e){this.privAudioConfig=e}handleCallback(e,n){if(e){try{e()}catch(r){n&&n(r)}e=void 0}}handleError(e,n){if(n)if(e instanceof Error){const r=e;n(r.name+": "+r.message)}else n(e)}}El.ConversationCommon=aN;var Ds={},rS;function cN(){if(rS)return Ds;rS=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.ConversationExpirationEventArgs=void 0;const t=_();let e=class extends t.SessionEventArgs{constructor(r,i){super(i),this.privExpirationTime=r}get expirationTime(){return this.privExpirationTime}};return Ds.ConversationExpirationEventArgs=e,Ds}var Os={},iS;function uN(){if(iS)return Os;iS=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.ConversationParticipantsChangedEventArgs=void 0;const t=_();let e=class extends t.SessionEventArgs{constructor(r,i,o){super(o),this.privReason=r,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return Os.ConversationParticipantsChangedEventArgs=e,Os}var xs={},sS;function lN(){if(sS)return xs;sS=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.ConversationTranslationCanceledEventArgs=void 0;const t=Na();let e=class extends t.CancellationEventArgsBase{};return xs.ConversationTranslationCanceledEventArgs=e,xs}var Ns={},oS;function pN(){if(oS)return Ns;oS=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.ConversationTranslationEventArgs=void 0;const t=_();let e=class extends t.RecognitionEventArgs{constructor(r,i,o){super(i,o),this.privResult=r}get result(){return this.privResult}};return Ns.ConversationTranslationEventArgs=e,Ns}var zs={},aS;function dN(){if(aS)return zs;aS=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.ConversationTranslationResult=void 0;const t=Yw();let e=class extends t.TranslationRecognitionResult{constructor(r,i,o,a,s,c,u,l,p,d,h){super(i,a,s,c,u,l,void 0,void 0,p,d,h),this.privId=r,this.privOrigLang=o}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return zs.ConversationTranslationResult=e,zs}var Zp={},js={},ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.StringUtils=void 0;class hN{static formatString(e,n){if(!e)return"";if(!n)return e;let r="",i="";const o=c=>{r+=c},a=c=>{i+=c};let s=o;for(let c=0;c<e.length;c++){const u=e[c],l=c+1<e.length?e[c+1]:"";switch(u){case"{":l==="{"?(s("{"),c++):s=a;break;case"}":l==="}"?(s("}"),c++):(n.hasOwnProperty(i)&&(r+=n[i]),s=o,i="");break;default:s(u);break}}return r}}ja.StringUtils=hN;var cS;function fN(){if(cS)return js;cS=1,Object.defineProperty(js,"__esModule",{value:!0}),js.ConversationTranslatorConnectionFactory=void 0;const t=we(),e=ja,n=B,r=_(),i=Re,o=Lt,a=Bt(),s=D();let c=class mE extends a.ConnectionFactoryBase{constructor(l){super(),n.Contracts.throwIfNullOrUndefined(l,"convGetter"),this.privConvGetter=l}create(l,p,d){const h=l.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",f=this.privConvGetter().room,m=f.cognitiveSpeechRegion||l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,""),S={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(m),path:mE.CTS_VIRT_MIC_PATH,region:encodeURIComponent(m)};S[o.QueryParameterNames.Language]=encodeURIComponent(l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"")),S[o.QueryParameterNames.CtsMeetingId]=encodeURIComponent(f.roomId),S[o.QueryParameterNames.CtsDeviceId]=encodeURIComponent(f.participantId),S[o.QueryParameterNames.CtsIsParticipant]=f.isHost?"":"&"+o.QueryParameterNames.CtsIsParticipant;let v="";const g={},y={};if(h){v=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint),v||(v="wss://"+l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),v=e.StringUtils.formatString(v,S);const P=new URL(v);P.searchParams.forEach((I,R)=>{g[R]=I}),new s.TranscriberConnectionFactory().setQueryParams(g,l,v),g[o.QueryParameterNames.CtsMeetingId]=S[o.QueryParameterNames.CtsMeetingId],g[o.QueryParameterNames.CtsDeviceId]=S[o.QueryParameterNames.CtsDeviceId],f.isHost||(g[o.QueryParameterNames.CtsIsParticipant]=""),o.QueryParameterNames.Format in g||(g[o.QueryParameterNames.Format]="simple"),P.searchParams.forEach((I,R)=>{P.searchParams.set(R,g[R]),delete g[R]}),v=P.toString()}else{const P=new s.TranslationConnectionFactory;v=P.getEndpointUrl(l,!0),v=e.StringUtils.formatString(v,S),P.setQueryParams(g,l,v)}y[i.HeaderNames.ConnectionId]=d,y[t.RestConfigBase.configParams.token]=f.token,p.token&&(y[p.headerName]=p.token);const C=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new t.WebsocketConnection(v,g,y,new s.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(l),C,d)}};return js.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",js}var uS;function vN(){return uS||(uS=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;const e=D(),n=fN(),r=N(),i=B,o=_(),a=gE(),s=av();var c;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(c=t.SpeechState||(t.SpeechState={}));class u extends o.TranslationRecognizer{constructor(d,h,f,m){super(d,h,new n.ConversationTranslatorConnectionFactory(m)),this.privSpeechState=c.Inactive,f&&(this.privTranslator=f,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(S,v)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,v)},this.recognized=async(S,v)=>{var g;(g=v.result)!=null&&g.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(v.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,v)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new s.ConversationTranslationCanceledEventArgs(o.CancellationReason.Error,d,o.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var d;try{this.stopContinuousRecognitionAsync(),await((d=this.privReco)==null?void 0:d.disconnect()),this.privSpeechState=c.Inactive}catch{}}}class l extends s.ConversationCommon{constructor(d){super(d),this.privErrors=e.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new o.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var d;return(d=this.privConversation)==null?void 0:d.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const f=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));f[d]=h,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(f))}joinConversationAsync(d,h,f,m,S){try{if(typeof d=="string"){i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),S);let v=f;(v==null||v==="")&&(v=e.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=o.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(o.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(v),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage],v),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.ConversationTranslator_Name],h);const g=[o.PropertyId.SpeechServiceConnection_Host,o.PropertyId.ConversationTranslator_Host,o.PropertyId.SpeechServiceConnection_Endpoint,o.PropertyId.SpeechServiceConnection_ProxyHostName,o.PropertyId.SpeechServiceConnection_ProxyPassword,o.PropertyId.SpeechServiceConnection_ProxyPort,o.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const C of g){const P=this.privProperties.getProperty(C);if(P){const w=typeof C=="string"?C:o.PropertyId[C];this.privSpeechTranslationConfig.setProperty(w,P)}}const y=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));for(const C of Object.keys(y))this.privSpeechTranslationConfig.setServiceProperty(C,y[C],o.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,v,C=>{C||this.handleError(new Error(this.privErrors.permissionDeniedConnect),S),this.privSpeechTranslationConfig.authorizationToken=C,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(m,S)},P=>{this.handleError(P,S)})},C=>{this.handleError(C,S)})}else typeof d=="object"?(i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(o.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(f,m)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),m)}catch(v){this.handleError(v,typeof f=="string"?S:m)}}leaveConversationAsync(d,h){r.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,f){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,f)}catch(m){this.handleError(m,f)}}startTranscribingAsync(d,h){r.marshalPromiseToCallbacks((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(f){throw this.privIsSpeaking=!1,await this.cancelSpeech(),f}})(),d,h)}stopTranscribingAsync(d,h){r.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((f,m)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(f,m)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,f){r.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,f)}async cancelSpeech(){var d;try{this.privIsSpeaking=!1,await((d=this.privCTRecognizer)==null?void 0:d.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=o.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}t.ConversationTranslator=l}(Zp)),Zp}var Ls={},lS;function gN(){if(lS)return Ls;lS=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.ConversationTranscriber=void 0;const t=D(),e=N(),n=B,r=_();let i=class yE extends r.Recognizer{constructor(a,s){const c=a;n.Contracts.throwIfNull(c,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(s,c.properties,new t.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(a,s,c){const u=a;return s.properties.mergeTo(u.properties),new yE(a,c)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])===r.OutputFormat[r.OutputFormat.Simple]?r.OutputFormat.Simple:r.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(a,s){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),a,s)}stopTranscribingAsync(a,s){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,s)}close(a,s){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),a,s)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new t.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,s,c,u){const l=c;return u.isSpeakerDiarizationEnabled=!0,new t.ConversationTranscriptionServiceRecognizer(a,s,l,u,this)}};return Ls.ConversationTranscriber=i,Ls}var cr={},pS;function mN(){if(pS)return cr;pS=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.Participant=cr.User=void 0;const t=_();class e{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}cr.User=e;class n{constructor(i,o,a,s,c,u,l,p){this.privId=i,this.privAvatar=o,this.privDisplayName=a,this.privIsHost=s,this.privIsMuted=c,this.privIsUsingTts=u,this.privPreferredLanguage=l,this.privVoice=p,this.privProperties=new t.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,o,a){return new n(i,"",i,!1,!1,!1,o,a)}}return cr.Participant=n,cr}var SE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))})(SE);var ur={},dS;function yN(){if(dS)return ur;dS=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.MeetingImpl=ur.Meeting=void 0;const t=D(),e=N(),n=B,r=_();let i=class{constructor(){}static createMeetingAsync(s,c,u,l){if(n.Contracts.throwIfNullOrUndefined(s,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(s.region,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),n.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!s.subscriptionKey&&!s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])&&n.Contracts.throwIfNullOrUndefined(s.subscriptionKey,t.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new o(s,c);return e.marshalPromiseToCallbacks((async()=>{})(),u,l),p}};ur.Meeting=i;class o extends i{constructor(s,c){super(),this.privErrors=t.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case t.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case t.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case t.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case t.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case t.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case t.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case t.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const f=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(r.PropertyId.ConversationTranslator_Name);f!==void 0&&f.length>0&&f!==this.me.displayName&&this.changeNicknameAsync(f)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new t.ConversationManager,s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||s.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],t.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=s;const l=s;n.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new t.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var s,c;return(s=this.privParticipants.me)!=null&&s.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const s=this.meetingId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of t.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:s,participants:c,meetingProperties:u}}get canSend(){var s;return this.privIsConnected&&!((s=this.privParticipants.me)!=null&&s.isMuted)}get canSendAsHost(){var s;return this.privIsConnected&&((s=this.privParticipants.me)==null?void 0:s.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),this.privToken=s}createMeetingAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startMeetingAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(s,c,u){n.Contracts.throwIfNullOrUndefined(s,"Participant"),e.marshalPromiseToCallbacks(this.addParticipantImplAsync(s),c,u)}joinMeetingAsync(s,c,u,l,p){try{n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,s,d=>{n.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteMeetingAsync(s,c){e.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),s,c)}async deleteMeetingImplAsync(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(s,c){e.marshalPromiseToCallbacks(this.endMeetingImplAsync(),s,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(s,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(s,c,u){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&s.hasOwnProperty("id"))e.marshalPromiseToCallbacks(this.removeParticipantImplAsync(s),c,u);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof s=="string"?l=s:s.hasOwnProperty("id")?l=s.id:s.hasOwnProperty("userId")&&(l=s.userId),n.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockMeetingAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(s,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(s,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(s,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),s.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(s,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(s,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(s),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(s){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await s.enforceAudioGating(),this.privTranscriberRecognizer=s,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const s=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:s,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(s){if(this.privParticipants.addOrUpdateParticipant(s)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[s],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(s){this.privParticipants.deleteParticipant(s.id);const c=this.meetingInfo;return c.participants=[s],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(s){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}s&&this.dispose()}handleCallback(s,c){if(s){try{s()}catch(u){c&&c(u)}s=void 0}}handleError(s,c){if(c)if(s instanceof Error){const u=s;c(u.name+": "+u.message)}else c(s)}toParticipants(s){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return s?c:c.filter(u=>u.isHost===!1)}toParticipant(s){return new r.Participant(s.id,s.avatar,s.displayName,s.isHost,s.isMuted,s.isUsingTts,s.preferredLanguage,s.voice)}getMuteAllCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMuteCommand(s,c){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setMute,participantId:s,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:s})}getEjectCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.ejectParticipant,participantId:s,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:s})}getChangeNicknameCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(s,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:t.ConversationTranslatorCommandTypes.changeNickname,nickname:s,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:t.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMessageCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(s,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:s,type:t.ConversationTranslatorMessageTypes.instantMessage})}}return ur.MeetingImpl=o,ur}var Bs={},hS;function SN(){if(hS)return Bs;hS=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.MeetingTranscriptionCanceledEventArgs=void 0;const t=Na();class e extends t.CancellationEventArgsBase{}return Bs.MeetingTranscriptionCanceledEventArgs=e,Bs}var Fs={},fS;function CN(){if(fS)return Fs;fS=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.MeetingTranscriber=void 0;const t=D(),e=N(),n=B,r=_(),i=av();let o=class{constructor(s){this.privAudioConfig=s,this.privProperties=new r.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return r.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}joinMeetingAsync(s,c,u){const l=s;n.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new t.TranscriberRecognizer(s.config,this.privAudioConfig),n.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),e.marshalPromiseToCallbacks(l.connectTranscriberRecognizer(this.privRecognizer),c,u)}startTranscribingAsync(s,c){this.privRecognizer.startContinuousRecognitionAsync(s,c)}stopTranscribingAsync(s,c){this.privRecognizer.stopContinuousRecognitionAsync(s,c)}leaveMeetingAsync(s,c){this.privRecognizer.disconnectCallbacks(),e.marshalPromiseToCallbacks((async()=>{})(),s,c)}close(s,c){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),e.marshalPromiseToCallbacks(this.dispose(!0),s,c)}async dispose(s){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),s&&(this.privDisposedRecognizer=!0))}};return Fs.MeetingTranscriber=o,Fs}var Vs={},vS;function PN(){if(vS)return Vs;vS=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.ConversationTranscriptionResult=void 0;const t=_();let e=class extends t.RecognitionResult{constructor(r,i,o,a,s,c,u,l,p,d,h){super(r,i,o,a,s,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return Vs.ConversationTranscriptionResult=e,Vs}var gS;function av(){return gS||(gS=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=gE();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return e.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return e.ConversationImpl}});var n=El;Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return n.ConversationCommon}});var r=cN();Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return r.ConversationExpirationEventArgs}});var i=uN();Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var o=lN();Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return o.ConversationTranslationCanceledEventArgs}});var a=pN();Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var s=dN();Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return s.ConversationTranslationResult}});var c=vN();Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var u=gN();Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return u.ConversationTranscriber}});var l=mN();Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return l.User}});var p=SE;Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var d=yN();Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=SN();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var f=CN();Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return f.MeetingTranscriber}});var m=PN();Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return m.ConversationTranscriptionResult}})}(Yp)),Yp}var lr={},mS;function cv(){if(mS)return lr;mS=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.SynthesisRequest=lr.Synthesizer=void 0;const t=D(),e=N(),n=B,r=_();let i=class CE{constructor(s){const c=s;n.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new e.Queue}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===t.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(s){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),l=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,""),p=CE.XMLEncode(s);return this.autoDetectSourceLanguage?u="en-US":l=l||c[u],l&&(p=`<voice name='${l}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${p}</speak>`,p}async dispose(s){this.privDisposed||(s&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const s=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(s.text,s.isSSML,s.requestId,s.cb,s.err,s.dataStream)}}createSynthesizerConfig(s){return new t.SynthesizerConfig(s,this.privProperties)}implCommonSynthesizeSetup(){let s=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(s=s+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const l=this.createSynthesizerConfig(new t.SpeechServiceConfig(new t.Context(new t.OS(s,c,u)))),p=this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0),d=p&&p!==""?new t.CognitiveSubscriptionKeyAuthentication(p):new t.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,l),this.privRestAdapter=this.createRestSynthesisAdapter(d,l)}static XMLEncode(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};lr.Synthesizer=i;class o{constructor(s,c,u,l,p,d){this.requestId=s,this.text=c,this.isSSML=u,this.cb=l,this.err=p,this.dataStream=d}}return lr.SynthesisRequest=o,lr}var qs={},yS;function RN(){if(yS)return qs;yS=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.SpeechSynthesizer=void 0;const t=D(),e=N(),n=xa,r=Zn,i=Ae,o=B,a=_(),s=cv();let c=class PE extends a.Synthesizer{constructor(l,p){super(l),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(l,p,d){const h=l;return p.properties.mergeTo(h.properties),new PE(l,d)}speakTextAsync(l,p,d,h){this.speakImpl(l,!1,p,d,h)}speakSsmlAsync(l,p,d,h){this.speakImpl(l,!0,p,d,h)}async getVoicesAsync(l=""){return this.getVoices(l)}close(l,p){o.Contracts.throwIfDisposed(this.privDisposed),e.marshalPromiseToCallbacks(this.dispose(!0),l,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(l,p,d){return new t.SpeechSynthesisAdapter(l,p,d,this,this.audioConfig)}createRestSynthesisAdapter(l,p){return new t.SynthesisRestAdapter(p,l)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(l,p,d,h,f){try{o.Contracts.throwIfDisposed(this.privDisposed);const m=e.createNoDashGuid();let S;f instanceof a.PushAudioOutputStreamCallback?S=new i.PushAudioOutputStreamImpl(f):f instanceof a.PullAudioOutputStream?S=f:f!==void 0?S=new n.AudioFileWriter(f):S=void 0,this.synthesisRequestQueue.enqueue(new s.SynthesisRequest(m,l,p,v=>{if(this.privSynthesizing=!1,d)try{d(v)}catch(g){h&&h(g)}d=void 0,this.adapterSpeak().catch(()=>{})},v=>{h&&h(v)},S)),this.adapterSpeak().catch(()=>{})}catch(m){if(h)if(m instanceof Error){const S=m;h(S.name+": "+S.message)}else h(m);this.dispose(!0).catch(()=>{})}}async getVoices(l){const p=e.createNoDashGuid(),d=await this.privRestAdapter.getVoicesList(p);if(d.ok&&Array.isArray(d.json)){let h=d.json;return l&&l.length>0&&(h=h.filter(f=>!!f.Locale&&f.Locale.toLowerCase()===l.toLowerCase())),new a.SynthesisVoicesResult(p,h,void 0)}else return new a.SynthesisVoicesResult(p,void 0,`Error: ${d.status}: ${d.statusText}`)}};return qs.SpeechSynthesizer=c,qs}var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});Tl.SynthesisResult=void 0;class wN{constructor(e,n,r,i){this.privResultId=e,this.privReason=n,this.privErrorDetails=r,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}Tl.SynthesisResult=wN;var Us={},SS;function EN(){if(SS)return Us;SS=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.SpeechSynthesisResult=void 0;const t=_();let e=class extends t.SynthesisResult{constructor(r,i,o,a,s,c){super(r,i,a,s),this.privAudioData=o,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return Us.SpeechSynthesisResult=e,Us}var Il={};Object.defineProperty(Il,"__esModule",{value:!0});Il.SpeechSynthesisEventArgs=void 0;class TN{constructor(e){this.privResult=e}get result(){return this.privResult}}Il.SpeechSynthesisEventArgs=TN;var Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.SpeechSynthesisWordBoundaryEventArgs=void 0;class IN{constructor(e,n,r,i,o,a){this.privAudioOffset=e,this.privDuration=n,this.privText=r,this.privWordLength=i,this.privTextOffset=o,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}Al.SpeechSynthesisWordBoundaryEventArgs=IN;var _l={};Object.defineProperty(_l,"__esModule",{value:!0});_l.SpeechSynthesisBookmarkEventArgs=void 0;class AN{constructor(e,n){this.privAudioOffset=e,this.privText=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}_l.SpeechSynthesisBookmarkEventArgs=AN;var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});Ml.SpeechSynthesisVisemeEventArgs=void 0;class _N{constructor(e,n,r){this.privAudioOffset=e,this.privVisemeId=n,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}Ml.SpeechSynthesisVisemeEventArgs=_N;var RE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={}))})(RE);var $s={},CS;function MN(){if(CS)return $s;CS=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.SynthesisVoicesResult=void 0;const t=_();let e=class extends t.SynthesisResult{constructor(r,i,o){if(Array.isArray(i)){super(r,t.ResultReason.VoicesListRetrieved,void 0,new t.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new t.VoiceInfo(a))}else super(r,t.ResultReason.Canceled,o||"Error information unavailable",new t.PropertyCollection)}get voices(){return this.privVoices}};return $s.SynthesisVoicesResult=e,$s}var wE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0;var e;(function(o){o[o.Unknown=0]="Unknown",o[o.Female=1]="Female",o[o.Male=2]="Male",o[o.Neutral=3]="Neutral"})(e=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={}));var n;(function(o){o[o.OnlineNeural=1]="OnlineNeural",o[o.OnlineStandard=2]="OnlineStandard",o[o.OfflineNeural=3]="OfflineNeural",o[o.OfflineStandard=4]="OfflineStandard"})(n=t.SynthesisVoiceType||(t.SynthesisVoiceType={}));const r={[e[e.Neutral]]:e.Neutral,[e[e.Male]]:e.Male,[e[e.Female]]:e.Female};class i{constructor(a){if(this.privStyleList=[],a){if(this.privName=a.Name,this.privLocale=a.Locale,this.privShortName=a.ShortName,this.privLocaleName=a.LocaleName,this.privDisplayName=a.DisplayName,this.privLocalName=a.LocalName,this.privVoiceType=a.VoiceType.endsWith("Standard")?n.OnlineStandard:n.OnlineNeural,this.privGender=r[a.Gender]||e.Unknown,a.StyleList&&Array.isArray(a.StyleList))for(const s of a.StyleList)this.privStyleList.push(s);this.privSampleRateHertz=a.SampleRateHertz,this.privStatus=a.Status,a.ExtendedPropertyMap&&(this.privExtendedPropertyMap=a.ExtendedPropertyMap),this.privWordsPerMinute=a.WordsPerMinute,Array.isArray(a.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...a.SecondaryLocaleList]),Array.isArray(a.RolePlayList)&&(this.privRolePlayList=[...a.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}t.VoiceInfo=i})(wE);var kl={};Object.defineProperty(kl,"__esModule",{value:!0});kl.SpeakerAudioDestination=void 0;const pr=N(),kN=Ae,et=Yn,bN=60*30,PS={[et.AudioFormatTag.PCM]:"audio/wav",[et.AudioFormatTag.MuLaw]:"audio/x-wav",[et.AudioFormatTag.MP3]:"audio/mpeg",[et.AudioFormatTag.OGG_OPUS]:"audio/ogg",[et.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[et.AudioFormatTag.ALaw]:"audio/x-wav",[et.AudioFormatTag.FLAC]:"audio/flac",[et.AudioFormatTag.AMR_WB]:"audio/amr-wb",[et.AudioFormatTag.G722]:"audio/G722"};class DN{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||pr.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,n,r){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(()=>{n&&n()},i=>{r&&r(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,n){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{e&&e()},r=>{n&&n(r)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===et.AudioFormatTag.PCM||this.privFormat.formatTag===et.AudioFormatTag.MuLaw||this.privFormat.formatTag===et.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(()=>{r=this.privFormat.addHeader(r);const i=new Blob([r],{type:PS[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{e&&e()},o=>{n&&n(o)})},i=>{n&&n(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=e;const n=PS[this.privFormat.formatTag];n===void 0?console.warn(`Unknown mimeType for format ${et.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(n)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=bN,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(n),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(r=>{pr.Events.instance.onEvent(new pr.BackgroundEvent(r))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(r=>{pr.Events.instance.onEvent(new pr.BackgroundEvent(r))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(r=>{pr.Events.instance.onEvent(new pr.BackgroundEvent(r))})):(console.warn(`Format ${et.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new kN.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e;return((e=this.privAudio)==null?void 0:e.volume)??-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,n){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{e&&e()},r=>{n&&n(r)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch{this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}kl.SpeakerAudioDestination=DN;var Ws={},RS;function ON(){if(RS)return Ws;RS=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.ConversationTranscriptionCanceledEventArgs=void 0;const t=Na();let e=class extends t.CancellationEventArgsBase{};return Ws.ConversationTranscriptionCanceledEventArgs=e,Ws}var Hs={},wS;function xN(){if(wS)return Hs;wS=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.MeetingTranscriptionCanceledEventArgs=void 0;const t=Na();let e=class extends t.CancellationEventArgsBase{};return Hs.MeetingTranscriptionCanceledEventArgs=e,Hs}var EE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))})(EE);var TE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))})(TE);var Ks={},ES;function NN(){if(ES)return Ks;ES=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.PronunciationAssessmentConfig=void 0;const t=B,e=_();let n=class IE{constructor(i,o=e.PronunciationAssessmentGradingSystem.FivePoint,a=e.PronunciationAssessmentGranularity.Phoneme,s=!1){t.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new e.PropertyCollection,this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_GradingSystem,e.PronunciationAssessmentGradingSystem[o]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Granularity,e.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,String(s))}static fromJSON(i){t.Contracts.throwIfNullOrUndefined(i,"json");const o=new IE("");return o.privProperties=new e.PropertyCollection,o.properties.setProperty(e.PropertyId.PronunciationAssessment_Json,i),o}toJSON(){return this.updateJson(),this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const o=i.internalData;o.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,o.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(e.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,o.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){t.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(e.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){t.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const o=i?"true":"false";this.properties.setProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,o)}get enableMiscue(){return this.properties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Json,"{}"),o=JSON.parse(i),a=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_ReferenceText);a&&(o.referenceText=a);const s=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_GradingSystem);s&&(o.gradingSystem=s);const c=this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_Granularity);c&&(o.granularity=c),this.privPhonemeAlphabet&&(o.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(o.nbestPhonemeCount=this.privNBestPhonemeCount),o.enableProsodyAssessment=this.privEnableProsodyAssessment,o.dimension="Comprehensive",this.privProperties.getProperty(e.PropertyId.PronunciationAssessment_EnableMiscue)&&(o.enableMiscue=this.enableMiscue),this.privProperties.setProperty(e.PropertyId.PronunciationAssessment_Params,JSON.stringify(o))}};return Ks.PronunciationAssessmentConfig=n,Ks}var dr={},TS;function zN(){if(TS)return dr;TS=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.PronunciationAssessmentResult=dr.ContentAssessmentResult=void 0;const t=B,e=_();class n{constructor(o){this.privPronJson=o}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}dr.ContentAssessmentResult=n;let r=class AE{constructor(o){const a=JSON.parse(o);t.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(o){t.Contracts.throwIfNullOrUndefined(o,"result");const a=o.properties.getProperty(e.PropertyId.SpeechServiceResponse_JsonResult);return t.Contracts.throwIfNullOrUndefined(a,"json"),new AE(a)}get detailResult(){return this.privPronJson}get accuracyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.AccuracyScore}get pronunciationScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.PronScore}get completenessScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.CompletenessScore}get fluencyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.FluencyScore}get prosodyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new n(this.detailResult)}};return dr.PronunciationAssessmentResult=r,dr}var Gs={},IS;function jN(){if(IS)return Gs;IS=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.AvatarConfig=void 0;const t=B,e=_();let n=class{constructor(i,o,a){this.privCustomized=!1,t.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=o,a===void 0&&(a=new e.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(i){this.privBackgroundImage=i}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(i){this.privRemoteIceServers=i}};return Gs.AvatarConfig=n,Gs}var _E={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,function(n){n.SwitchedToSpeaking="SwitchedToSpeaking",n.SwitchedToIdle="SwitchedToIdle",n.SessionClosed="SessionClosed"}(t.AvatarEventTypes||(t.AvatarEventTypes={}));class e{constructor(r,i){this.privOffset=r,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}t.AvatarEventArgs=e})(_E);var Js={},Qs={},AS;function ME(){if(AS)return Qs;AS=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.SpeechSynthesisConnectionFactory=void 0;const t=we(),e=_(),n=Bt(),r=D(),i=Re,o=Lt;let a=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(c,u,l){let p=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),h=n.ConnectionFactoryBase.getHostSuffix(d),f=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=f===void 0?"tts":"voice",S=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+m+".speech"+h),v={},g={};u.token!==void 0&&u.token!==""&&(g[u.headerName]=u.token),g[i.HeaderNames.ConnectionId]=l,f!==void 0&&f!==""&&(!p||p.search(o.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(v[o.QueryParameterNames.CustomVoiceDeploymentId]=f),c.avatarEnabled&&(!p||p.search(o.QueryParameterNames.EnableAvatar)===-1)&&(v[o.QueryParameterNames.EnableAvatar]="true"),p||(p=S+this.synthesisUri),c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const y=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,v,g,new r.WebsocketMessageFormatter,t.ProxyInfo.fromParameters(c.parameters),y,l)}};return Qs.SpeechSynthesisConnectionFactory=a,Qs}var _S;function LN(){if(_S)return Js;_S=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.AvatarSynthesizer=void 0;const t=ME(),e=D(),n=N(),r=Zn,i=_(),o=B,a=cv();let s=class extends i.Synthesizer{constructor(u,l){super(u),o.Contracts.throwIfNullOrUndefined(l,"avatarConfig"),this.privConnectionFactory=new t.SpeechSynthesisConnectionFactory,this.privAvatarConfig=l,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(u){o.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,o.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const l=new n.Deferred;u.onicegatheringstatechange=()=>{n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,n.EventType.Debug)),u.iceGatheringState==="complete"&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering complete.",n.EventType.Info)),l.resolve())},u.onicecandidate=m=>{m.candidate?n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: "+m.candidate.candidate,n.EventType.Debug)):(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: complete",n.EventType.Debug)),l.resolve())},setTimeout(()=>{u.iceGatheringState!=="complete"&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering timeout.",n.EventType.Warning)),l.resolve())},2e3);const p=await u.createOffer();await u.setLocalDescription(p),await l.promise,n.Events.instance.onEvent(new n.PlatformEvent("peer connection: got local SDP.",n.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const d=await this.speak("",!1);if(d.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),f=new RTCSessionDescription(JSON.parse(h));return await u.setRemoteDescription(f),new i.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(u){const l=await this.speak(u,!1);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async speakSsmlAsync(u){const l=await this.speak(u,!0);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return o.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,l,p){return new e.AvatarSynthesisAdapter(u,l,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,l){}createSynthesizerConfig(u){const l=super.createSynthesizerConfig(u);return l.avatarEnabled=!0,l}async speak(u,l){const p=n.createNoDashGuid(),d=new n.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(p,u,l,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return Js.AvatarSynthesizer=s,Js}var Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.AvatarVideoFormat=Ri.Coordinate=void 0;class BN{constructor(e,n){this.x=e,this.y=n}}Ri.Coordinate=BN;class FN{constructor(e="H264",n=2e6,r=1920,i=1080){this.codec=e,this.bitrate=n,this.width=r,this.height=i}setCropRange(e,n){this.cropRange={bottomRight:n,topLeft:e}}}Ri.AvatarVideoFormat=FN;var Xs={},MS;function VN(){if(MS)return Xs;MS=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.AvatarWebRTCConnectionResult=void 0;const t=_();let e=class extends t.SynthesisResult{constructor(r,i,o,a,s){super(i,o,a,s),this.privSDPAnswer=r}get SDPAnswer(){return this.privSDPAnswer}};return Xs.AvatarWebRTCConnectionResult=e,Xs}var Ys={},kS;function qN(){if(kS)return Ys;kS=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.Diagnostics=void 0;const t=we(),e=N();let n=class{static SetLoggingLevel(i){this.privListener=new t.ConsoleLoggingListener(i),e.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}static set onLogOutput(i){this.privListener&&(this.privListener.logCallback=i)}};return Ys.Diagnostics=n,n.privListener=void 0,Ys}var bS;function _(){return bS||(bS=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Kw();Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return e.AudioConfig}});var n=Yn;Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return n.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return n.AudioFormatTag}});var r=qw();Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return r.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return r.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return r.PushAudioInputStream}});var i=Ae;Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var o=Gw;Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return o.CancellationReason}});var a=cl;Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var s=ul;Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return s.PushAudioOutputStreamCallback}});var c=ll;Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var u=pl;Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return u.SessionEventArgs}});var l=mx();Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var p=Jw;Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var d=yx();Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=dl;Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var f=Cx();Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return f.SpeechRecognitionResult}});var m=Px();Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return m.IntentRecognitionResult}});var S=Pi;Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return S.LanguageUnderstandingModel}});var v=Rx();Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return v.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return v.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return v.MeetingTranscriptionEventArgs}});var g=wx();Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return g.SpeechRecognitionCanceledEventArgs}});var y=Ex();Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return y.TranslationRecognitionEventArgs}});var C=Tx();Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var P=Yw();Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return P.TranslationRecognitionResult}});var w=hl;Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return w.TranslationSynthesisResult}});var I=Zw;Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return I.ResultReason}});var R=Ax();Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return R.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return R.SpeechConfigImpl}});var A=_x();Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return A.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return A.SpeechTranslationConfigImpl}});var O=tE();Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return O.PropertyCollection}});var F=fl;Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return F.PropertyId}});var J=Mx();Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return J.Recognizer}});var G=kx();Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return G.SpeechRecognizer}});var Ke=bx();Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return Ke.IntentRecognizer}});var It=iE;Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return It.VoiceProfileType}});var Se=Dx();Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return Se.TranslationRecognizer}});var re=Ox();Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return re.Translations}});var k=cE;Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return k.NoMatchReason}});var x=xx();Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return x.NoMatchDetails}});var L=vl;Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return L.TranslationRecognitionCanceledEventArgs}});var Y=zx();Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Y.IntentRecognitionCanceledEventArgs}});var ce=za;Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return ce.CancellationDetailsBase}});var yn=Lx();Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return yn.CancellationDetails}});var ft=pE;Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return ft.CancellationErrorCode}});var vt=Bx();Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return vt.ConnectionEventArgs}});var Oe=Fx();Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return Oe.ServiceEventArgs}});var At=oE();Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return At.Connection}});var Oi=gl;Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return Oi.PhraseListGrammar}});var _t=rv();Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return _t.DialogServiceConfig}});var Sn=Vx();Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return Sn.BotFrameworkConfig}});var Fa=qx();Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return Fa.CustomCommandsConfig}});var Ql=$x();Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return Ql.DialogServiceConnector}});var xi=ml;Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return xi.ActivityReceivedEventArgs}});var Va=yl;Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Va.TurnStatusReceivedEventArgs}});var qa=dE;Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return qa.ServicePropertyChannel}});var Ua=hE;Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return Ua.ProfanityOption}});var $a=Gx();Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return $a.BaseAudioPlayer}});var Wa=Cl;Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return Wa.ConnectionMessageEventArgs}});var Ni=sE();Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return Ni.ConnectionMessage}});var qE=Pl;Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return qE.VoiceProfile}});var Rv=Xx();Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return Rv.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return Rv.VoiceProfileEnrollmentCancellationDetails}});var wv=Yx();Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return wv.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return wv.VoiceProfileCancellationDetails}});var UE=Zx();Object.defineProperty(t,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return UE.VoiceProfilePhraseResult}});var $E=eN();Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return $E.VoiceProfileClient}});var WE=tN();Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return WE.SpeakerRecognizer}});var HE=nN();Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return HE.SpeakerIdentificationModel}});var KE=rN();Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return KE.SpeakerVerificationModel}});var GE=iN();Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return GE.AutoDetectSourceLanguageConfig}});var JE=Rl;Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return JE.AutoDetectSourceLanguageResult}});var QE=wl;Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return QE.SourceLanguageConfig}});var Xl=oN();Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return Xl.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return Xl.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return Xl.SpeakerRecognitionCancellationDetails}});var Ze=av();Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return Ze.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Ze.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Ze.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Ze.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Ze.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return Ze.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return Ze.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return Ze.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Ze.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return Ze.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return Ze.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return Ze.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return Ze.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return Ze.User}});var XE=cv();Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return XE.Synthesizer}});var YE=Zf;Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return YE.SpeechSynthesisOutputFormat}});var ZE=RN();Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return ZE.SpeechSynthesizer}});var eT=Tl;Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return eT.SynthesisResult}});var tT=EN();Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return tT.SpeechSynthesisResult}});var nT=Il;Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return nT.SpeechSynthesisEventArgs}});var rT=Al;Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return rT.SpeechSynthesisWordBoundaryEventArgs}});var iT=_l;Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return iT.SpeechSynthesisBookmarkEventArgs}});var sT=Ml;Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return sT.SpeechSynthesisVisemeEventArgs}});var oT=RE;Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return oT.SpeechSynthesisBoundaryType}});var aT=MN();Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return aT.SynthesisVoicesResult}});var cT=wE;Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return cT.VoiceInfo}});var uT=kl;Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return uT.SpeakerAudioDestination}});var lT=ON();Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return lT.ConversationTranscriptionCanceledEventArgs}});var pT=xN();Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return pT.MeetingTranscriptionCanceledEventArgs}});var dT=EE;Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return dT.PronunciationAssessmentGradingSystem}});var hT=TE;Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return hT.PronunciationAssessmentGranularity}});var fT=NN();Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return fT.PronunciationAssessmentConfig}});var vT=zN();Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return vT.PronunciationAssessmentResult}});var gT=sv;Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return gT.LanguageIdMode}});var mT=jN();Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return mT.AvatarConfig}});var yT=_E;Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return yT.AvatarEventArgs}});var ST=LN();Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return ST.AvatarSynthesizer}});var Ev=Ri;Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return Ev.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return Ev.Coordinate}});var CT=VN();Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return CT.AvatarWebRTCConnectionResult}});var PT=qN();Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return PT.Diagnostics}});var RT=Xf;Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return RT.LogLevel}})}(Jp)),Jp}var DS;function UN(){if(DS)return Xi;DS=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.ProxyInfo=void 0;const t=_();let e=class kE{constructor(r,i,o,a){this.privProxyHostName=r,this.privProxyPort=i,this.privProxyUserName=o,this.privProxyPassword=a}static fromParameters(r){return new kE(r.getProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(r.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPort),10),r.getProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName),r.getProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(r){return this.fromParameters(r.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return Xi.ProxyInfo=e,Xi}var bE={};const $N=new Set(["json","buffer","string"]);var WN=t=>(...e)=>{const n=new Set;let r,i,o,a="";return e.forEach(s=>{if(typeof s=="string")if(s.toUpperCase()===s)if(r){const c=`Can't set method to ${s}, already set to ${r}.`;throw new Error(c)}else r=s;else if(s.startsWith("http:")||s.startsWith("https:"))a=s;else if($N.has(s))i=s;else throw new Error(`Unknown encoding, ${s}`);else if(typeof s=="number")n.add(s);else if(typeof s=="object")if(Array.isArray(s)||s instanceof Set)s.forEach(c=>n.add(c));else{if(o)throw new Error("Cannot set headers twice.");o=s}else throw new Error(`Unknown type: ${typeof s}`)}),r||(r="GET"),n.size===0&&n.add(200),t(n,r,i,o,a)};const HN=WN;class uv extends Error{constructor(e,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,uv),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);let r;Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(const[o,a]of e.headers.entries())this.headers[o.toLowerCase()]=a}}const KN=(t,e,n,r,i)=>async(o,a,s={})=>{o=i+(o||"");let c=new URL(o);if(r||(r={}),c.username&&(r.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),r["Content-Type"]="application/json";else throw new Error("Unknown body type.");s=new Headers({...r||{},...s});const u=await fetch(c,{method:e,headers:s,body:a});if(u.statusCode=u.status,!t.has(u.status))throw new uv(u);return n==="json"?u.json():n==="buffer"?u.arrayBuffer():n==="string"?u.text():u};var GN=HN(KN);(function(t){var e=$&&$.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;const n=e(GN),r=N();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=t.RestRequestType||(t.RestRequestType={}));class o{constructor(s){if(!s)throw new r.ArgumentNullError("configParams");this.privHeaders=s.headers,this.privIgnoreCache=s.ignoreCache}static extractHeaderValue(s,c){let u="";try{const l=c.trim().split(/[\r\n]+/),p={};l.forEach(d=>{const h=d.split(": "),f=h.shift().toLowerCase(),m=h.join(": ");p[f]=m}),u=p[s.toLowerCase()]}catch{}return u}set options(s){this.privHeaders=s.headers,this.privIgnoreCache=s.ignoreCache}setHeaders(s,c){this.privHeaders[s]=c}request(s,c,u={},l=null){const p=new r.Deferred,d=s===i.File?"POST":s,h=(m,S={})=>{const v=m;return{data:JSON.stringify(S),headers:JSON.stringify(m.headers),json:S,ok:m.statusCode>=200&&m.statusCode<300,status:m.statusCode,statusText:S.error?S.error.message:v.statusText?v.statusText:v.statusMessage}},f=m=>{const S=n.default(c,d,this.privHeaders,200,201,202,204,400,401,402,403,404),v=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;S(v,m).then(async g=>{if(s===i.Delete||g.statusCode===204)p.resolve(h(g));else try{const y=await g.json();p.resolve(h(g,y))}catch{p.resolve(h(g))}}).catch(g=>{p.reject(g)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),s===i.Post&&l&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),f(l),p.promise}queryParams(s={}){return Object.keys(s).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(s[c])).join("&")}}t.RestMessageAdapter=o})(bE);var La={};Object.defineProperty(La,"__esModule",{value:!0});La.RestConfigBase=void 0;class Bn{static get requestOptions(){return Bn.privDefaultRequestOptions}static get configParams(){return Bn.privDefaultParams}static get restErrors(){return Bn.privRestErrors}}La.RestConfigBase=Bn;Bn.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};Bn.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};Bn.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var OS;function we(){return OS||(OS=1,function(t){var e=$&&$.__createBinding||(Object.create?function(r,i,o,a){a===void 0&&(a=o),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[o]}})}:function(r,i,o,a){a===void 0&&(a=o),r[a]=i[o]}),n=$&&$.__exportStar||function(r,i){for(var o in r)o!=="default"&&!i.hasOwnProperty(o)&&e(i,r,o)};Object.defineProperty(t,"__esModule",{value:!0}),n(il,t),n(Fw,t),n(WO(),t),n(HO(),t),n(sl,t),n(ol,t),n(Oa,t),n(al,t),n(UN(),t),n(bE,t),n(La,t)}(Hp)),Hp}var xS;function JN(){if(xS)return Gi;xS=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.IntentConnectionFactory=void 0;const t=we(),e=_(),n=Bt(),r=D(),i=Re;let o=class extends n.ConnectionFactoryBase{create(s,c,u){let l=s.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const f=s.parameters.getProperty(e.PropertyId.SpeechServiceConnection_IntentRegion),m=n.ConnectionFactoryBase.getHostSuffix(f);l=s.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+f+".sr.speech"+m)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:s.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(s,p,l);const d={};c.token!==void 0&&c.token!==""&&(d[c.headerName]=c.token),d[i.HeaderNames.ConnectionId]=u,s.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,l);const h=s.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(l,p,d,new r.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(s),h,u)}getSpeechRegionFromIntentRegion(s){switch(s){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return s}}};return Gi.IntentConnectionFactory=o,Gi}var hr={},NS;function QN(){if(NS)return hr;NS=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.VoiceProfileConnectionFactory=hr.SpeakerRecognitionConnectionFactory=void 0;const t=we(),e=_(),n=Bt(),r=D(),i=Re;class o extends n.ConnectionFactoryBase{create(u,l,p,d){let h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const v=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region),g=n.ConnectionFactoryBase.getHostSuffix(v),y=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`wss://${v}.spr-frontend.speech${g}`),C=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${y}/speaker/ws/${this.scenarioToPath(C)}/${p}`}const f={format:"simple",language:u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(u,f,h);const m={};l.token!==void 0&&l.token!==""&&(m[l.headerName]=l.token),m[i.HeaderNames.ConnectionId]=d,m[i.HeaderNames.SpIDAuthKey]=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Key),u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,h);const S=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(h,f,m,new r.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),S,d)}scenarioToPath(u){switch(u){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends o{create(u,l,p){return super.create(u,l,"recognition",p)}};hr.SpeakerRecognitionConnectionFactory=a;class s extends o{create(u,l,p){return super.create(u,l,"profile",p)}}return hr.VoiceProfileConnectionFactory=s,hr}var bl={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;const e=N();class n extends e.PlatformEvent{constructor(l,p,d,h=e.EventType.Info){super(l,h),this.privRequestId=p,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}t.SpeechRecognitionEvent=n;class r extends n{constructor(l,p,d,h){super("RecognitionTriggeredEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.RecognitionTriggeredEvent=r;class i extends n{constructor(l,p,d,h){super("ListeningStartedEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}t.ListeningStartedEvent=i;class o extends n{constructor(l,p,d){super("ConnectingToServiceEvent",l,d),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}t.ConnectingToServiceEvent=o;class a extends n{constructor(l,p,d,h,f){super("RecognitionStartedEvent",l,f),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}t.RecognitionStartedEvent=a;var s;(function(u){u[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError"})(s=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));class c extends n{constructor(l,p,d,h,f,m,S,v){super("RecognitionEndedEvent",l,f,S===s.Success?e.EventType.Info:e.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=S,this.privError=v,this.privServiceTag=m}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}t.RecognitionEndedEvent=c})(bl);var Zs={},mn={};Object.defineProperty(mn,"__esModule",{value:!0});mn.SpeechConnectionMessage=void 0;const ed=N(),Xt=Re;class lv extends ed.ConnectionMessage{constructor(e,n,r,i,o,a,s,c){if(!n)throw new ed.ArgumentNullError("path");if(!r)throw new ed.ArgumentNullError("requestId");const u={};if(u[Xt.HeaderNames.Path]=n,u[Xt.HeaderNames.RequestId]=r,u[Xt.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(u[Xt.HeaderNames.ContentType]=i),a&&(u[Xt.HeaderNames.RequestStreamId]=a),s)for(const l in s)l&&(u[l]=s[l]);c?super(e,o,u,c):super(e,o,u),this.privPath=n,this.privRequestId=r,this.privContentType=i,this.privStreamId=a,this.privAdditionalHeaders=s}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let n=null,r=null,i=null,o=null;const a={};if(e.headers)for(const s in e.headers)s&&(s.toLowerCase()===Xt.HeaderNames.Path.toLowerCase()?n=e.headers[s]:s.toLowerCase()===Xt.HeaderNames.RequestId.toLowerCase()?r=e.headers[s]:s.toLowerCase()===Xt.HeaderNames.ContentType.toLowerCase()?i=e.headers[s]:s.toLowerCase()===Xt.HeaderNames.RequestStreamId.toLowerCase()?o=e.headers[s]:a[s]=e.headers[s]);return new lv(e.messageType,n,r,i,e.body,o,a,e.id)}}mn.SpeechConnectionMessage=lv;var zS;function XN(){if(zS)return Zs;zS=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.ServiceRecognizerBase=void 0;const t=we(),e=N(),n=_(),r=D(),i=mn;let o=class zo{constructor(s,c,u,l,p){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!s)throw new e.ArgumentNullError("authentication");if(!c)throw new e.ArgumentNullError("connectionFactory");if(!u)throw new e.ArgumentNullError("audioSource");if(!l)throw new e.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=l.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=s,this.privConnectionFactory=c,this.privAudioSource=u,this.privRecognizerConfig=l,this.privIsDisposed=!1,this.privRecognizer=p,this.privRequestSession=new r.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privDynamicGrammar=new r.DynamicGrammarBuilder,this.privSpeechContext=new r.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new r.AgentConfig,this.privRecognizerConfig.parameters.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=e.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const f=h;(f.statusCode===1003||f.statusCode===1007||f.statusCode===1002||f.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(n.CancellationReason.Error,f.statusCode===1007?n.CancellationErrorCode.BadRequestParameters:n.CancellationErrorCode.ConnectionFailure,`${f.reason} websocket error code: ${f.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=e.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const s=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(s!==void 0){const c=s.split(","),u=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),l=u!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:l},output:{interimResults:{mode:"Always"}},targetLanguages:c}),u!==void 0){const p={};for(const d of c)p[d]=u;this.privSpeechContext.setSection("synthesis",{defaultVoices:p})}}}setSpeechSegmentationTimeoutJson(){const s=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(s!==void 0){const c=this.recognitionMode===r.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===r.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",u=parseInt(s,10),l=this.privSpeechContext.getSection("phraseDetection");l.mode=c,l[c]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:u}},this.privSpeechContext.setSection("phraseDetection",l)}}setLanguageIdJson(){const s=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const u=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let l;this.privRecognizerConfig.languageIdMode==="Continuous"?l="DetectContinuous":l="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:u,mode:l,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const p=this.privRecognizerConfig.sourceLanguageModels;p!==void 0&&(s.customModels=p,s.onInterim={action:"None"},s.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(s.onInterim={action:"Translate"},s.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",s)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(r.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()===n.OutputFormat[n.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(s){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.ConversationTranslator_Token,s)}set voiceProfileType(s){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.SpeechServiceConnection_SpeakerIdMode,s)}set authentication(s){this.privAuthentication=s}isDisposed(){return this.privIsDisposed}async dispose(s){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{await(await this.privConnectionConfigurationPromise).dispose(s)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(s,c,u){if(this.recognizeOverride!==void 0){await this.recognizeOverride(s,c,u);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=s,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=c,this.privErrorCallback=u,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const l=this.connectImpl();let p;try{const f=await this.audioSource.attach(this.privRequestSession.audioNodeId),m=await this.audioSource.format,S=await this.audioSource.deviceInfo;this.privIsLiveAudio=S.type&&S.type===r.type.Microphones,p=new t.ReplayableAudioNode(f,m.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(p,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:S}}catch(f){throw await this.privRequestSession.onStopRecognizing(),f}try{await l}catch(f){await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,f);return}const d=new n.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(p).catch(async f=>{await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,f)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(s,c){this.connectImpl().then(()=>{try{s&&s()}catch(u){c&&c(u)}},u=>{try{c&&c(u)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(s){}async sendNetworkMessage(s,c){const u=typeof c=="string"?e.MessageType.Text:e.MessageType.Binary,l=typeof c=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(u,s,this.privRequestSession.requestId,l,c))}set activityTemplate(s){this.privActivityTemplate=s}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(s){this.privExpectContentAssessmentResponse=s}async sendTelemetryData(){const s=this.privRequestSession.getTelemetry();if(zo.telemetryDataEnabled!==!0||this.privIsDisposed||s===null)return;if(zo.telemetryData)try{zo.telemetryData(s)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",s))}async cancelRecognitionLocal(s,c,u){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s,c,u))}async receiveMessage(){try{if(this.privIsDisposed)return;let s=await this.fetchConnection();const c=await s.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!c)return this.receiveMessage();this.privServiceHasSentMessage=!0;const u=i.SpeechConnectionMessage.fromConnectionMessage(c);if(u.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const l=r.SpeechDetected.fromJSON(u.textBody),p=new n.RecognitionEventArgs(l.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p);break;case"speech.enddetected":let d;u.textBody.length>0?d=u.textBody:d="{ Offset: 0 }";const h=r.SpeechDetected.fromJSON(d),f=new n.RecognitionEventArgs(h.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,f);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(n.CancellationReason.EndOfStream,n.CancellationErrorCode.NoError,void 0));const m=new n.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,m);return}else s=await this.fetchConnection(),await this.sendPrePayloadJSON(s);break;default:await this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const s=this.privRequestSession.recognitionBytesSent,c=this.privAverageBytesPerMs!==0?s/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(c)}sendSpeechContext(s,c){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const u=this.speechContext.toJSON();if(c&&this.privRequestSession.onSpeechContext(),u)return s.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",u))}noOp(){}async sendPrePayloadJSON(s,c=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(s);await this.sendSpeechContext(s,c),await this.sendWaveHeader(s)}async sendWaveHeader(s){const c=await this.audioSource.format;return s.send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",c.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(s=>s.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(s,c,u){if(c.onSpeechContext(),zo.telemetryDataEnabled!==!0){const p={context:{system:JSON.parse(u).context.system}};u=JSON.stringify(p)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const l=JSON.parse(u);l.context.DisableReferenceChannel="True",l.context.MicSpec="1_0_0",u=JSON.stringify(l)}if(u)return s.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speech.config",c.requestId,"application/json",u))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(s=>s.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(s){const c=await this.audioSource.format;this.privAverageBytesPerMs=c.avgBytesPerSec/1e3;let u=Date.now();const l=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),p=c.avgBytesPerSec/1e3*parseInt(l,10),d=this.privRequestSession.recogNumber,h=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d){const f=await this.fetchConnection(),m=await s.read();if(this.privRequestSession.isSpeechEnded)return;let S,v;if(!m||m.isEnd?(S=null,v=0):(S=m.buffer,this.privRequestSession.onAudioSent(S.byteLength),p>=this.privRequestSession.bytesSent?v=0:v=Math.max(0,u-Date.now())),v!==0&&await this.delay(v),S!==null&&(u=Date.now()+S.byteLength*1e3/(c.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d)if(f.send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,S)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),m!=null&&m.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return h()}};return h()}async retryableConnect(){let s=!1;this.privAuthFetchEventId=e.createNoDashGuid();const c=this.privRequestSession.sessionId;this.privConnectionId=c!==void 0?c:e.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let u=0,l="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const d=await(s?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const h=this.privConnectionFactory.create(this.privRecognizerConfig,d,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(h.events),h.events.attach(m=>{this.connectionEvents.onEvent(m)});const f=await h.open();if(f.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(f.statusCode),Promise.resolve(h);f.statusCode===1006&&(s=!0),u=f.statusCode,l=f.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(u,l),Promise.reject(`Unable to contact server. StatusCode: ${u}, ${this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${l}`)}delay(s){return new Promise(c=>this.privSetTimeout(c,s))}writeBufferToConsole(s){let c="Buffer Size: ";if(s===null)c+="null";else{const u=new Uint8Array(s);c+=`${s.byteLength}\r
`;for(let l=0;l<s.byteLength;l++)c+=u[l].toString(16).padStart(2,"0")+" ",(l+1)%16===0&&(console.info(c),c="")}console.info(c)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(e.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const s=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(s):(await this.sendSpeechServiceConfig(s,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(s,!1),s)}};return Zs.ServiceRecognizerBase=o,o.telemetryDataEnabled=!0,Zs}var eo={},jS;function YN(){if(jS)return eo;jS=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.ConversationServiceRecognizer=void 0;const t=_(),e=D();let n=class extends e.ServiceRecognizerBase{constructor(i,o,a,s,c){super(i,o,a,s,c),this.handleSpeechPhraseMessage=async u=>this.handleSpeechPhrase(u),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,o,a){}handleRecognizingCallback(i,o,a){}async processSpeechMessages(i){let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),o=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),o=!0;break}return o}cancelRecognition(i,o,a,s,c){}async handleSpeechPhrase(i){const o=e.SimpleSpeechPhrase.fromJSON(i),a=e.EnumTranslation.implTranslateRecognitionResult(o.RecognitionStatus);let s;const c=new t.PropertyCollection;c.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i);const u=o.Offset+this.privRequestSession.currentTurnAudioOffset;let l=u;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+o.Offset+o.Duration),t.ResultReason.Canceled===a){const p=e.EnumTranslation.implTranslateCancelResult(o.RecognitionStatus),d=e.EnumTranslation.implTranslateCancelErrorCode(o.RecognitionStatus);await this.cancelRecognitionLocal(p,d,e.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&a===t.ResultReason.NoMatch&&o.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,o.DisplayText,o.Duration,u,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,i,c);else{const p=e.DetailedSpeechPhrase.fromJSON(i),d=p.Offset+this.privRequestSession.currentTurnAudioOffset,h=p.getJsonWithCorrectedOffsets(d);s=new t.SpeechRecognitionResult(this.privRequestSession.requestId,a,p.Text,p.Duration,d,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,h,c),l=s.offset}this.handleRecognizedCallback(s,l,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const o=e.SpeechHypothesis.fromJSON(i),a=o.Offset+this.privRequestSession.currentTurnAudioOffset,s=new t.PropertyCollection;s.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i);const c=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,o.Text,o.Duration,a,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,i,s);this.privRequestSession.onHypothesis(a),this.handleRecognizingCallback(c,o.Duration,this.privRequestSession.sessionId)}};return eo.ConversationServiceRecognizer=n,eo}var td={},LS;function ZN(){return LS||(LS=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;const e=_(),n=D();var r;(function(o){o[o.Interactive=0]="Interactive",o[o.Conversation=1]="Conversation",o[o.Dictation=2]="Dictation"})(r=t.RecognitionMode||(t.RecognitionMode={})),function(o){o[o.Simple=0]="Simple",o[o.Detailed=1]="Detailed"}(t.SpeechResultFormat||(t.SpeechResultFormat={}));class i{constructor(a,s){this.privSpeechServiceConfig=a||new n.SpeechServiceConfig(new n.Context(null)),this.privParameters=s,this.privMaxRetryCount=parseInt(s.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=s.getProperty(e.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===r.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==r.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const a=[];let s=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const u=c+e.PropertyId.SpeechServiceConnection_EndpointId.toString(),l=this.parameters.getProperty(u,void 0);l!==void 0?(a.push({language:c,endpoint:l}),s=!0):a.push({language:c,endpoint:""})}return s?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}t.RecognizerConfig=i}(td)),td}var DE={};Object.defineProperty(DE,"__esModule",{value:!0});var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.WebsocketMessageFormatter=void 0;const mt=N(),BS=`\r
`;class ez{toConnectionMessage(e){const n=new mt.Deferred;try{if(e.messageType===mt.MessageType.Text){const r=e.textContent;let i={},o=null;if(r){const a=r.split(`\r
\r
`);a&&a.length>0&&(i=this.parseHeaders(a[0]),a.length>1&&(o=a[1]))}n.resolve(new mt.ConnectionMessage(e.messageType,o,i,e.id))}else if(e.messageType===mt.MessageType.Binary){const r=e.binaryContent;let i={},o=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(r),s=a.getInt16(0);if(r.byteLength<s+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<s;u++)c+=String.fromCharCode(a.getInt8(u+2));i=this.parseHeaders(c),r.byteLength>s+2&&(o=r.slice(2+s)),n.resolve(new mt.ConnectionMessage(e.messageType,o,i,e.id))}}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(e){const n=new mt.Deferred;try{if(e.messageType===mt.MessageType.Text){const r=`${this.makeHeaders(e)}${BS}${e.textBody?e.textBody:""}`;n.resolve(new mt.RawWebsocketMessage(mt.MessageType.Text,r,e.id))}else if(e.messageType===mt.MessageType.Binary){const r=this.makeHeaders(e),i=e.binaryBody,o=this.stringToArrayBuffer(r),a=new Int8Array(o),s=a.byteLength,c=new Int8Array(2+s+(i?i.byteLength:0));if(c[0]=s>>8&255,c[1]=s&255,c.set(a,2),i){const l=new Int8Array(i);c.set(l,2+s)}const u=c.buffer;n.resolve(new mt.RawWebsocketMessage(mt.MessageType.Binary,u,e.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}makeHeaders(e){let n="";if(e.headers)for(const r in e.headers)r&&(n+=`${r}: ${e.headers[r]}${BS}`);return n}parseHeaders(e){const n={};if(e){const r=e.match(/[^\r\n]+/g);if(n){for(const i of r)if(i){const o=i.indexOf(":"),a=o>0?i.substr(0,o).trim().toLowerCase():i,s=o>0&&i.length>o+1?i.substr(o+1).trim():"";n[a]=s}}}return n}stringToArrayBuffer(e){const n=new ArrayBuffer(e.length),r=new DataView(n);for(let i=0;i<e.length;i++)r.setUint8(i,e.charCodeAt(i));return n}}Dl.WebsocketMessageFormatter=ez;var to={},FS;function tz(){if(FS)return to;FS=1,Object.defineProperty(to,"__esModule",{value:!0}),to.SpeechConnectionFactory=void 0;const t=we(),e=D(),n=_(),r=Bt(),i=D(),o=Re,a=Lt;let s=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(u,l,p){let d=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),f=r.ConnectionFactoryBase.getHostSuffix(h),m=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+f),S={},v=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(v?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(S[a.QueryParameterNames.CustomSpeechDeploymentId]=v):g&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(S[a.QueryParameterNames.Language]=g),(!d||d.search(a.QueryParameterNames.Format)===-1)&&(S[a.QueryParameterNames.Format]=u.parameters.getProperty(e.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()),u.autoDetectSourceLanguages!==void 0&&(S[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(u,S,d),!d)switch(u.recognitionMode){case i.RecognitionMode.Conversation:u.parameters.getProperty(e.ForceDictationPropertyName,"false")==="true"?d=m+this.dictationRelativeUri:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${m}${this.universalUri}${u.recognitionEndpointVersion}`:d=m+this.conversationRelativeUri;break;case i.RecognitionMode.Dictation:d=m+this.dictationRelativeUri;break;default:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${m}${this.universalUri}${u.recognitionEndpointVersion}`:d=m+this.interactiveRelativeUri;break}const y={};l.token!==void 0&&l.token!==""&&(y[l.headerName]=l.token),y[o.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new t.WebsocketConnection(d,S,y,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),C,p),w=P.uri;return u.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,w),P}};return to.SpeechConnectionFactory=s,to}var no={},VS;function nz(){if(VS)return no;VS=1,Object.defineProperty(no,"__esModule",{value:!0}),no.ConversationTranscriberConnectionFactory=void 0;const t=we(),e=_(),n=D(),r=Bt(),i=D(),o=Re,a=Lt;let s=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(u,l,p){let d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,void 0),f=r.ConnectionFactoryBase.getHostSuffix(h),m=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+f),S={},v=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);v?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(S[a.QueryParameterNames.CustomSpeechDeploymentId]=v):g&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(S[a.QueryParameterNames.Language]=g),u.autoDetectSourceLanguages!==void 0&&(S[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(u,S,d),d||(d=`${m}${this.universalUri}`);const y={};l.token!==void 0&&l.token!==""&&(y[l.headerName]=l.token),y[o.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new t.WebsocketConnection(d,S,y,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),C,p),w=P.uri;return u.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,w),P}setV2UrlParams(u,l,p){new Map([[e.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[e.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[e.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[e.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[e.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[e.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((f,m)=>{this.setUrlParameter(m,f,u,l,p)});const h=JSON.parse(u.parameters.getProperty(n.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(f=>{l[f]=h[f]})}};return no.ConversationTranscriberConnectionFactory=s,no}var ro={},qS;function rz(){if(qS)return ro;qS=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.TranscriberConnectionFactory=void 0;const t=we(),e=_(),n=Bt(),r=D(),i=Re,o=Lt;let a=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,u,l){let p=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"centralus"),h=n.ConnectionFactoryBase.getHostSuffix(d),f="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,m=c.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,f),S={};this.setQueryParams(S,c,p),p||(p=m);const v={};u.token!==void 0&&u.token!==""&&(v[u.headerName]=u.token),v[i.HeaderNames.ConnectionId]=l,c.parameters.setProperty(e.PropertyId.SpeechServiceConnection_Url,p);const g=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(p,S,v,new r.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(c),g,l)}setQueryParams(c,u,l){const p=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=u.parameters.getProperty(e.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(o.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[o.QueryParameterNames.CustomSpeechDeploymentId]=p),d&&!(o.QueryParameterNames.Language in c)&&(c[o.QueryParameterNames.Language]=d);const h=u.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",f=u.parameters.getProperty(r.OutputFormatPropertyName,e.OutputFormat[e.OutputFormat.Simple])!==e.OutputFormat[e.OutputFormat.Simple];(h||f)&&(c[o.QueryParameterNames.Format]=e.OutputFormat[e.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(u,c,l)}};return ro.TranscriberConnectionFactory=a,ro}var io={},US;function iz(){if(US)return io;US=1,Object.defineProperty(io,"__esModule",{value:!0}),io.TranslationConnectionFactory=void 0;const t=we(),e=ja,n=_(),r=Bt(),i=D(),o=Re,a=Lt;let s=class extends r.ConnectionFactoryBase{create(u,l,p){const d=this.getEndpointUrl(u),h={};u.autoDetectSourceLanguages!==void 0&&(h[a.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(h,u,d);const f={};l.token!==void 0&&l.token!==""&&(f[l.headerName]=l.token),f[o.HeaderNames.ConnectionId]=p,u.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,d);const m=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(d,h,f,new i.WebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),m,p)}getEndpointUrl(u,l){const p=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),d=r.ConnectionFactoryBase.getHostSuffix(p);let h=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);return h||(u.autoDetectSourceLanguages!==void 0?h=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+"/speech/universal/v2":h=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+"/speech/translation/cognitiveservices/v1"),l===!0?h:e.StringUtils.formatString(h,{region:p})}setQueryParams(u,l,p){u.from=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),u.to=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages),u.scenario=l.recognitionMode===i.RecognitionMode.Interactive?"interactive":l.recognitionMode===i.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(l,u,p),this.setUrlParameter(n.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,l,u,p);const d=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);d!==void 0&&(u.voice=d,u.features="texttospeech")}};return io.TranslationConnectionFactory=s,io}var so={},$S;function sz(){if($S)return so;$S=1,Object.defineProperty(so,"__esModule",{value:!0}),so.EnumTranslation=void 0;const t=_(),e=D();let n=class{static implTranslateRecognitionResult(i,o=!1){let a=t.ResultReason.Canceled;switch(i){case e.RecognitionStatus.Success:a=t.ResultReason.RecognizedSpeech;break;case e.RecognitionStatus.EndOfDictation:a=o?t.ResultReason.RecognizedSpeech:t.ResultReason.NoMatch;break;case e.RecognitionStatus.NoMatch:case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:a=t.ResultReason.NoMatch;break;case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:a=t.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let o=t.CancellationReason.EndOfStream;switch(i){case e.RecognitionStatus.Success:case e.RecognitionStatus.EndOfDictation:case e.RecognitionStatus.NoMatch:o=t.CancellationReason.EndOfStream;break;case e.RecognitionStatus.InitialSilenceTimeout:case e.RecognitionStatus.BabbleTimeout:case e.RecognitionStatus.Error:case e.RecognitionStatus.BadRequest:case e.RecognitionStatus.Forbidden:default:o=t.CancellationReason.Error;break}return o}static implTranslateCancelErrorCode(i){let o=t.CancellationErrorCode.NoError;switch(i){case e.RecognitionStatus.Error:o=t.CancellationErrorCode.ServiceError;break;case e.RecognitionStatus.TooManyRequests:o=t.CancellationErrorCode.TooManyRequests;break;case e.RecognitionStatus.BadRequest:o=t.CancellationErrorCode.BadRequestParameters;break;case e.RecognitionStatus.Forbidden:o=t.CancellationErrorCode.Forbidden;break;default:o=t.CancellationErrorCode.NoError;break}return o}static implTranslateErrorDetails(i){let o="The speech service encountered an internal error and could not continue.";switch(i){case t.CancellationErrorCode.Forbidden:o="The recognizer is using a free subscription that ran out of quota.";break;case t.CancellationErrorCode.BadRequestParameters:o="Invalid parameter or unsupported audio format in the request.";break;case t.CancellationErrorCode.TooManyRequests:o="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return o}};return so.EnumTranslation=n,so}var OE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(t.SynthesisStatus||(t.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(t.RecognitionStatus||(t.RecognitionStatus={}))})(OE);var oo={},WS;function oz(){if(WS)return oo;WS=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.TranslationSynthesisEnd=void 0;const t=D();let e=class xE{constructor(r){this.privSynthesisEnd=JSON.parse(r),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=t.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(r){return new xE(r)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return oo.TranslationSynthesisEnd=e,oo}var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.TranslationHypothesis=void 0;const az=B,cz=tl;class pu{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=cz.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new pu(JSON.parse(e))}static fromTranslationResponse(e){az.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const n=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,n.Translation=e,new pu(n)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return(e=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:e.Language}}Ol.TranslationHypothesis=pu;var ao={},HS;function uz(){if(HS)return ao;HS=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.TranslationPhrase=void 0;const t=B,e=D(),n=tl;let r=class Sh{constructor(o){this.privTranslationPhrase=o,this.privTranslationPhrase.RecognitionStatus=e.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=n.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(o){return new Sh(JSON.parse(o))}static fromTranslationResponse(o){t.Contracts.throwIfNullOrUndefined(o,"translationResponse");const a=o.SpeechPhrase;return o.SpeechPhrase=void 0,a.Translation=o,a.Text=a.DisplayText,new Sh(a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var o;return(o=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:o.Language}get Confidence(){var o;return(o=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:o.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};return ao.TranslationPhrase=r,ao}var co={},KS;function lz(){if(KS)return co;KS=1,Object.defineProperty(co,"__esModule",{value:!0}),co.TranslationServiceRecognizer=void 0;const t=N(),e=_(),n=D();let r=class extends n.ConversationServiceRecognizer{constructor(o,a,s,c,u){super(o,a,s,c,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(l=>{l.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(o){const a=new e.PropertyCollection;let s=await this.processSpeechMessages(o);if(s)return!0;const c=async l=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),l.RecognitionStatus===n.RecognitionStatus.Success){const p=this.fireEventForResult(l,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=n.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),d=new e.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,l.Text,l.Duration,this.privRequestSession.currentTurnAudioOffset+l.Offset,l.Language,l.Confidence,void 0,o.textBody,a);if(p===e.ResultReason.Canceled){const h=n.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),f=n.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,f,n.EnumTranslation.implTranslateErrorDetails(f))}else{if(!(this.privRequestSession.isSpeechEnded&&p===e.ResultReason.NoMatch&&l.RecognitionStatus!==n.RecognitionStatus.InitialSilenceTimeout)){const h=new e.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0}},u=(l,p)=>{const d=this.fireEventForResult(l,p);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}s=!0};switch(o.messageType===t.MessageType.Text&&a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"translation.hypothesis":u(n.TranslationHypothesis.fromJSON(o.textBody),a);break;case"translation.response":const l=JSON.parse(o.textBody);if(l.SpeechPhrase)await c(n.TranslationPhrase.fromTranslationResponse(l));else{const d=JSON.parse(o.textBody);d.SpeechHypothesis&&u(n.TranslationHypothesis.fromTranslationResponse(d),a)}break;case"translation.phrase":await c(n.TranslationPhrase.fromJSON(o.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(o.binaryBody,this.privRequestSession.sessionId),s=!0;break;case"audio.end":case"translation.synthesis.end":const p=n.TranslationSynthesisEnd.fromJSON(o.textBody);switch(p.SynthesisStatus){case n.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new e.TranslationSynthesisResult(e.ResultReason.Canceled,void 0),h=new e.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new e.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,e.CancellationReason.Error,p.FailureReason,e.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case n.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}s=!0;break}return s}cancelRecognition(o,a,s,c,u){const l=new e.PropertyCollection;if(l.setProperty(n.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const p=new e.TranslationRecognitionCanceledEventArgs(o,s,u,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.TranslationRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(o,a,s){try{const c=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,s);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(o,a,s){try{const c=new e.TranslationRecognitionEventArgs(e.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,s);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(o,a){let s;if(o.Translation.Translations!==void 0){s=new e.Translations;for(const f of o.Translation.Translations)s.set(f.Language,f.Text||f.DisplayText)}let c,u;o instanceof n.TranslationPhrase?(o.Translation&&o.Translation.TranslationStatus===t.TranslationStatus.Success?c=e.ResultReason.TranslatedSpeech:c=e.ResultReason.RecognizedSpeech,u=o.Confidence):c=e.ResultReason.TranslatingSpeech;const l=o.Language,p=o.Offset+this.privRequestSession.currentTurnAudioOffset,d=new e.TranslationRecognitionResult(s,this.privRequestSession.requestId,c,o.Text,o.Duration,p,l,u,o.Translation.FailureReason,JSON.stringify(o),a);return new e.TranslationRecognitionEventArgs(d,p,this.privRequestSession.sessionId)}sendSynthesisAudio(o,a){const s=o===void 0?e.ResultReason.SynthesizingAudioCompleted:e.ResultReason.SynthesizingAudio,c=new e.TranslationSynthesisResult(s,o),u=new e.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return co.TranslationServiceRecognizer=r,co}var xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.SpeechDetected=void 0;class pv{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new pv(e)}get Offset(){return this.privSpeechStartDetected.Offset}}xl.SpeechDetected=pv;var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.SpeechHypothesis=void 0;class dv{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new dv(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}Nl.SpeechHypothesis=dv;var zl={};Object.defineProperty(zl,"__esModule",{value:!0});zl.SpeechKeyword=void 0;class hv{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new hv(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}zl.SpeechKeyword=hv;var uo={},GS;function pz(){if(GS)return uo;GS=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.SpeechServiceRecognizer=void 0;const t=_(),e=D();let n=class extends e.ServiceRecognizerBase{constructor(i,o,a,s,c){super(i,o,a,s,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(i){let o;const a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=e.SpeechHypothesis.fromJSON(i.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;o=new t.SpeechRecognitionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,i.textBody,a),this.privRequestSession.onHypothesis(u);const l=new t.SpeechRecognitionEventArgs(o,c.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}s=!0;break;case"speech.phrase":const p=e.SimpleSpeechPhrase.fromJSON(i.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),t.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=e.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,f,e.EnumTranslation.implTranslateErrorDetails(f))}else{if(!(this.privRequestSession.isSpeechEnded&&d===t.ResultReason.NoMatch&&p.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])o=new t.SpeechRecognitionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,i.textBody,a);else{const f=e.DetailedSpeechPhrase.fromJSON(i.textBody),m=f.Offset+this.privRequestSession.currentTurnAudioOffset,S=f.getJsonWithCorrectedOffsets(m);o=new t.SpeechRecognitionResult(this.privRequestSession.requestId,d,f.RecognitionStatus===e.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,m,f.Language,f.LanguageDetectionConfidence,void 0,void 0,S,a)}const h=new t.SpeechRecognitionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0;break}return s}cancelRecognition(i,o,a,s,c){const u=new t.PropertyCollection;if(u.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[s]),this.privSpeechRecognizer.canceled){const l=new t.SpeechRecognitionCanceledEventArgs(a,c,s,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new t.SpeechRecognitionResult(o,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,u);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}};return uo.SpeechServiceRecognizer=n,uo}var lo={},JS;function dz(){if(JS)return lo;JS=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.ConversationTranscriptionServiceRecognizer=void 0;const t=_(),e=D();let n=class extends e.ServiceRecognizerBase{constructor(i,o,a,s,c){super(i,o,a,s,c),this.privConversationTranscriber=c,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const i=this.privSpeechContext.getSection("phraseDetection");i.mode="Conversation";const o={};o.mode="Anonymous",o.audioSessionId=this.privDiarizationSessionId,o.audioOffsetMs=0,o.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",i.speakerDiarization=o,this.privSpeechContext.setSection("phraseDetection",i)}}async processTypeSpecificMessages(i){let o;const a=new t.PropertyCollection;a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=e.SpeechHypothesis.fromJSON(i.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;o=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,t.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,i.textBody,a),this.privRequestSession.onHypothesis(u);const l=new t.ConversationTranscriptionEventArgs(o,c.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch{}s=!0;break;case"speech.phrase":const p=e.SimpleSpeechPhrase.fromJSON(i.textBody),d=e.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),t.ResultReason.Canceled===d){const h=e.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=e.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,f,e.EnumTranslation.implTranslateErrorDetails(f))}else if(!(this.privRequestSession.isSpeechEnded&&d===t.ResultReason.NoMatch&&p.RecognitionStatus!==e.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(e.OutputFormatPropertyName)===t.OutputFormat[t.OutputFormat.Simple])o=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,i.textBody,a);else{const f=e.DetailedSpeechPhrase.fromJSON(i.textBody),m=f.Offset+this.privRequestSession.currentTurnAudioOffset,S=f.getJsonWithCorrectedOffsets(m);o=new t.ConversationTranscriptionResult(this.privRequestSession.requestId,d,f.RecognitionStatus===e.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,m,f.Language,f.LanguageDetectionConfidence,p.SpeakerId,void 0,S,a)}const h=new t.ConversationTranscriptionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,h)}catch{}}s=!0;break}return s}cancelRecognition(i,o,a,s,c){if(new t.PropertyCollection().setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[s]),this.privConversationTranscriber.canceled){const l=new t.ConversationTranscriptionCanceledEventArgs(a,c,s,void 0,i);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,l)}catch{}}}};return lo.ConversationTranscriptionServiceRecognizer=n,lo}var po={},QS;function hz(){if(QS)return po;QS=1,Object.defineProperty(po,"__esModule",{value:!0}),po.TranscriptionServiceRecognizer=void 0;const t=N(),e=_(),n=D(),r=mn;let i=class extends n.ConversationServiceRecognizer{constructor(a,s,c,u,l){super(a,s,c,u,l),this.privTranscriberRecognizer=l,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,s){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,s))}}async sendMeetingSpeechEventAsync(a,s){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,s))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,s,c){try{const u=new e.SpeechRecognitionEventArgs(a,s,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,s,c){try{const u=new e.SpeechRecognitionEventArgs(a,s,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(a,s,c,u,l){const p=new e.PropertyCollection;if(p.setProperty(n.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new e.MeetingTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new e.ConversationTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new e.SpeechRecognitionResult(s,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,p);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const s=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(s,"start");await this.sendSpeechEvent(a,c)}else{const s=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(s,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,s){const c=JSON.stringify(s);if(c)return a.send(new r.SpeechConnectionMessage(t.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,s){const c={id:"meeting",name:s,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,s){const c={id:"meeting",name:s,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return po.TranscriptionServiceRecognizer=i,po}var ho={},XS;function fz(){if(XS)return ho;XS=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.DetailedSpeechPhrase=void 0;const t=D();let e=class NE{constructor(r){this.privDetailedSpeechPhrase=JSON.parse(r),this.privDetailedSpeechPhrase.RecognitionStatus=t.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(r){return new NE(r)}getJsonWithCorrectedOffsets(r){if(this.privDetailedSpeechPhrase.NBest){let i;for(const o of this.privDetailedSpeechPhrase.NBest)if(o.Words&&o.Words[0]){i=o.Words[0].Offset;break}if(i&&i<r){const o=r-i;for(const a of this.privDetailedSpeechPhrase.NBest){if(a.Words)for(const s of a.Words)s.Offset+=o;if(a.DisplayWords)for(const s of a.DisplayWords)s.Offset+=o}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};return ho.DetailedSpeechPhrase=e,ho}var fo={},YS;function vz(){if(YS)return fo;YS=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.SimpleSpeechPhrase=void 0;const t=D();let e=class zE{constructor(r){this.privSimpleSpeechPhrase=JSON.parse(r),this.privSimpleSpeechPhrase.RecognitionStatus=t.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(r){return new zE(r)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};return fo.SimpleSpeechPhrase=e,fo}var jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.AddedLmIntent=void 0;class gz{constructor(e,n){this.modelImpl=e,this.intentName=n}}jl.AddedLmIntent=gz;var vo={},ZS;function mz(){if(ZS)return vo;ZS=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.IntentServiceRecognizer=void 0;const t=N(),e=_(),n=D();let r=class extends n.ServiceRecognizerBase{constructor(o,a,s,c,u){super(o,a,s,c,u),this.privIntentRecognizer=u,this.privIntentDataSent=!1}setIntents(o,a){this.privAddedLmIntents=o,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(o){let a,s,c=!1;const u=new e.PropertyCollection;switch(o.messageType===t.MessageType.Text&&u.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speech.hypothesis":const p=n.SpeechHypothesis.fromJSON(o.textBody);if(a=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,e.ResultReason.RecognizingIntent,p.Text,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,o.textBody,u),this.privRequestSession.onHypothesis(a.offset),s=new e.IntentRecognitionEventArgs(a,p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,s)}catch{}c=!0;break;case"speech.phrase":const d=n.SimpleSpeechPhrase.fromJSON(o.textBody);a=new e.IntentRecognitionResult(void 0,this.privRequestSession.requestId,n.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,o.textBody,u),s=new e.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||e.ResultReason.NoMatch===s.result.reason?(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),h()):this.privPendingIntentArgs=s,c=!0;break;case"response":if(s=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,s===void 0){if(o.textBody==="")return;s=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const f=n.IntentResponse.fromJSON(o.textBody);if(f!==null&&f.topScoringIntent&&f.topScoringIntent.intent){let m=this.privAddedLmIntents[f.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(m=this.privUmbrellaIntent),m){const S=m===void 0||m.intentName===void 0?f.topScoringIntent.intent:m.intentName;let v=s.result.reason;S!==void 0&&(v=e.ResultReason.RecognizedIntent);const g=s.result.properties!==void 0?s.result.properties:new e.PropertyCollection;g.setProperty(e.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,o.textBody),s=new e.IntentRecognitionEventArgs(new e.IntentRecognitionResult(S,s.result.resultId,v,s.result.text,s.result.duration,s.result.offset,void 0,void 0,s.result.errorDetails,s.result.json,g),s.offset,s.sessionId)}}if(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(s.result)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(o,a,s,c,u){const l=new e.PropertyCollection;if(l.setProperty(n.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const p=new e.IntentRecognitionCanceledEventArgs(s,u,c,void 0,void 0,o);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new e.IntentRecognitionResult(void 0,a,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return vo.IntentServiceRecognizer=r,vo}var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.IntentResponse=void 0;class fv{constructor(e){e===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new fv(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}Ll.IntentResponse=fv;var jE={};Object.defineProperty(jE,"__esModule",{value:!0});var Bl={},Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.ServiceTelemetryListener=void 0;const Yt=N(),eC=bl;class yz{constructor(e,n,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=n,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){this.privIsDisposed||(e instanceof eC.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof Yt.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Yt.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof Yt.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Yt.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Yt.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof eC.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof Yt.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof Yt.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Yt.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Yt.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].length<50&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const n={Metrics:e,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(n);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}Fl.ServiceTelemetryListener=yz;Object.defineProperty(Bl,"__esModule",{value:!0});Bl.RequestSession=void 0;const Vr=N(),vc=bl,Sz=Fl;class Cz{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=Vr.createNoDashGuid(),this.privAudioNodeId=Vr.createNoDashGuid(),this.privTurnDeferral=new Vr.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new Sz.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new vc.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(e,n){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,n?await this.onComplete():this.onEvent(new vc.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(e,n){this.privAuthFetchEventId=e,this.privSessionId=n,this.onEvent(new vc.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(e){e&&await this.onComplete()}async onConnectionEstablishCompleted(e,n){if(e===200){this.onEvent(new vc.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else e===403&&await this.onComplete()}async onServiceTurnEndResponse(e){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=Vr.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new Vr.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),Vr.Events.instance.onEvent(e)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}Bl.RequestSession=Cz;var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.SpeechContext=void 0;class Pz{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,n){this.privContext[e]=n}setPronunciationAssessmentParams(e,n,r=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),r&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),n&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:n},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}Vl.SpeechContext=Pz;var ql={};Object.defineProperty(ql,"__esModule",{value:!0});ql.DynamicGrammarBuilder=void 0;class Rz{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const e={};if(e.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const n=[];this.privPhrases.forEach(r=>{n.push({Text:r})}),e.Groups=[{Type:"Generic",Items:n}]}return e}}ql.DynamicGrammarBuilder=Rz;var LE={};Object.defineProperty(LE,"__esModule",{value:!0});var go={},Ul={},$l={},vv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class e{constructor(r){this.privActivityResponse=JSON.parse(r)}static fromJSON(r){return new e(r)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}t.ActivityPayloadResponse=e,function(n){n[n.None=0]="None",n[n.TextToSpeechAudio=1]="TextToSpeechAudio"}(t.MessageDataStreamType||(t.MessageDataStreamType={}))})(vv);Object.defineProperty($l,"__esModule",{value:!0});$l.DialogServiceTurnState=void 0;const wz=Zn,Ez=Ae,Tz=vv;class Iz{constructor(e,n){this.privRequestId=n,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,n){return e.messageDataStreamType===Tz.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=Ez.AudioOutputStream.createPullStream(),this.privAudioStream.format=n!==void 0?n:wz.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}$l.DialogServiceTurnState=Iz;Object.defineProperty(Ul,"__esModule",{value:!0});Ul.DialogServiceTurnStateManager=void 0;const tC=Me,Az=$l;class _z{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new tC.InvalidOperationError("Service error: There is already a turn with id:"+e);const n=new Az.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,n),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new tC.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const n=this.privTurnMap.get(e);return n.complete(),this.privTurnMap.delete(e),n}}Ul.DialogServiceTurnStateManager=_z;var nC;function Mz(){if(nC)return go;nC=1,Object.defineProperty(go,"__esModule",{value:!0}),go.DialogServiceAdapter=void 0;const t=we(),e=Or,n=N(),r=Zn,i=_(),o=Ul,a=D(),s=vv,c=mn;let u=class extends a.ServiceRecognizerBase{constructor(p,d,h,f,m){super(p,d,h,f,m),this.privEvents=new n.EventSource,this.privDialogServiceConnector=m,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new o.DialogServiceTurnStateManager,this.recognizeOverride=(S,v,g)=>this.listenOnce(S,v,g),this.postConnectImplOverride=S=>this.dialogConnectImpl(S),this.configConnectionOverride=S=>this.configConnection(S),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=h,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(S=>{S.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(p){const d=n.createGuid(),h=n.createNoDashGuid(),f={context:{interactionId:d},messagePayload:JSON.parse(p),version:.5},m=JSON.stringify(f);await(await this.fetchConnection()).send(new c.SpeechConnectionMessage(n.MessageType.Text,"agent",h,"application/json",m))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(p){const d=new i.PropertyCollection;p.messageType===n.MessageType.Text&&d.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,p.textBody);let h,f;switch(p.path.toLowerCase()){case"speech.phrase":const S=a.SimpleSpeechPhrase.fromJSON(p.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+S.Offset+S.Duration),S.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&S.RecognitionStatus!==a.RecognitionStatus.Error){const w=this.fireEventForResult(S,d);if(this.privLastResult=w.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,w)}catch{}}f=!0;break;case"speech.hypothesis":const v=a.SpeechHypothesis.fromJSON(p.textBody),g=v.Offset+this.privRequestSession.currentTurnAudioOffset;h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,v.Text,v.Duration,g,v.Language,v.LanguageDetectionConfidence,void 0,void 0,p.textBody,d),this.privRequestSession.onHypothesis(g);const y=new i.SpeechRecognitionEventArgs(h,v.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,y)}catch{}f=!0;break;case"speech.keyword":const C=a.SpeechKeyword.fromJSON(p.textBody);h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,C.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,C.Text,C.Duration,C.Offset,void 0,void 0,void 0,void 0,p.textBody,d),C.Status!=="Accepted"&&(this.privLastResult=h);const P=new i.SpeechRecognitionEventArgs(h,h.duration,h.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,P)}catch{}f=!0;break;case"audio":{const w=p.requestId.toUpperCase(),I=this.privTurnStateManager.GetTurn(w);try{p.binaryBody?I.audioStream.write(p.binaryBody):I.endAudioStream()}catch{}}f=!0;break;case"response":this.handleResponseMessage(p),f=!0;break}const m=new n.Deferred;return m.resolve(f),m.promise}async cancelRecognition(p,d,h,f,m){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const S=new i.PropertyCollection;S.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[f]);const v=new i.SpeechRecognitionCanceledEventArgs(h,m,f,void 0,p);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,v)}catch{}if(this.privSuccessCallback){const g=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,m,void 0,S);try{this.privSuccessCallback(g),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(p,d,h){this.privRecognizerConfig.recognitionMode=p,this.privSuccessCallback=d,this.privErrorCallback=h,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const f=this.connectImpl(),m=this.sendPreAudioMessages(),S=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),v=await this.privDialogAudioSource.format,g=await this.privDialogAudioSource.deviceInfo,y=new t.ReplayableAudioNode(S,v.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(y,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:g};try{await f,await m}catch(w){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,w),Promise.resolve()}const C=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,C),this.sendAudio(y).then(()=>{},async w=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,w)})}dialogConnectImpl(p){return this.privConnectionLoop=this.startMessageLoop(),p}receiveDialogMessageOverride(){const p=new n.Deferred,d=async()=>{try{const h=this.isDisposed(),f=!this.isDisposed()&&this.terminateMessageLoop;if(h||f){p.resolve(void 0);return}const S=await(await this.fetchConnection()).read();if(!S)return d();const v=c.SpeechConnectionMessage.fromConnectionMessage(S);switch(v.path.toLowerCase()){case"turn.start":{const R=v.requestId.toUpperCase(),A=this.privRequestSession.requestId.toUpperCase();R!==A?this.privTurnStateManager.StartTurn(R):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const y=a.SpeechDetected.fromJSON(v.textBody),C=new i.RecognitionEventArgs(y.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,C);break;case"speech.enddetected":let P;v.textBody.length>0?P=v.textBody:P="{ Offset: 0 }";const w=a.SpeechDetected.fromJSON(P);this.privRequestSession.onServiceRecognized(w.Offset+this.privRequestSession.currentTurnAudioOffset);const I=new i.RecognitionEventArgs(w.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,I);break;case"turn.end":{const R=v.requestId.toUpperCase(),A=this.privRequestSession.requestId.toUpperCase();if(R!==A)this.privTurnStateManager.CompleteTurn(R);else{const O=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,O),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(F){this.privErrorCallback&&this.privErrorCallback(F)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(v)||this.serviceEvents&&this.serviceEvents.onEvent(new n.ServiceEvent(v.path.toLowerCase(),v.textBody))}catch{}}return d()}catch{this.terminateMessageLoop=!0,p.resolve()}};return d().catch(h=>{n.Events.instance.onEvent(new n.BackgroundEvent(h))}),p.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(p){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,p)}return Promise.resolve()}async configConnection(p){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(p,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(p),p)}async sendPreAudioMessages(){const p=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(p,!0),await this.sendAgentContext(p),await this.sendWaveHeader(p)}sendAgentConfig(p){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const h=this.agentConfig.get();h.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(h)}this.onEvent(new e.SendingAgentContextMessageEvent(this.agentConfig));const d=this.agentConfig.toJsonString();return this.agentConfigSent=!0,p.send(new c.SpeechConnectionMessage(n.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",d))}}sendAgentContext(p){const d=n.createGuid(),h=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),m=JSON.stringify({channelData:"",context:{interactionId:d},messagePayload:typeof h===void 0?void 0:h,version:.5});return p.send(new c.SpeechConnectionMessage(n.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",m))}fireEventForResult(p,d){const h=a.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),f=p.Offset+this.privRequestSession.currentTurnAudioOffset,m=new i.SpeechRecognitionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,f,p.Language,p.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(p),d);return new i.SpeechRecognitionEventArgs(m,f,this.privRequestSession.sessionId)}handleResponseMessage(p){const d=JSON.parse(p.textBody);switch(d.messageType.toLowerCase()){case"message":const h=p.requestId.toUpperCase(),f=s.ActivityPayloadResponse.fromJSON(p.textBody),m=this.privTurnStateManager.GetTurn(h);if(f.conversationId){const g=this.agentConfig.get();g.botInfo.conversationId=f.conversationId,this.agentConfig.set(g)}const S=m.processActivityPayload(f,r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),v=new i.ActivityReceivedEventArgs(f.messagePayload,S);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,v)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(p.textBody))}catch{}break;default:n.Events.instance.onEvent(new n.BackgroundEvent(`Unexpected response of type ${d.messageType}. Ignoring.`));break}}onEvent(p){this.privEvents.onEvent(p),n.Events.instance.onEvent(p)}addKeywordContextData(){const p=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(p===void 0)return;const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),f=p.split(";"),m=d===void 0?[]:d.split(";"),S=h===void 0?[]:h.split(";"),v=[];for(let g=0;g<f.length;g++){const y={};y.text=f[g],g<m.length&&(y.offset=Number(m[g])),g<S.length&&(y.duration=Number(S[g])),v.push(y)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:v,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return go.DialogServiceAdapter=u,go}var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.AgentConfig=void 0;class kz{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}Wl.AgentConfig=kz;var nd={},mo={},Di={};Object.defineProperty(Di,"__esModule",{value:!0});Di.ConversationConnectionConfig=void 0;const bz=La;class qe extends bz.RestConfigBase{static get host(){return qe.privHost}static get apiVersion(){return qe.privApiVersion}static get clientAppId(){return qe.privClientAppId}static get defaultLanguageCode(){return qe.privDefaultLanguageCode}static get restPath(){return qe.privRestPath}static get webSocketPath(){return qe.privWebSocketPath}static get transcriptionEventKeys(){return qe.privTranscriptionEventKeys}}Di.ConversationConnectionConfig=qe;qe.privHost="dev.microsofttranslator.com";qe.privRestPath="/capito/room";qe.privApiVersion="2.0";qe.privDefaultLanguageCode="en-US";qe.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";qe.privWebSocketPath="/capito/translate";qe.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var rC;function Dz(){if(rC)return mo;rC=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.ConversationManager=void 0;const t=we(),e=B,n=_(),r=Di;let i=class{constructor(){this.privRequestParams=r.ConversationConnectionConfig.configParams,this.privErrors=r.ConversationConnectionConfig.restErrors,this.privHost=r.ConversationConnectionConfig.host,this.privApiVersion=r.ConversationConnectionConfig.apiVersion,this.privRestPath=r.ConversationConnectionConfig.restPath,this.privRestAdapter=new t.RestMessageAdapter({})}createOrJoin(a,s,c,u){try{e.Contracts.throwIfNullOrUndefined(a,"args");const l=a.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,r.ConversationConnectionConfig.defaultLanguageCode),p=a.getProperty(n.PropertyId.ConversationTranslator_Name,"conversation_host"),d=a.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),f=a.getProperty(n.PropertyId.SpeechServiceConnection_Key),m=a.getProperty(n.PropertyId.SpeechServiceConnection_Region),S=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token);e.Contracts.throwIfNullOrWhitespace(l,"languageCode"),e.Contracts.throwIfNullOrWhitespace(p,"nickname"),e.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const v={};v[this.privRequestParams.apiVersion]=this.privApiVersion,v[this.privRequestParams.languageCode]=l,v[this.privRequestParams.nickname]=p;const g={};h&&(g[this.privRequestParams.correlationId]=h),g[this.privRequestParams.clientAppId]=r.ConversationConnectionConfig.clientAppId,s!==void 0?v[this.privRequestParams.roomId]=s:(e.Contracts.throwIfNullOrUndefined(m,this.privErrors.authInvalidSubscriptionRegion),g[this.privRequestParams.subscriptionRegion]=m,f?g[this.privRequestParams.subscriptionKey]=f:S?g[this.privRequestParams.authorization]=`Bearer ${S}`:e.Contracts.throwIfNullOrUndefined(f,this.privErrors.authInvalidSubscriptionKey));const y={};y.headers=g,this.privRestAdapter.options=y;const C=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Post,C,v,null).then(P=>{const w=t.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,P.headers);if(!P.ok){if(u){let R=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",P.status.toString()),A;try{A=JSON.parse(P.data),R+=` [${A.error.code}: ${A.error.message}]`}catch{R+=` [${P.data}]`}w&&(R+=` ${w}`),u(R)}return}const I=JSON.parse(P.data);if(I&&(I.requestId=w),c){try{c(I)}catch(R){u&&u(R)}c=void 0}}).catch(()=>{})}catch(l){if(u)if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}}leave(a,s){return new Promise((c,u)=>{try{e.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),e.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","token"));const l=a.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),p=a.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=s;const h={};p&&(h[this.privRequestParams.correlationId]=p);const f={};f.headers=h,this.privRestAdapter.options=f;const m=`https://${l}${this.privRestPath}`;this.privRestAdapter.request(t.RestRequestType.Delete,m,d,null).then(S=>{S.ok,c()}).catch(()=>{})}catch(l){if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}})}};return mo.ConversationManager=i,mo}var fr={},yo={},Hl={},Ba={};Object.defineProperty(Ba,"__esModule",{value:!0});Ba.ConversationConnectionMessage=void 0;const Oz=N();class xz extends Oz.ConnectionMessage{constructor(e,n,r,i){super(e,n,r,i);const o=JSON.parse(this.textBody);o.type!==void 0&&(this.privConversationMessageType=o.type)}get conversationMessageType(){return this.privConversationMessageType}}Ba.ConversationConnectionMessage=xz;Object.defineProperty(Hl,"__esModule",{value:!0});Hl.ConversationWebsocketMessageFormatter=void 0;const vr=N(),iC=Ba;class Nz{toConnectionMessage(e){const n=new vr.Deferred;try{if(e.messageType===vr.MessageType.Text){const r=new iC.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);n.resolve(r)}else e.messageType===vr.MessageType.Binary&&n.resolve(new iC.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(e){const n=new vr.Deferred;try{if(e.messageType===vr.MessageType.Text){const r=`${e.textBody?e.textBody:""}`;n.resolve(new vr.RawWebsocketMessage(vr.MessageType.Text,r,e.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}}Hl.ConversationWebsocketMessageFormatter=Nz;var sC;function zz(){if(sC)return yo;sC=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.ConversationConnectionFactory=void 0;const t=we(),e=N(),n=B,r=_(),i=Bt(),o=Di,a=Hl;let s=class extends i.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(r.PropertyId.ConversationTranslator_Host,o.ConversationConnectionConfig.host),h=u.parameters.getProperty(r.PropertyId.ConversationTranslator_CorrelationId,e.createGuid()),f=`wss://${d}${o.ConversationConnectionConfig.webSocketPath}`,m=u.parameters.getProperty(r.PropertyId.ConversationTranslator_Token,void 0);n.Contracts.throwIfNullOrUndefined(m,"token");const S={};S[o.ConversationConnectionConfig.configParams.apiVersion]=o.ConversationConnectionConfig.apiVersion,S[o.ConversationConnectionConfig.configParams.token]=m,S[o.ConversationConnectionConfig.configParams.correlationId]=h;const v=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new t.WebsocketConnection(f,S,{},new a.ConversationWebsocketMessageFormatter,t.ProxyInfo.fromRecognizerConfig(u),v,p)}};return yo.ConversationConnectionFactory=s,yo}var So={},Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.ConversationRequestSession=void 0;const rd=N();class jz{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=rd.createNoDashGuid(),this.privRequestCompletionDeferral=new rd.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,n){this.privSessionId=n}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){e!==200&&e===403&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=rd.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)await e.detach()}}onComplete(){}}Kl.ConversationRequestSession=jz;var Ge={},oC;function BE(){if(oC)return Ge;oC=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.ConversationReceivedTranslationEventArgs=Ge.ParticipantsListEventArgs=Ge.ParticipantAttributeEventArgs=Ge.ParticipantEventArgs=Ge.LockRoomEventArgs=Ge.MuteAllEventArgs=void 0;const t=_();class e extends t.SessionEventArgs{constructor(c,u){super(u),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}Ge.MuteAllEventArgs=e;class n extends t.SessionEventArgs{constructor(c,u){super(u),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}Ge.LockRoomEventArgs=n;class r extends t.SessionEventArgs{constructor(c,u){super(u),this.privParticipant=c}get participant(){return this.privParticipant}}Ge.ParticipantEventArgs=r;class i extends t.SessionEventArgs{constructor(c,u,l,p){super(p),this.privKey=u,this.privValue=l,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Ge.ParticipantAttributeEventArgs=i;class o extends t.SessionEventArgs{constructor(c,u,l,p,d,h,f,m,S){super(S),this.privRoomId=c,this.privSessionToken=u,this.privTranslateTo=l,this.privProfanityFilter=p,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=f,this.privParticipants=m}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Ge.ParticipantsListEventArgs=o;class a{constructor(c,u,l){this.privPayload=u,this.privCommand=c,this.privSessionId=l}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Ge.ConversationReceivedTranslationEventArgs=a,Ge}var ln={};Object.defineProperty(ln,"__esModule",{value:!0});ln.ConversationTranslatorCommandTypes=ln.ConversationTranslatorMessageTypes=ln.InternalParticipants=void 0;class Lz{constructor(e=[],n){this.participants=e,this.meId=n}addOrUpdateParticipant(e){if(e===void 0)return;const n=this.getParticipantIndex(e.id);return n>-1?this.participants.splice(n,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex(n=>n.id===e)}getParticipant(e){return this.participants.find(n=>n.id===e)}deleteParticipant(e){this.participants=this.participants.filter(n=>n.id!==e)}get host(){return this.participants.find(e=>e.isHost===!0)}get me(){return this.getParticipant(this.meId)}}ln.InternalParticipants=Lz;ln.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};ln.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var FE={},Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.CommandResponsePayload=void 0;const Bz=t=>JSON.parse(t);class gv{constructor(e){this.privCommandResponse=Bz(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new gv(e)}}Gl.CommandResponsePayload=gv;var wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.ParticipantPayloadResponse=wi.ParticipantsListPayloadResponse=void 0;const Fz=t=>JSON.parse(t),Vz=t=>JSON.parse(t);class mv{constructor(e){this.privParticipantsPayloadResponse=Fz(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new mv(e)}}wi.ParticipantsListPayloadResponse=mv;class yv{constructor(e){this.privParticipantPayloadResponse=Vz(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new yv(e)}}wi.ParticipantPayloadResponse=yv;var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.TextResponsePayload=Ei.SpeechResponsePayload=void 0;const qz=t=>JSON.parse(t),Uz=t=>JSON.parse(t);class Sv{constructor(e){this.privSpeechResponse=qz(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(e){return new Sv(e)}}Ei.SpeechResponsePayload=Sv;class Cv{constructor(e){this.privTextResponse=Uz(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new Cv(e)}}Ei.TextResponsePayload=Cv;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Gl;Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return e.CommandResponsePayload}});var n=wi;Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantPayloadResponse}});var r=Ei;Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return r.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return r.TextResponsePayload}})})(FE);var aC;function $z(){if(aC)return So;aC=1,Object.defineProperty(So,"__esModule",{value:!0}),So.ConversationServiceAdapter=void 0;const t=N(),e=_(),n=D(),r=Ba,i=Kl,o=BE(),a=ln,s=FE;let c=class extends n.ServiceRecognizerBase{constructor(l,p,d,h,f){super(l,p,d,h,f),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=f,this.privConversationAuthentication=l,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=m=>this.conversationConnectImpl(m),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession(t.createNoDashGuid()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(l){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(l),await super.dispose(l)}async sendMessage(l){return(await this.fetchConnection()).send(new r.ConversationConnectionMessage(t.MessageType.Text,l))}async sendMessageAsync(l){await(await this.fetchConnection()).send(new r.ConversationConnectionMessage(t.MessageType.Text,l))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,e.CancellationReason.Error,e.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(l,p,d,h,f){this.terminateMessageLoop=!0;const m=new e.ConversationTranslationCanceledEventArgs(d,f,h,void 0,l);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,m)}catch{}}async conversationConnectImpl(l){return this.privConnectionLoop=this.startMessageLoop(),l}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const l=new t.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return l.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,f=d.conversationMessageType.toLowerCase();let m=!1;try{switch(f){case"info":case"participant_command":case"command":const S=s.CommandResponsePayload.fromJSON(d.textBody);switch(S.command.toLowerCase()){case"participantlist":const w=s.ParticipantsListPayloadResponse.fromJSON(d.textBody),I=w.participants.map(G=>({avatar:G.avatar,displayName:G.nickname,id:G.participantId,isHost:G.ishost,isMuted:G.ismuted,isUsingTts:G.usetts,preferredLanguage:G.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new o.ParticipantsListEventArgs(w.roomid,w.token,w.translateTo,w.profanityFilter,w.roomProfanityFilter,w.roomLocked,w.muteAll,I,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,S.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,S.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setMute,S.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new o.MuteAllEventArgs(S.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new e.ConversationExpirationEventArgs(S.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,S.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new o.LockRoomEventArgs(S.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.changeNickname,S.value,h));break;case"joinsession":const R=s.ParticipantPayloadResponse.fromJSON(d.textBody),A={avatar:R.avatar,displayName:R.nickname,id:R.participantId,isHost:R.ishost,isMuted:R.ismuted,isUsingTts:R.usetts,preferredLanguage:R.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(A,h));break;case"leavesession":const O={id:S.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(O,h));break;case"disconnectsession":const F={id:S.participantId};break;case"token":const J=new n.CognitiveTokenAuthentication(()=>{const G=S.token;return Promise.resolve(G)},()=>{const G=S.token;return Promise.resolve(G)});this.authentication=J,this.privConversationServiceConnector.onToken(J);break;default:break}break;case"partial":case"final":const v=s.SpeechResponsePayload.fromJSON(d.textBody),g=f==="final"?e.ResultReason.TranslatedParticipantSpeech:e.ResultReason.TranslatingParticipantSpeech,y=new e.ConversationTranslationResult(v.participantId,this.getTranslations(v.translations),v.language,v.id,g,v.recognition,void 0,void 0,d.textBody,void 0);v.isFinal?((y.text!==void 0&&y.text.length>0||v.id===this.privLastPartialUtteranceId)&&(m=!0),m&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,y,h))):y.text!==void 0&&(this.privLastPartialUtteranceId=v.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,y,h)));break;case"translated_message":const C=s.TextResponsePayload.fromJSON(d.textBody),P=new e.ConversationTranslationResult(C.participantId,this.getTranslations(C.translations),C.language,void 0,void 0,C.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,P,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return l.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const l=this.receiveConversationMessageOverride();try{return await l}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",e.CancellationReason.Error,e.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(l=>l.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(l=>l),this.privConnectionConfigPromise)}getTranslations(l){let p;if(l!==void 0){p=new e.Translations;for(const d of l)p.set(d.lang,d.translation)}return p}};return So.ConversationServiceAdapter=c,So}var cC;function Wz(){if(cC)return fr;cC=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.ConversationTranslatorRecognizer=fr.ConversationRecognizerFactory=void 0;const t=D(),e=N(),n=B,r=_(),i=zz(),o=$z();class a{static fromConfig(u,l,p){return new s(u,l,p)}}fr.ConversationRecognizerFactory=a;let s=class extends r.Recognizer{constructor(u,l,p){const d=l;n.Contracts.throwIfNull(d,"speechConfig");const h=u;n.Contracts.throwIfNull(h,"conversationImpl"),super(p,d.properties,new i.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=r.Connection.fromRecognizer(this),this.privProperties.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=e.Timeout.setTimeout,this.privClearTimeout=e.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,l,p){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d)}}disconnect(u,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},p=>{l&&l(p)})}catch(p){if(l)if(p instanceof Error){const d=p;l(d.name+": "+d.message)}else l(p);this.dispose(!0).catch(d=>{e.Events.instance.onEvent(new e.BackgroundEvent(d))})}}sendRequest(u,l,p){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d);this.dispose(!0).catch(h=>{e.Events.instance.onEvent(new e.BackgroundEvent(h))})}}onToken(u){this.privConversation.onToken(u)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(u){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(u))}createRecognizerConfig(u){return new t.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,l,p,d){const h=p;return new o.ConversationServiceAdapter(u,l,h,d,this)}sendMessage(u,l,p){const d=this.privReco;((f,m,S)=>{f!==void 0?f.then(()=>{try{m&&m()}catch(v){S&&S(`'Unhandled error on promise callback: ${v}'`)}},v=>{try{S&&S(v)}catch{}}):S&&S("Null promise")})(d.sendMessageAsync(u),l,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return fr.ConversationTranslatorRecognizer=s,fr}var Co={},uC;function Hz(){if(uC)return Co;uC=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.TranscriberRecognizer=void 0;const t=N(),e=B,n=_(),r=D();let i=class extends n.Recognizer{constructor(a,s){const c=a;e.Contracts.throwIfNull(c,"speechTranslationConfig");const u=s;e.Contracts.throwIfNull(u,"audioConfigImpl"),e.Contracts.throwIfNullOrWhitespace(c.speechRecognitionLanguage,n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(s,c.properties,new r.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return e.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){e.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}set conversation(a){e.Contracts.throwIfNullOrUndefined(a,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=a}getConversationInfo(){return e.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(a){e.Contracts.throwIfNullOrUndefined(a,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=a}getMeetingInfo(){return e.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(a,s){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),a,s)}stopContinuousRecognitionAsync(a,s){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,s)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(a,s){const c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendSpeechEventAsync(a,s)}async pushMeetingEvent(a,s){const c=this.privReco;e.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendMeetingSpeechEventAsync(a,s)}async enforceAudioGating(){const c=(await this.audioConfig.format).channels;if(c===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(c!==8)throw new Error(`Unsupported audio configuration: Detected ${c}-channel audio`)}connectMeetingCallbacks(a){this.isMeetingRecognizer=!0,this.canceled=(s,c)=>{a.canceled&&a.canceled(a,c)},this.recognizing=(s,c)=>{a.transcribing&&a.transcribing(a,c)},this.recognized=(s,c)=>{a.transcribed&&a.transcribed(a,c)},this.sessionStarted=(s,c)=>{a.sessionStarted&&a.sessionStarted(a,c)},this.sessionStopped=(s,c)=>{a.sessionStopped&&a.sessionStopped(a,c)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new r.RecognizerConfig(a,this.properties)}createServiceRecognizer(a,s,c,u){const l=c;return new r.TranscriptionServiceRecognizer(a,s,l,u,this)}};return Co.TranscriberRecognizer=i,Co}var lC;function Kz(){return lC||(lC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Dz();Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return e.ConversationManager}});var n=Di;Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return n.ConversationConnectionConfig}});var r=Wz();Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return r.ConversationRecognizerFactory}});var i=Hz();Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var o=BE();Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return o.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return o.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return o.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return o.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return o.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return o.ParticipantsListEventArgs}});var a=ln;Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(nd)),nd}var Pv={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,function(n){n.WordBoundary="WordBoundary",n.Bookmark="Bookmark",n.Viseme="Viseme",n.SentenceBoundary="SentenceBoundary",n.SessionEnd="SessionEnd",n.AvatarSignal="TalkingAvatarSignal"}(t.MetadataType||(t.MetadataType={}));class e{constructor(r){this.privSynthesisAudioMetadata=JSON.parse(r)}static fromJSON(r){return new e(r)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}t.SynthesisAudioMetadata=e})(Pv);var Po={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.SynthesisStartedEvent=$t.ConnectingToSynthesisServiceEvent=$t.SynthesisTriggeredEvent=$t.SpeechSynthesisEvent=void 0;const pC=N();class Jl extends pC.PlatformEvent{constructor(e,n,r=pC.EventType.Info){super(e,r),this.privRequestId=n}get requestId(){return this.privRequestId}}$t.SpeechSynthesisEvent=Jl;class Gz extends Jl{constructor(e,n,r){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=n,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}$t.SynthesisTriggeredEvent=Gz;class Jz extends Jl{constructor(e,n){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}$t.ConnectingToSynthesisServiceEvent=Jz;class Qz extends Jl{constructor(e,n){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}$t.SynthesisStartedEvent=Qz;var dC;function Xz(){if(dC)return Po;dC=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.SynthesisTurn=void 0;const t=N(),e=Ae,n=_(),r=Pv,i=$t;let o=class Ch{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=t.createNoDashGuid(),this.privTurnDeferral=new t.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(s){this.privStreamId=s}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(s){this.privAudioOutputFormat=s}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const s=new n.PropertyCollection;return s.setProperty(n.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),s}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const s=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(s),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(s,c,u,l){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=s,this.privRawText=c,this.privIsSSML=u,this.privAudioOutputStream=new e.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",l!==void 0&&(this.privTurnAudioDestination=l,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,l===void 0?void 0:l.id()))}onPreConnectionStart(s){this.privAuthFetchEventId=s,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(s){s&&this.onComplete()}onConnectionEstablishCompleted(s){if(s===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else s===403&&this.onComplete()}onServiceResponseMessage(s){const c=JSON.parse(s);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(s){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new t.Deferred;const c=JSON.parse(s);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(s){this.isSynthesizing&&(this.privAudioOutputStream.write(s),this.privBytesReceived+=s.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(s))}onTextBoundaryEvent(s){this.updateTextOffset(s.Data.text.Text,s.Type)}onVisemeMetadataReceived(s){s.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=s.Data.AnimationChunk)}onSessionEnd(s){this.privAudioDuration=s.Data.Offset}async constructSynthesisResult(){const s=await this.getAllReceivedAudioWithHeader();return new n.SpeechSynthesisResult(this.requestId,n.ResultReason.SynthesizingAudioCompleted,s,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const s=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",s}onEvent(s){t.Events.instance.onEvent(s)}static isXmlTag(s){return s.length>=2&&s[0]==="<"&&s[s.length-1]===">"}updateTextOffset(s,c){c===r.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(s,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+s.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Ch.isXmlTag(s)&&this.updateTextOffset(s,c))):(this.privSentenceOffset=this.privRawText.indexOf(s,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+s.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Ch.isXmlTag(s)&&this.updateTextOffset(s,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(s){return this.privRawText.indexOf("<",s+1)>this.privRawText.indexOf(">",s+1)}};return Po.SynthesisTurn=o,Po}var Ro={},hC;function Yz(){if(hC)return Ro;hC=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.SynthesisAdapterBase=void 0;const t=N(),e=_(),n=D(),r=mn;let i=class{constructor(a,s,c,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new t.ArgumentNullError("authentication");if(!s)throw new t.ArgumentNullError("connectionFactory");if(!c)throw new t.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=s,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new n.SynthesisTurn,this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privSynthesisContext=new n.SynthesisContext,this.privAgentConfig=new n.AgentConfig,this.connectionEvents.attach(l=>{if(l.name==="ConnectionClosedEvent"){const p=l;p.statusCode!==1e3&&this.cancelSynthesisLocal(e.CancellationReason.Error,p.statusCode===1007?e.CancellationErrorCode.BadRequestParameters:e.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,s){const c=typeof s=="string"?t.MessageType.Text:t.MessageType.Binary,u=typeof s=="string"?"application/json":"";return(await this.fetchConnection()).send(new r.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,u,s))}async Speak(a,s,c,u,l,p){let d;if(s?d=a:d=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(d,c,u,l);this.privSuccessCallback=u,this.privErrorCallback=l,this.privSynthesisTurn.startNewSynthesis(c,a,s,p);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(e.CancellationReason.Error,e.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new r.SpeechConnectionMessage(t.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,s,c,u){const l=new e.PropertyCollection;l.setProperty(n.CancellationErrorCodePropertyName,e.CancellationErrorCode[c]);const p=new e.SpeechSynthesisResult(a,e.ResultReason.Canceled,void 0,u,l);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(a,s,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,s,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const s=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!s)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=r.SpeechConnectionMessage.fromConnectionMessage(s);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const u=n.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const p of u)switch(p.Type){case n.MetadataType.WordBoundary:case n.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const d=new e.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===n.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(d);break;case n.MetadataType.Bookmark:const h=new e.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(h);break;case n.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const f=new e.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(f)}break;case n.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case n.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let l;try{l=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(l)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(l);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const s=this.synthesisContext.toJSON();if(s)return a.send(new r.SpeechConnectionMessage(t.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",s))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=t.createNoDashGuid(),this.privConnectionId=t.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const s=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=s.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const u=this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);u.events.attach(p=>{this.connectionEvents.onEvent(p)});const l=await u.open();return l.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.resolve(u)):l.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${l.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Url)} Reason: ${l.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,s){if(s)return a.send(new r.SpeechConnectionMessage(t.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",s))}sendSsmlMessage(a,s,c){return a.send(new r.SpeechConnectionMessage(t.MessageType.Text,"ssml",c,"application/ssml+xml",s))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return Ro.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,Ro}var wo={},fC;function Zz(){if(fC)return wo;fC=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.AvatarSynthesisAdapter=void 0;const t=_(),e=D();let n=class extends e.SynthesisAdapterBase{constructor(i,o,a,s,c){super(i,o,a,void 0),this.privAvatarSynthesizer=s,this.privSynthesizer=s,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var i,o,a,s,c,u,l,p,d,h,f,m,S,v,g,y,C;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(i=this.privAvatarConfig.videoFormat)==null?void 0:i.bitrate,codec:(o=this.privAvatarConfig.videoFormat)==null?void 0:o.codec,crop:{bottomRight:{x:(c=(s=(a=this.privAvatarConfig.videoFormat)==null?void 0:a.cropRange)==null?void 0:s.bottomRight)==null?void 0:c.x,y:(p=(l=(u=this.privAvatarConfig.videoFormat)==null?void 0:u.cropRange)==null?void 0:l.bottomRight)==null?void 0:p.y},topLeft:{x:(f=(h=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:h.topLeft)==null?void 0:f.x,y:(v=(S=(m=this.privAvatarConfig.videoFormat)==null?void 0:m.cropRange)==null?void 0:S.topLeft)==null?void 0:v.y}},resolution:{height:(g=this.privAvatarConfig.videoFormat)==null?void 0:g.height,width:(y=this.privAvatarConfig.videoFormat)==null?void 0:y.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:(C=this.privAvatarConfig.backgroundImage)==null?void 0:C.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const o=new t.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,o)}catch{}}}};return wo.AvatarSynthesisAdapter=n,wo}var Eo={},vC;function ej(){if(vC)return Eo;vC=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.SpeechSynthesisAdapter=void 0;const t=_(),e=D();let n=class extends e.SynthesisAdapterBase{constructor(i,o,a,s,c){super(i,o,a,c),this.privSpeechSynthesizer=s,this.privSynthesizer=s}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const o=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(i,t.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,o)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const o=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new t.SpeechSynthesisEventArgs(new t.SpeechSynthesisResult(this.privSynthesisTurn.requestId,t.ResultReason.SynthesizingAudio,o));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const o=new t.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,o)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new t.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return Eo.SpeechSynthesisAdapter=n,Eo}var To={},gC;function tj(){if(gC)return To;gC=1,Object.defineProperty(To,"__esModule",{value:!0}),To.SynthesisRestAdapter=void 0;const t=we(),e=_(),n=Bt(),r=Re;let i=class{constructor(a,s){let c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const l=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Region,"westus"),p=n.ConnectionFactoryBase.getHostSuffix(l);c=a.parameters.getProperty(e.PropertyId.SpeechServiceConnection_Host,`https://${l}.tts.speech${p}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const u=t.RestConfigBase.requestOptions;this.privRestAdapter=new t.RestMessageAdapter(u),this.privAuthentication=s}getVoicesList(a){return this.privRestAdapter.setHeaders(r.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(s=>(this.privRestAdapter.setHeaders(s.headerName,s.token),this.privRestAdapter.request(t.RestRequestType.Get,this.privUri)))}};return To.SynthesisRestAdapter=i,To}var id={},mC;function nj(){return mC||(mC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;const e=D();var n;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(n=t.SynthesisServiceType||(t.SynthesisServiceType={}));class r{constructor(o,a){this.privSynthesisServiceType=n.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=o||new e.SpeechServiceConfig(new e.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(o){this.privSynthesisServiceType=o}set synthesisVideoSection(o){this.privSpeechServiceConfig.Context.synthesis={video:o}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}t.SynthesizerConfig=r}(id)),id}var Io={},yC;function rj(){if(yC)return Io;yC=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.SynthesisContext=void 0;const t=_();let e=class{constructor(){this.privContext={}}setSection(r,i){this.privContext[r]=i}set audioOutputFormat(r){this.privAudioOutputFormat=r}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(r){const i=this.buildSynthesisContext(r);this.setSection("synthesis",i)}buildSynthesisContext(r){return{audio:{metadataOptions:{bookmarkEnabled:!!(r!=null&&r.bookmarkReached),punctuationBoundaryEnabled:r==null?void 0:r.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(r!=null&&r.wordBoundary)),sentenceBoundaryEnabled:r==null?void 0:r.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(r!=null&&r.visemeReceived),wordBoundaryEnabled:r==null?void 0:r.properties.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(r!=null&&r.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:r==null?void 0:r.autoDetectSourceLanguage}}}};return Io.SynthesisContext=e,Io}var Ao={},SC;function ij(){if(SC)return Ao;SC=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.SpeakerRecognitionConfig=void 0;const t=D();let e=class{constructor(r,i){this.privContext=r||new t.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return Ao.SpeakerRecognitionConfig=e,Ao}var _o={},CC;function sj(){if(CC)return _o;CC=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.SpeakerServiceRecognizer=void 0;const t=we(),e=N(),n=_(),r=D(),i=mn;let o=class extends r.ServiceRecognizerBase{constructor(s,c,u,l,p){super(s,c,u,l,p),this.privSpeakerRecognizer=p,this.privSpeakerAudioSource=u,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(s){let c=!1;const u=new n.PropertyCollection;switch(s.messageType===e.MessageType.Text&&u.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speaker.response":const p=JSON.parse(s.textBody);let d;p.status.statusCode.toLowerCase()!=="success"?d=new n.SpeakerRecognitionResult(p,n.ResultReason.Canceled,n.CancellationErrorCode.ServiceError,p.status.reason):d=new n.SpeakerRecognitionResult(p,n.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(s,c,u,l,p){if(new n.PropertyCollection().setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[l]),this.privResultDeferral){const h=new n.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:p,reason:p}},n.ResultReason.Canceled,l,p);try{this.privResultDeferral.resolve(h)}catch(f){this.privResultDeferral.reject(f)}}}async recognizeSpeakerOnce(s){this.privSpeakerModel=s,this.voiceProfileType=s.scenario,this.privResultDeferral||(this.privResultDeferral=new e.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(s)),l=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new t.ReplayableAudioNode(l,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await c,await u}catch(S){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,S)}const f=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,f),this.receiveMessage(),this.sendAudio(h).then(()=>{},S=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,S)}),this.privResultDeferral.promise}async sendPreAudioMessages(s){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,s)}async sendSpeakerRecognition(s,c){const u=JSON.stringify(c);return s.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))}extractSpeakerContext(s){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:s.profileIds,scenario:s.scenario}}};return _o.SpeakerServiceRecognizer=o,_o}var Mo={},PC;function oj(){if(PC)return Mo;PC=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.VoiceServiceRecognizer=void 0;const t=we(),e=N(),n=_(),r=D(),i=mn;let o=class extends r.ServiceRecognizerBase{constructor(s,c,u,l,p){super(s,c,u,l,p),this.privDeferralMap=new e.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(s){this.privSpeakerAudioSource=s}processTypeSpecificMessages(s){let c=!1;const u=new n.PropertyCollection;switch(s.messageType===e.MessageType.Text&&u.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speaker.profiles":const p=JSON.parse(s.textBody);switch(p.operation.toLowerCase()){case"create":this.handleCreateResponse(p,s.requestId);break;case"delete":case"reset":this.handleResultResponse(p,s.requestId);break;case"fetch":const m=JSON.parse(s.textBody);this.handleFetchResponse(m,s.requestId);break}c=!0;break;case"speaker.phrases":const d=JSON.parse(s.textBody);this.handlePhrasesResponse(d,s.requestId),c=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(s.textBody),f=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(s.requestId)&&this.privDeferralMap.complete(s.requestId,f),this.privRequestSession.onSpeechEnded(),c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(s,c,u,l,p){new n.PropertyCollection().setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[l]);const h=new n.VoiceProfileEnrollmentResult(n.ResultReason.Canceled,p,p);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,h)}async createProfile(s,c){this.voiceProfileType=s.toString();const u=this.connectImpl();try{const l=new e.Deferred;return await u,await this.sendCreateProfile(l,s,c),this.receiveMessage(),l.promise}catch(l){throw l}}async resetProfile(s){return this.voiceProfileType=s.profileType.toString(),this.sendCommonRequest("reset",s.profileType,s)}async deleteProfile(s){return this.voiceProfileType=s.profileType.toString(),this.sendCommonRequest("delete",s.profileType,s)}async retrieveEnrollmentResult(s){return this.voiceProfileType=s.profileType.toString(),this.privExpectedProfileId=s.profileId,this.sendCommonRequest("fetch",s.profileType,s)}async getAllProfiles(s){return this.voiceProfileType=s.toString(),this.sendCommonRequest("fetch",s)}async getActivationPhrases(s,c){this.voiceProfileType=s.toString();const u=this.connectImpl();try{const l=new e.Deferred;return await u,await this.sendPhrasesRequest(l,s,c),this.receiveMessage(),l.promise}catch(l){throw l}}async enrollProfile(s){this.voiceProfileType=s.profileType.toString();const c=new e.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),l=this.sendPreAudioMessages(s,c),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,f=new t.ReplayableAudioNode(p,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(f,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await u,await l}catch(v){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,v)}const m=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,m),this.receiveMessage(),this.sendAudio(f).then(()=>{},v=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,v)}),c.promise}async sendPreAudioMessages(s,c){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(u,"enroll",this.scenarioFrom(s.profileType),s)}async sendPhrasesRequest(s,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,s);const p=this.scenarioFrom(c),d={locale:u,scenario:p};return l.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(s,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,s);const p=c===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:u,number:"1",scenario:p};return l.send(new i.SpeechConnectionMessage(e.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(s,c,u=void 0){const l=this.connectImpl();try{const p=new e.Deferred;this.privRequestSession.onSpeechContext(),await l;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,p),await this.sendBaseRequest(d,s,this.scenarioFrom(c),u),this.receiveMessage(),p.promise}catch(p){throw p}}async sendBaseRequest(s,c,u,l){const p={scenario:u};return l?p.profileIds=[l.profileId]:p.maxPageSize=-1,s.send(new i.SpeechConnectionMessage(e.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}extractSpeakerContext(s){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:s.profileIds,scenario:s.scenario}}handlePhrasesResponse(s,c){if(this.privDeferralMap.getId(c))if(s.status.statusCode.toLowerCase()!=="success"){const u=n.ResultReason.Canceled,l=new n.VoiceProfilePhraseResult(u,s.status.statusCode,s.passPhraseType,[]);this.privDeferralMap.complete(c,l)}else if(s.phrases&&s.phrases.length>0){const u=n.ResultReason.EnrollingVoiceProfile,l=new n.VoiceProfilePhraseResult(u,s.status.statusCode,s.passPhraseType,s.phrases);this.privDeferralMap.complete(c,l)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(s,c){if(s.profiles&&s.profiles.length>0)if(this.privDeferralMap.getId(c)){const u=s.profiles.map(l=>l.profileId);this.privDeferralMap.complete(c,u)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(s,c){if(this.privDeferralMap.getId(c)){const u=s.operation.toLowerCase()==="delete"?n.ResultReason.DeletedVoiceProfile:n.ResultReason.ResetVoiceProfile,l=s.status.statusCode.toLowerCase()==="success"?u:n.ResultReason.Canceled,p=new n.VoiceProfileResult(l,`statusCode: ${s.status.statusCode}, errorDetails: ${s.status.reason}`);this.privDeferralMap.complete(c,p)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(s,c){if(this.privDeferralMap.getId(c)&&s.profiles[0]){if(this.privExpectedProfileId&&s.profiles.length===1&&s.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=s.profiles[0],l=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),s.status.reason);this.privDeferralMap.complete(c,l)}else if(s.profiles.length>0){const u=s.profiles,l=[];for(const p of u)l.push(new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(p.enrollmentStatus),JSON.stringify(p),s.status.reason));this.privDeferralMap.complete(c,l)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(s){switch(s.toLowerCase()){case"enrolled":return n.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return n.ResultReason.Canceled;default:return n.ResultReason.EnrollingVoiceProfile}}scenarioFrom(s){return s===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":s===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return Mo.VoiceServiceRecognizer=o,Mo}var VE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;class e{constructor(s){this.context=s}serialize(){return JSON.stringify(this,(s,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const u={};for(const l in c)Object.hasOwnProperty.call(c,l)&&(u[l&&l.charAt(0).toLowerCase()+l.substring(1)]=c[l]);return u}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(s){this.recognition=s.toLowerCase()}}t.SpeechServiceConfig=e;class n{constructor(s){this.system=new r,this.os=s}}t.Context=n;class r{constructor(){const s="1.41.0";this.name="SpeechSDK",this.version=s,this.build="JavaScript",this.lang="JavaScript"}}t.System=r;class i{constructor(s,c,u){this.platform=s,this.name=c,this.version=u}}t.OS=i;class o{constructor(s,c,u){this.manufacturer=s,this.model=c,this.version=u}}t.Device=o,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(t.connectivity||(t.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(t.type||(t.type={}))})(VE);var RC;function D(){return RC||(RC=1,function(t){var e=$&&$.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),n=$&&$.__exportStar||function(o,a){for(var s in o)s!=="default"&&!a.hasOwnProperty(s)&&e(a,o,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,n(zu,t),n(rl,t),n(bi,t),n(Lw,t),n(Bw,t),n(JN(),t),n(QN(),t),n(bl,t),n(XN(),t),n(YN(),t),n(ZN(),t),n(DE,t),n(Dl,t),n(tz(),t),n(nz(),t),n(rz(),t),n(iz(),t),n(ME(),t),n(sz(),t),n(OE,t),n(oz(),t),n(Ol,t),n(uz(),t),n(lz(),t),n(xl,t),n(Nl,t),n(zl,t),n(pz(),t),n(dz(),t),n(hz(),t),n(fz(),t),n(vz(),t),n(jl,t),n(mz(),t),n(Ll,t),n(jE,t),n(Bl,t),n(Vl,t),n(ql,t),n(LE,t),n(Mz(),t),n(Wl,t),n(Kz(),t),n(Pv,t),n(Xz(),t),n(Yz(),t);var r=Zz();Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return r.AvatarSynthesisAdapter}});var i=ej();Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),n(tj(),t),n(nj(),t),n(rj(),t),n(ij(),t),n(sj(),t),n(oj(),t),n(VE,t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}(Lp)),Lp}(function(t){var e=$&&$.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a),Object.defineProperty(i,s,{enumerable:!0,get:function(){return o[a]}})}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),n=$&&$.__exportStar||function(i,o){for(var a in i)a!=="default"&&!o.hasOwnProperty(a)&&e(o,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const r=D();new r.AgentConfig,n(_(),t)})(Ut);const du={endpoint:"https://qatarcentral.api.cognitive.microsoft.com/",speechKey:"9LHUPIAOkqwic7JHuc8NDeyyitilMBOOFxdtTRNDo1SCYw6DfQJVJQQJ99BCACFcvJRXJ3w3AAAYACOGsWAo",speechRegion:"qatarcentral"};class aj{static generate({text:e,language:n,style:r="chat",rate:i=1,pitch:o=0}){const a=vw(n),s=r||Mb(e),c=a.styles.includes(s),u=this.escapeXml(e),l=this.addProsodyBreaks(u),p=this.getEmotionSettings(s),d=i*p.rate,h=o+p.pitch;return`
<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" 
       xmlns:mstts="http://www.w3.org/2001/mstts" 
       xml:lang="${n}">
  <voice name="${a.name}">
    ${c?`<mstts:express-as style="${s}" styledegree="1.5">`:""}
      <prosody rate="${d}" pitch="${h}Hz" volume="+20%">
        ${this.addEmphasis(l,s)}
      </prosody>
    ${c?"</mstts:express-as>":""}
  </voice>
</speak>`.trim()}static escapeXml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}static addProsodyBreaks(e){return e.replace(/([.!?]+)/g,'$1<break time="300ms"/>').replace(/([,;:])/g,'$1<break time="200ms"/>').replace(/(\n|[-—])/g,'<break time="150ms"/>').replace(/([.!?]) ([A-Z])/g,'$1<break time="400ms"/>$2')}static getEmotionSettings(e){const n={excited:{rate:1.1,pitch:2},friendly:{rate:1,pitch:1},hopeful:{rate:1,pitch:1},sad:{rate:.95,pitch:-1},empathetic:{rate:.95,pitch:0},chat:{rate:1,pitch:0},cheerful:{rate:1.1,pitch:2},angry:{rate:1.2,pitch:3}};return n[e]||n.chat}static addEmphasis(e,n){return["excited","angry"].includes(n)?`<emphasis level="strong">${e}</emphasis>`:n==="sad"?`<emphasis level="reduced">${e}</emphasis>`:`<emphasis level="moderate">${e}</emphasis>`}}class cj{constructor(){Yl(this,"synthesizer",null)}async synthesizeSpeech(e,n){try{const r=Ut.SpeechConfig.fromSubscription(du.speechKey,du.speechRegion),i=`${n}-Neural`;r.speechSynthesisVoiceName=i,r.speechSynthesisOutputFormat=Ut.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm;const o=Ut.AudioConfig.fromDefaultSpeakerOutput();this.synthesizer=new Ut.SpeechSynthesizer(r,o);const a=aj.generate({text:e,language:n,style:"friendly",rate:1,pitch:0});return new Promise((s,c)=>{if(!this.synthesizer){c(new Error("Speech synthesizer not initialized"));return}this.synthesizer.speakSsmlAsync(a,u=>{u.reason===Ut.ResultReason.SynthesizingAudioCompleted?s():c(new Error(`Speech synthesis failed: ${u.errorDetails}`)),this.cleanup()},u=>{c(new Error(`Speech synthesis failed: ${u}`)),this.cleanup()})})}catch(r){throw this.cleanup(),r}}cleanup(){this.synthesizer&&(this.synthesizer.close(),this.synthesizer=null)}}function uj(){const[t,e]=E.useState(!1),[n,r]=E.useState(null);return{speak:E.useCallback(async(o,a)=>{if(!(!o||t))try{e(!0),r(null),await new cj().synthesizeSpeech(o,a)}catch(s){r(s.message),console.error("Speech synthesis error:",s)}finally{e(!1)}},[t]),isSpeaking:t,error:n}}class lj{constructor(){Yl(this,"translator",null)}async startTranslation(e,n,r,i){try{const o=Ut.SpeechTranslationConfig.fromSubscription(du.speechKey,du.speechRegion);o.speechRecognitionLanguage=e;const a=n.split("-")[0];o.addTargetLanguage(a);const s=Ut.AudioConfig.fromDefaultMicrophoneInput();this.translator=new Ut.TranslationRecognizer(o,s),this.translator.recognizing=(c,u)=>{u.result.text&&r(u.result.text)},this.translator.recognized=(c,u)=>{if(u.result.reason===Ut.ResultReason.TranslatedSpeech){const l=u.result.translations.get(a);l&&i(l)}},await this.translator.startContinuousRecognitionAsync()}catch(o){throw this.cleanup(),o}}async stopTranslation(){this.translator&&(await this.translator.stopContinuousRecognitionAsync(),this.cleanup())}cleanup(){this.translator&&(this.translator.close(),this.translator=null)}}function pj(){const[t,e]=E.useState(!1),[n,r]=E.useState(null),[i,o]=E.useState(null);E.useEffect(()=>(o(new lj),()=>{i==null||i.stopTranslation()}),[]);const a=E.useCallback(async(c,u,l,p)=>{try{if(!i)throw new Error("Translation service not initialized");r(null),await i.startTranslation(c,u,l,p),e(!0)}catch(d){r(d.message),e(!1),console.error("Translation error:",d)}},[i]),s=E.useCallback(async()=>{try{await(i==null?void 0:i.stopTranslation())}finally{e(!1)}},[i]);return{isTranslating:t,error:n,startTranslation:a,stopTranslation:s}}const dj=()=>{const[t,e]=E.useState(!1),[n,r]=E.useState("en-US"),[i,o]=E.useState("es-ES"),[a,s]=E.useState(""),[c,u]=E.useState(""),[l,p]=E.useState(!1),[d,h]=E.useState(""),[f,m]=E.useState("friendly"),[S,v]=E.useState(!1),[g,y]=E.useState(!0),[C,P]=E.useState(!1),{speak:w,isSpeaking:I,error:R}=uj(),{isTranslating:A,error:O,startTranslation:F,stopTranslation:J}=pj();E.useEffect(()=>{const Se=vw(i);h(Se.name)},[i]),E.useEffect(()=>{y(!A),P(A&&!I)},[A,I]);const G=E.useCallback(async()=>{if(!g&&C){u(""),s(""),P(!1);return}if(g)try{A?await J():(p(!0),await F(n,i,Se=>s(Se),async Se=>{u(Se),await J(),t||await w(Se,i,f)}))}finally{p(!1)}},[A,n,i,t,f,F,J,w,g,C]),Ke=E.useCallback(async()=>{if(c&&!S&&!t){v(!0);try{await w(c,i,f)}finally{v(!1)}}},[c,S,t,i,f,w]),It=E.useCallback(()=>{A||(r(i),o(n),s(""),u(""))},[n,i,A]);return T.jsxs(Ot.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-background transition-colors",children:[T.jsx("div",{className:"fixed top-6 right-6 z-50",children:T.jsx(_b,{})}),T.jsx("div",{className:"fixed top-6 left-6 z-50",children:T.jsx(Db,{sourceLanguage:n,targetLanguage:i,onSourceLanguageChange:r,onTargetLanguageChange:o,selectedVoice:d,selectedStyle:f,onVoiceChange:h,onStyleChange:m})}),T.jsxs("div",{className:"max-w-4xl mx-auto px-6 flex flex-col items-center justify-center min-h-screen",children:[T.jsx(Ot.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mb-8",children:T.jsx(Ob,{})}),T.jsxs("div",{className:"flex flex-col items-center gap-8 w-full max-w-2xl mx-auto",children:[T.jsx("div",{className:"relative w-[300px] h-[300px] mx-auto",children:T.jsx(Tb,{isListening:A,isSpeaking:I,isTranslationMode:C,onToggleListening:G})}),T.jsx(lw,{children:(R||O)&&T.jsx(Ot.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"w-full bg-red-500/20 text-red-400 p-3 text-sm text-center rounded-lg",children:R||O})}),T.jsxs(Ot.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},className:"w-full",children:[T.jsx("div",{className:"flex items-center justify-center mb-4",children:T.jsx(gw,{onSwap:It,disabled:A})}),T.jsx(Ib,{transcript:a,translation:c,sourceLanguage:n,targetLanguage:i,onRepeatTranslation:Ke,isRepeating:S})]})]})]})]})};function hj(){return T.jsx(hw,{children:T.jsx(dj,{})})}NR(document.getElementById("root")).render(T.jsx(E.StrictMode,{children:T.jsx(hw,{children:T.jsx(hj,{})})}));
